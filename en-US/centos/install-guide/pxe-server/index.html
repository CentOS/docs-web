<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Preparing for a Network Installation :: CentOS Docs Site</title>
    <link rel="canonical" href="https://docs.centos.org/centos/install-guide/pxe-server/">
    <meta name="generator" content="Antora 3.0.1">
    <link rel="stylesheet" href="../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.centos.org"><img src="https://docs.centos.org/_images/logo_small.png"></a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.centos.org/download/">Download CentOS</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="centos" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../">Installation Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../getting-started/">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../downloading/">Downloading CentOS</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Making_Media/">Preparing Installation Media</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Making_Media_Optical/">CD or DVD</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Making_Media_USB/">USB Drive</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Making_Media_USB_Linux/">Making an Installation USB Drive on Linux</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Making_Media_USB_Windows/">Making an Installation USB Drive on Windows</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Making_Media_USB_Mac/">Making an Installation USB Drive on Mac</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Preparing_Install_Sources/">Preparing Installation Sources</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Install_Source_DVD/">Installation Source on a DVD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Install_Source_HDD/">Installation Source on a Hard Drive</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Install_Source_Network/">Installation Source on the Network</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#Part_Install_x86.adoc.adoc">Installing on x86_64 and ARM 64</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Simple_Installation/">Quick Installation Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Steps-x86/">Planning for Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DU-Updating_drivers_during_installation_x86/">Updating Drivers During Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Boot_x86/">Booting the Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Graphical_Installation-x86/">Installing Using Anaconda</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Consoles_Logs_During_Install_x86/">Consoles and Logging During the Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Text_Installation_Intro-x86/">Installing in Text Mode</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Graphical_Installation_Intro-x86/">Installing in the Graphical User Interface</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../WelcomeSpoke-x86/">Welcome Screen and Language Selection</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../SummaryHub-x86/">The Installation Summary Screen</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../DateTimeSpoke-x86/">Date &amp; Time</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../LangSupportSpoke-x86/">Language Support</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../KeyboardSpoke-x86/">Keyboard Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../SecurityPolicySpoke-x86/">Security Policy</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../SourceSpoke-x86/">Installation Source</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../NetworkSpoke-x86/">Network &amp; Hostname</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../SoftwareSpoke-x86/">Software Selection</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../StorageSpoke-x86/">Installation Destination</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../CustomSpoke-x86/">Manual Partitioning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FilterSpoke-x86/">Storage Devices</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../KdumpSpoke-x86/">Kdump</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Write_changes_to_disk_x86/">Begin Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../ProgressHub-x86/">Installation Progress</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../PasswordSpoke-x86/">Set the Root Password</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../UserSpoke-x86/">Create a User Account</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Complete-x86/">Installation Complete</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Trouble-x86/">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Part_Install_ppc/">Installing on IBM Power Systems</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Steps-ppc/">Planning for Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DU-Updating_drivers_during_installation_ppc/">Updating Drivers During Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Boot_ppc/">Booting the Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Graphical_Installation-ppc/">Installing Using Anaconda</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Consoles_Logs_During_Install_ppc/">Consoles and Logging During the Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Text_Installation_Intro-ppc/">Installing in Text Mode</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Graphical_Installation_Intro-ppc/">Installing in the Graphical User Interface</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../WelcomeSpoke-ppc64/">Welcome Screen and Language Selection</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../SummaryHub-ppc64/">The Installation Summary Screen</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../DateTimeSpoke-ppc64/">Date &amp; Time</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../LangSupportSpoke-ppc64/">Language Support</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../KeyboardSpoke-ppc64/">Keyboard Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../SecurityPolicySpoke-ppc64/">Security Policy</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../SourceSpoke-ppc64/">Installation Source</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../NetworkSpoke-ppc64/">Network &amp; Hostname</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../SoftwareSpoke-ppc64/">Software Selection</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../StorageSpoke-ppc64/">Installation Destination</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../CustomSpoke-ppc64/">Manual Partitioning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FilterSpoke-ppc64/">Storage Devices</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../KdumpSpoke-ppc64/">Kdump</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Write_changes_to_disk_ppc/">Begin Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../ProgressHub-ppc64/">Installation Progress</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../PasswordSpoke-ppc64/">Set the Root Password</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../UserSpoke-ppc64/">Create a User Account</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Complete-ppc/">Installation Complete</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Trouble-ppc/">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Part_Install_Advanced/">Advanced Installation Options</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../adminoptions/">Boot Options</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="./">Preparing for a Network Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../vnc-installations/">Using VNC</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../headless-installations/">Headless Systems</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Kickstart2/">Kickstart Installations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../disk-image-install/">Installing into a Disk Image</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Part_After_Install/">After Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../InitialSetupHub-common/">Initial Setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../nextsteps/">Your Next Steps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Rescue_Mode/">Basic System Recovery</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../uninstall/">Uninstalling CentOS</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Part_Appendixes/">Technical Appendixes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Partitions-x86/">An Introduction to Disk Partitions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../iSCSI/">iSCSI Disks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Anaconda_Commands/">Anaconda UI Specific Commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Understanding_LVM/">Understanding LVM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../techref/">Other Technical Documentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ext4_to_xfs_command_reference_table/">Reference Table for ext4 and XFS Commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../data_size_appendix/">Data Size Terminology Reference Table</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../Revision_History/">Revision History</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Installation Guide</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">CentOS 8 Documentation</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../8-docs/">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">CentOS Documentation</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../docs/">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributor's Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../stream-contrib/">default</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Installation Guide</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../../">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../docs/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../">Installation Guide</a></li>
    <li><a href="../Part_Install_Advanced/">Advanced Installation Options</a></li>
    <li><a href="./">Preparing for a Network Installation</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/CentOS/docs-installation-guide/edit/7.8/modules/install-guide/pages/pxe-server.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1 class="page">Preparing for a Network Installation</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#sect-network-boot-setup">Configuring Network Boot Services</a>
<ul class="sectlevel2">
<li><a href="#sect-network-boot-setup-bios">Configuring a TFTP Server for BIOS-based AMD64 and Intel&#160;64 Clients</a></li>
<li><a href="#sect-network-boot-setup-uefi">Configuring a TFTP Server for UEFI-based AMD64/Intel&#160;64 and ARM Clients</a></li>
<li><a href="#sect-network-boot-setup-ppc-grub2">Configuring Network Boot for IBM Power&#160;Systems Using GRUB2</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A network installation using an installation server allows you to install CentOS on multiple systems using a <em>network boot</em> server. This way, all systems configured to do so will boot using an image provided by this server and start the installation program automatically.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Red&#160;Hat Satellite has the ability to automate the setup of a PXE server. See the <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Satellite/6.1/html/User_Guide/chap-Red_Hat_Satellite-User_Guide-Discovering_Bare_metal_Hosts_on_Satellite.html">
Red&#160;Hat Satellite User Guide</a> for more information.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A minimum of two systems is required for a network installation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <em>server</em> - a system running a DHCP server, a TFTP server to provide boot files, and an HTTP, FTP or NFS server which hosts the installation image. Theoretically, each of the servers can run on a different physical system; procedures in this section assume a single system runs all of them for simplicity.</p>
</li>
<li>
<p>A <em>client</em> - the system which you are installing CentOS to. When the installation begins, the client will query the DHCP server, obtain boot files from the TFTP server, and download the installation image from the HTTP, FTP or NFS server.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unlike most other means of installation, no physical boot media is required to be plugged in the client (that is, the system you are installing into) in order to begin the installation. This chapter describes the steps you must take to prepare for network installations.</p>
</div>
<div class="paragraph">
<p>The following steps must be performed to prepare for a network installation:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Configure the network server (<code>NFS</code>, <code>HTTPS</code>, <code>HTTP</code>, or <code>FTP</code>) to export the installation tree or the installation ISO image. For procedures describing the configuration, see <a href="../Install_Source_Network/#sect-making-media-sources-network" class="xref page">Installation Source on a Network</a>.</p>
</li>
<li>
<p>Configure the files on the <strong class="application">tftp</strong> server necessary for network boot, configure <code>DHCP</code>, and start the <code>tftp</code> service on the PXE server. See <a href="#sect-network-boot-setup">Configuring Network Boot Services</a> for details.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <strong class="application">GRUB2</strong> boot loader supports network boot from <code>HTTP</code> in addition to a <strong class="application">tftp</strong> server. However, obtaining boot files (the kernel and initial ram disk for the installer) over this protocol is very slow and suffers a risk of timeout failures. Using a <strong class="application">tftp</strong> server to provide the boot files is recommended.</p>
</div>
<div class="paragraph">
<p>This warning only applies to the kernel and initial ram disk (<code>vmlinuz</code> and <code>initrd</code>). Obtaining the <em>installation source</em> from an <code>HTTP</code> server does not carry this risk.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Boot the client (the system you want to install CentOS on) and start the installation.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The procedures in this chapter describe setting up a network boot server on a CentOS&#160;7 system. For details about configuring network boot on earlier releases of CentOS, see the appropriate <em class="citetitle">Installation Guide</em> for that release.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect-network-boot-setup"><a class="anchor" href="#sect-network-boot-setup"></a>Configuring Network Boot Services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After setting up a network server containing the package repositories to be used in the installation, the next step is to configure the PXE server itself. This server will contain files necessary to boot the CentOS and start the installation. Additionally, a <code>DHCP</code> server must be configured, and all necessary services must be enabled and started.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The network boot configuration procedure differs based on whether the AMD64/Intel&#160;64 system you want to install CentOS on uses BIOS or UEFI. Consult your hardware&#8217;s documentation to see which system is used on your hardware, and then follow the appropriate procedure in this chapter.</p>
</div>
<div class="paragraph">
<p>A separate procedure is provided for booting IBM Power&#160;Systems from a network location with the <strong class="application">GRUB2</strong> boot loader. See <a href="#sect-network-boot-setup-ppc-grub2">Configuring Network Boot for IBM Power&#160;Systems Using GRUB2</a> for details.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information on configuring a network boot server for use with headless systems (systems without a directly connected display, keyboard and mouse), see <a href="../headless-installations/#chap-headless-installations" class="xref page">Headless Systems</a>.</p>
</div>
<div class="sect2">
<h3 id="sect-network-boot-setup-bios"><a class="anchor" href="#sect-network-boot-setup-bios"></a>Configuring a TFTP Server for BIOS-based AMD64 and Intel&#160;64 Clients</h3>
<div class="paragraph">
<p>The following procedure will prepare the PXE server for booting BIOS-based AMD64 and Intel&#160;64 systems. For information on UEFI-based systems, see <a href="#sect-network-boot-setup-uefi">Configuring a TFTP Server for UEFI-based AMD64/Intel&#160;64 and ARM Clients</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Configuring a TFTP Boot Server for BIOS-based Systems</div>
<ol class="arabic">
<li>
<p>Install the <strong class="package">tftp-server</strong> package. To do this, enter the following command as <code>root</code>:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">yum install tftp-server</code></pre>
</div>
</div>
</li>
<li>
<p>Allow incoming connections to the <code>tftp</code> service in the firewall:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">firewall-cmd --add-service=tftp</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The above command only enables access until the next server reboot. To allow access permanently, add the <code class="option">--permanent</code> option. For more information about firewall configuration, see the <a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/index.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Security Guide</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Configure your <code>DHCP</code> server to use the boot images packaged with <strong class="application">SYSLINUX</strong>. If you do not have one installed, see the <a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/index.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Networking Guide</a> for instructions.</p>
<div class="paragraph">
<p>A sample configuration in the <code>/etc/dhcp/dhcpd.conf</code> file might look like:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>option space pxelinux;
option pxelinux.magic code 208 = string;
option pxelinux.configfile code 209 = text;
option pxelinux.pathprefix code 210 = text;
option pxelinux.reboottime code 211 = unsigned integer 32;
option architecture-type code 93 = unsigned integer 16;

subnet 10.0.0.0 netmask 255.255.255.0 {
	option routers 10.0.0.254;
	range 10.0.0.2 10.0.0.253;

	class "pxeclients" {
	  match if substring (option vendor-class-identifier, 0, 9) = "PXEClient";
	  next-server 10.0.0.1;

	  if option architecture-type = 00:07 {
	    filename "uefi/shim.efi";
	    } else {
	    filename "pxelinux/pxelinux.0";
	  }
	}
}</pre>
</div>
</div>
</li>
<li>
<p>You now need the <code>pxelinux.0</code> file from the SYSLINUX package in the ISO image file of the full installation DVD. To access it, enter the following commands as root:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">mount -t iso9660 /path_to_image/name_of_image.iso /mount_point -o loop,ro</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre># <code class="command">cp -pr /mount_point/Packages/syslinux-version-architecture.rpm /publicly_available_directory</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre># <code class="command">umount /mount_point</code></pre>
</div>
</div>
<div class="paragraph">
<p>Extract the package:</p>
</div>
<div class="literalblock">
<div class="content">
<pre># <code class="command">rpm2cpio syslinux-version-architecture.rpm | cpio -dimv</code></pre>
</div>
</div>
</li>
<li>
<p>Create a <code>pxelinux/</code> directory within <code>tftpboot/</code> and copy the <code>pxelinux.0</code> file into it:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">mkdir /var/lib/tftpboot/pxelinux</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre># <code class="command">cp publicly_available_directory/usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/pxelinux</code></pre>
</div>
</div>
</li>
<li>
<p>Create the directory <code>pxelinux.cfg/</code> in the <code>pxelinux/</code> directory:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">mkdir /var/lib/tftpboot/pxelinux/pxelinux.cfg</code></pre>
</div>
</div>
<div class="paragraph">
<p>Add a configuration file named <code>default</code> to the <code>pxelinux.cfg/</code> directory.</p>
</div>
<div class="paragraph">
<p>A sample configuration file at <code>/var/lib/tftpboot/pxelinux/pxelinux.cfg/default</code> might look like:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>default vesamenu.c32
prompt 1
timeout 600

display boot.msg

label linux
  menu label ^Install system
  menu default
  kernel images/CentOS-7/vmlinuz
  append initrd=images/CentOS-7/initrd.img ip=dhcp inst.repo=http://10.32.5.1/mnt/archive/CentOS/7/Server/x86_64/os/
label vesa
  menu label Install system with ^basic video driver
  kernel images/CentOS-7/vmlinuz
  append initrd=images/CentOS-7/initrd.img ip=dhcp inst.xdriver=vesa nomodeset inst.repo=http://10.32.5.1/mnt/archive/CentOS/7/Server/x86_64/os/
label rescue
  menu label ^Rescue installed system
  kernel images/CentOS-7/vmlinuz
  append initrd=images/CentOS-7/initrd.img rescue
label local
  menu label Boot from ^local drive
  localboot 0xffff</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code class="option">inst.repo=</code> <strong class="application">Anaconda</strong> option, shown in the example above, must always be used to specify the installation program&#8217;s image as well as the installation source. Without this option, the installation program will be unable to boot. For more information about boot options for <strong class="application">Anaconda</strong>, see <a href="../adminoptions/#sect-boot-options-installer" class="xref page">Configuring the Installation System at the Boot Menu</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create a subdirectory to store the boot image files within the <code>/var/lib/tftpboot/</code> directory, and copy the boot image files to it. In this example, we use the directory <code>/var/lib/tftpboot/pxelinux/images/CentOS-7/</code>:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">mkdir -p /var/lib/tftpboot/images/CentOS-7/</code>
# <code class="command">cp /path-to-x86-64-images/pxeboot/{vmlinuz,initrd.img} /var/lib/tftpboot/pxelinux/images/CentOS-7/</code></pre>
</div>
</div>
</li>
<li>
<p>Finally, start and enable the services:</p>
<div class="ulist">
<ul>
<li>
<p>The <code>dhcpd</code> service:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">systemctl start dhcpd</code>
# <code class="command">systemctl enable dhcpd</code></pre>
</div>
</div>
</li>
<li>
<p>The <code>xinetd</code> service, that manages the <strong class="application">tftpd</strong> service:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">systemctl start xinetd</code>
# <code class="command">systemctl enable xinetd</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>After finishing this procedure, the PXE boot server is ready to serve PXE clients. You can now start the system you want to install CentOS on, select PXE Boot when prompted to specify a boot source, and start the network installation. For more information, see <a href="../Boot_x86/#sect-booting-from-pxe-x86" class="xref page">Booting from the Network Using PXE (x86)</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="sect-network-boot-setup-uefi"><a class="anchor" href="#sect-network-boot-setup-uefi"></a>Configuring a TFTP Server for UEFI-based AMD64/Intel&#160;64 and ARM Clients</h3>
<div class="paragraph">
<p>The following procedure will prepare the PXE server for booting UEFI-based AMD64/Intel&#160;64 and ARM systems. For information on BIOS-based systems, see <a href="#sect-network-boot-setup-bios">Configuring a TFTP Server for BIOS-based AMD64 and Intel&#160;64 Clients</a>.</p>
</div>
<div class="olist arabic">
<div class="title">Configuring TFTP Boot for UEFI-based Systems</div>
<ol class="arabic">
<li>
<p>Install the <strong class="package">tftp-server</strong> package. To do this, enter the following command as <code>root</code>:</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>CentOS 7 UEFI PXE boot supports a lowercase file format for a MAC-based grub menu file. For example, the MAC address file format for grub2 is <code>grub.cfg-01-aa-bb-cc-dd-ee-ff</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="literalblock">
<div class="content">
<pre># <code class="command">yum install tftp-server</code></pre>
</div>
</div>
</li>
<li>
<p>Allow incoming connections to the <code>tftp</code> service in the firewall:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">firewall-cmd --add-service=tftp</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The above command only enables access until the next server reboot. To allow access permanently, add the <code class="option">--permanent</code> option. For more information about firewall configuration, see the <a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/index.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Security Guide</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Configure your <code>DHCP</code> server to use the EFI boot images packaged with <strong class="package">shim</strong>. If you do not have one installed, see the <a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/index.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Networking Guide</a> for instructions.</p>
<div class="paragraph">
<p>A sample configuration in the <code>/etc/dhcp/dhcpd.conf</code> file might look like:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>option space pxelinux;
option pxelinux.magic code 208 = string;
option pxelinux.configfile code 209 = text;
option pxelinux.pathprefix code 210 = text;
option pxelinux.reboottime code 211 = unsigned integer 32;
option architecture-type code 93 = unsigned integer 16;

subnet 10.0.0.0 netmask 255.255.255.0 {
	option routers 10.0.0.254;
	range 10.0.0.2 10.0.0.253;

	class "pxeclients" {
	  match if substring (option vendor-class-identifier, 0, 9) = "PXEClient";
	  next-server 10.0.0.1;

	  if option architecture-type = 00:07 {
	    filename "shim.efi";
	  } else {
	    filename "pxelinux/pxelinux.0";
		}
  }
}</pre>
</div>
</div>
</li>
<li>
<p>You now need the <code>shim.efi</code> file from the <strong class="package">shim</strong> package and the <code>grubx64.efi</code> file from the <strong class="package">grub2-efi</strong> package in the ISO image file. To access them, enter the following commands as root:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">mount -t iso9660 /path_to_image/name_of_image.iso /mount_point -o loop,ro</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre># <code class="command">cp -pr /mount_point/Packages/shim-version-architecture.rpm /publicly_available_directory</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre># <code class="command">cp -pr /mount_point/Packages/grub2-efi-version-architecture.rpm /publicly_available_directory</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre># <code class="command">umount /mount_point</code></pre>
</div>
</div>
<div class="paragraph">
<p>Extract the packages:</p>
</div>
<div class="literalblock">
<div class="content">
<pre># <code class="command">rpm2cpio shim-version-architecture.rpm | cpio -dimv</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre># <code class="command">rpm2cpio grub2-efi-version-architecture.rpm | cpio -dimv</code></pre>
</div>
</div>
</li>
<li>
<p>Copy the EFI boot images from your boot directory:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">cp publicly_available_directory/boot/efi/EFI/redhat/shim.efi /var/lib/tftpboot/`</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre># <code class="command">cp publicly_available_directory/boot/efi/EFI/redhat/grubx64.efi /var/lib/tftpboot/`</code></pre>
</div>
</div>
</li>
<li>
<p>Add a configuration file named <code>grub.cfg</code> to the <code>tftpboot/</code> directory. A sample configuration file at <code>/var/lib/tftpboot/grub.cfg</code> might look like:</p>
<div class="literalblock">
<div class="content">
<pre>set timeout=60
menuentry 'CentOS' {
  linuxefi images/CentOS-7/vmlinuz ip=dhcp inst.repo=http://10.32.5.1/mnt/archive/CentOS-7/7/Server/x86_64/os/
  initrdefi images/CentOS-7/initrd.img
}</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code class="option">inst.repo=</code> <strong class="application">Anaconda</strong> option, shown in the example above, must always be used to specify the installation program&#8217;s image as well as the installation source. Without this option, the installation program will be unable to boot. For more information about boot options for <strong class="application">Anaconda</strong>, see <a href="../adminoptions/#sect-boot-options-installer" class="xref page">Configuring the Installation System at the Boot Menu</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create a subdirectory to store the boot image files within the <code>/var/lib/tftpboot/</code> directory, and copy the boot image files to it. In this example, we use the directory <code>/var/lib/tftpboot/images/CentOS-7/</code>:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">mkdir -p /var/lib/tftpboot/images/CentOS-7</code>
# <code class="command">cp /path-to-x86-64-images/pxeboot/{vmlinuz,initrd.img} /var/lib/tftpboot/images/CentOS-7/</code></pre>
</div>
</div>
</li>
<li>
<p>Finally, start and enable the services:</p>
<div class="ulist">
<ul>
<li>
<p>The <code>dhcpd</code> service:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">systemctl start dhcpd</code>
# <code class="command">systemctl enable dhcpd</code></pre>
</div>
</div>
</li>
<li>
<p>The <code>xinetd</code> service, that manages the <strong class="application">tftpd</strong> service:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">systemctl start xinetd</code>
# <code class="command">systemctl enable xinetd</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>After finishing this procedure, the PXE boot server is ready to serve PXE clients. You can now start the system you want to install CentOS on, select PXE Boot when prompted to specify a boot source, and start the network installation. For more information, see <a href="../Boot_x86/#sect-booting-from-pxe-x86" class="xref page">Booting from the Network Using PXE (x86)</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="sect-network-boot-setup-ppc-grub2"><a class="anchor" href="#sect-network-boot-setup-ppc-grub2"></a>Configuring Network Boot for IBM Power&#160;Systems Using GRUB2</h3>
<div class="olist arabic">
<div class="title">Configuring a Network Boot Server for IBM Power&#160;Systems Using GRUB2</div>
<ol class="arabic">
<li>
<p>Install the <strong class="package">tftp-server</strong> package. To do this, enter the following command as <code>root</code>:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">yum install tftp-server</code></pre>
</div>
</div>
</li>
<li>
<p>Allow incoming connections to the <code>tftp</code> service in the firewall:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">firewall-cmd --add-service=tftp</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The above command only enables access until the next server reboot. To allow access permanently, add the <code class="option">--permanent</code> option. For more information about firewall configuration, see the <a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/index.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Security Guide</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create a <strong class="application">GRUB2</strong> network boot directory inside the <strong class="application">tftp</strong> root:</p>
<div class="literalblock">
<div class="content">
<pre># <code class="command">grub2-mknetdir --net-directory=/var/lib/tftpboot</code>
Netboot directory for powerpc-ieee1275 created. Configure your DHCP server to point to /boot/grub2/powerpc-ieee1275/core.elf</pre>
</div>
</div>
<div class="paragraph">
<p>Note the command&#8217;s output, which informs you about which file needs to be configured as the <code class="option">filename</code> in your <code>DHCP</code> configuration. This will become important further in the procedure.</p>
</div>
</li>
<li>
<p>Create a <strong class="application">GRUB2</strong> configuration file: <code>/var/lib/tftpboot/boot/grub2/grub.cfg</code>. The <code>grub.cfg</code> syntax is described in the <a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/index.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 System Administrator&#8217;s Guide</a>.</p>
<div class="paragraph">
<p>Below is an example configuration file:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>set default=0
set timeout=5

echo -e "\nWelcome to the CentOS 7 installer!\n\n"

menuentry 'CentOS 7' {
  linux grub2-ppc64/vmlinuz ro ip=dhcp inst.repo=http://10.32.5.1/mnt/archive/CentOS/7/Server/ppc64/os/
  initrd grub2-ppc64/initrd.img
}</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code class="option">inst.repo=</code> <strong class="application">Anaconda</strong> option, shown in the example above, must always be used to specify the installation program&#8217;s image as well as the installation source. Without this option, the installation program will be unable to boot. For more information about boot options for <strong class="application">Anaconda</strong>, see <a href="../adminoptions/#sect-boot-options-installer" class="xref page">Configuring the Installation System at the Boot Menu</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Configure your <code>DHCP</code> server to use the boot images packaged with <strong class="application">GRUB2</strong>. If you do not have one installed, see the <a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/index.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Networking Guide</a> for instructions.</p>
<div class="paragraph">
<p>A sample configuration in the <code>/etc/dhcp/dhcpd.conf</code> file might look like:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>subnet 192.168.0.1 netmask 255.255.255.0 {
  allow bootp;
  option routers 192.168.0.5;
  group { #BOOTP POWER clients
    filename "boot/grub2/powerpc-ieee1275/core.elf";
    host client1 {
    hardware ethernet 01:23:45:67:89:ab;
    fixed-address 192.168.0.112;
    }
  }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Adjust the sample parameters (<code class="option">subnet</code>, <code class="option">netmask</code>, <code class="option">routers</code>, <code class="option">fixed-address</code> and <code class="option">hardware ethernet</code>) to fit your network configuration. Also note the <code class="option">filename</code> parameter; this is the file name which was output by the <code class="command">grub2-mknetdir</code> command earlier in the procedure.</p>
</div>
</li>
<li>
<p>Finally, start and enable the services:</p>
<div class="ulist">
<ul>
<li>
<p>The <code>dhcpd</code> service:</p>
<div class="literalblock">
<div class="content">
<pre># systemctl start dhcpd
# systemctl enable dhcpd</pre>
</div>
</div>
</li>
<li>
<p>The <code>xinetd</code> service that manages the <strong class="application">tftpd</strong> service:</p>
<div class="literalblock">
<div class="content">
<pre># systemctl start xinetd
# systemctl enable xinetd</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>After finishing this procedure, the PXE boot server is ready to serve PXE clients. You can now follow the steps described in <a href="../Boot_ppc/#chap-booting-installer-ppc" class="xref page">Booting the Installation on IBM Power&#160;Systems</a> to boot your Power&#160;Systems client from this server.</p>
</div>
<div class="paragraph">
<p>Additional information about setting up network boot for IBM Power&#160;Systems clients can be found in the <a href="https://www.ibm.com/developerworks/community/wikis/home?lang=en#!/wiki/W51a7ffcf4dfd_4b40_9d82_446ebc23c550/page/Netbooting%20on%20POWER%20-%20An%20Introduction">Netbooting on POWER - An Introduction</a> at the IBM DeveloperWorks website.</p>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <p>All CentOS Documentation content available under <a href="http://creativecommons.org/licenses/by-sa/3.0/legalcode">CC-BY-SA 3.0.</a>
  <p>This page was built using a modified version of the Antora default UI. The source code for this UI is licensed under the terms of the <a href="https://www.mozilla.org/en-US/MPL/2.0/">MPL-2.0</a> license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
