<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Kickstart Installations :: CentOS Docs Site</title>
    <link rel="canonical" href="https://docs.centos.org/centos/install-guide/Kickstart2/">
    <meta name="generator" content="Antora 2.0.0">
    <link rel="stylesheet" href="../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.centos.org"><img src="https://docs.centos.org/_images/logo_small.png"></a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.centos.org/download/">Download CentOS</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="centos" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../">Installation Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../getting-started/">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../downloading/">Downloading CentOS</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Making_Media/">Preparing Installation Media</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Making_Media_Optical/">CD or DVD</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Making_Media_USB/">USB Drive</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Making_Media_USB_Linux/">Making an Installation USB Drive on Linux</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Making_Media_USB_Windows/">Making an Installation USB Drive on Windows</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Making_Media_USB_Mac/">Making an Installation USB Drive on Mac</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Preparing_Install_Sources/">Preparing Installation Sources</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Install_Source_DVD/">Installation Source on a DVD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Install_Source_HDD/">Installation Source on a Hard Drive</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Install_Source_Network/">Installation Source on the Network</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Part_Install_x86/">Installing on x86_64 and ARM 64</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Simple_Installation/">Quick Installation Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Steps-x86/">Planning for Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DU-Updating_drivers_during_installation_x86/">Updating Drivers During Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Boot_x86/">Booting the Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Graphical_Installation-x86/">Installing Using Anaconda</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Consoles_Logs_During_Install_x86/">Consoles and Logging During the Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Text_Installation_Intro-x86/">Installing in Text Mode</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Graphical_Installation_Intro-x86/">Installing in the Graphical User Interface</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../WelcomeSpoke-x86/">Welcome Screen and Language Selection</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../SummaryHub-x86/">The Installation Summary Screen</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../DateTimeSpoke-x86/">Date &amp; Time</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../LangSupportSpoke-x86/">Language Support</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../KeyboardSpoke-x86/">Keyboard Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../SecurityPolicySpoke-x86/">Security Policy</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../SourceSpoke-x86/">Installation Source</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../NetworkSpoke-x86/">Network &amp; Hostname</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../SoftwareSpoke-x86/">Software Selection</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../StorageSpoke-x86/">Installation Destination</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../CustomSpoke-x86/">Manual Partitioning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FilterSpoke-x86/">Storage Devices</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../KdumpSpoke-x86/">Kdump</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Write_changes_to_disk_x86/">Begin Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../ProgressHub-x86/">Installation Progress</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../PasswordSpoke-x86/">Set the Root Password</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../UserSpoke-x86/">Create a User Account</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Complete-x86/">Installation Complete</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Trouble-x86/">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Part_Install_ppc/">Installing on IBM Power Systems</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Steps-ppc/">Planning for Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DU-Updating_drivers_during_installation_ppc/">Updating Drivers During Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Boot_ppc/">Booting the Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Graphical_Installation-ppc/">Installing Using Anaconda</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Consoles_Logs_During_Install_ppc/">Consoles and Logging During the Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Text_Installation_Intro-ppc/">Installing in Text Mode</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Graphical_Installation_Intro-ppc/">Installing in the Graphical User Interface</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../WelcomeSpoke-ppc64/">Welcome Screen and Language Selection</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../SummaryHub-ppc64/">The Installation Summary Screen</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../DateTimeSpoke-ppc64/">Date &amp; Time</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../LangSupportSpoke-ppc64/">Language Support</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../KeyboardSpoke-ppc64/">Keyboard Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../SecurityPolicySpoke-ppc64/">Security Policy</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../SourceSpoke-ppc64/">Installation Source</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../NetworkSpoke-ppc64/">Network &amp; Hostname</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../SoftwareSpoke-ppc64/">Software Selection</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../StorageSpoke-ppc64/">Installation Destination</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../CustomSpoke-ppc64/">Manual Partitioning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FilterSpoke-ppc64/">Storage Devices</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../KdumpSpoke-ppc64/">Kdump</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Write_changes_to_disk_ppc/">Begin Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../ProgressHub-ppc64/">Installation Progress</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../PasswordSpoke-ppc64/">Set the Root Password</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../UserSpoke-ppc64/">Create a User Account</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Complete-ppc/">Installation Complete</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Trouble-ppc/">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Part_Install_Advanced/">Advanced Installation Options</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../adminoptions/">Boot Options</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../pxe-server/">Preparing for a Network Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../vnc-installations/">Using VNC</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../headless-installations/">Headless Systems</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="./">Kickstart Installations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../disk-image-install/">Installing into a Disk Image</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Composer/">Building Custom System Images with Composer</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Part_After_Install/">After Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../InitialSetupHub-common/">Initial Setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../nextsteps/">Your Next Steps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Rescue_Mode/">Basic System Recovery</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../uninstall/">Uninstalling CentOS</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Part_Appendixes/">Technical Appendixes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Partitions-x86/">An Introduction to Disk Partitions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../iSCSI/">iSCSI Disks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Understanding_LVM/">Understanding LVM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../techref/">Other Technical Documentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ext4_to_xfs_command_reference_table/">Reference Table for ext4 and XFS Commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../data_size_appendix/">Data Size Terminology Reference Table</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../Revision_History/">Revision History</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Installation Guide</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">CentOS 8 Documentation</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../8-docs/">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">CentOS Documentation</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../docs/">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Installation Guide</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../docs/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../">Installation Guide</a></li>
    <li><a href="../Part_Install_Advanced/">Advanced Installation Options</a></li>
    <li><a href="./">Kickstart Installations</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/CentOS/docs-installation-guide/edit/7.6/modules/install-guide/pages/Kickstart2.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1 class="page">Kickstart Installations</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#sect-kickstart-introduction">What are Kickstart Installations?</a></li>
<li><a href="#sect-kickstart-howto">How Do You Perform a Kickstart Installation?</a>
<ul class="sectlevel2">
<li><a href="#sect-kickstart-file-create">Creating a Kickstart File</a></li>
<li><a href="#sect-kickstart-making-available">Making the Kickstart File Available</a></li>
<li><a href="#sect-kickstart-installation-tree">Making the Installation Source Available</a></li>
<li><a href="#sect-kickstart-installation-starting">Starting the Kickstart Installation</a></li>
</ul>
</li>
<li><a href="#sect-kickstart-syntax">Kickstart Syntax Reference</a>
<ul class="sectlevel2">
<li><a href="#sect-kickstart-commands">Kickstart Commands and Options</a></li>
<li><a href="#sect-kickstart-packages">Package Selection</a></li>
<li><a href="#sect-kickstart-preinstall">Pre-installation Script</a></li>
<li><a href="#sect-kickstart-anaconda-configuration">Anaconda configuration</a></li>
<li><a href="#sect-kickstart-postinstall">Post-installation Script</a></li>
<li><a href="#sect-kickstart-onerror">Kickstart Error Handling</a></li>
<li><a href="#sect-kickstart-addon">Kickstart Add-ons</a></li>
</ul>
</li>
<li><a href="#sect-kickstart-examples">Sample Kickstart Configurations</a>
<ul class="sectlevel2">
<li><a href="#sect-kickstart-partitioning-example">Advanced Partitioning Example</a></li>
<li><a href="#sect-kickstart-input-example">User Input Example</a></li>
<li><a href="#sect-kickstart-service-example">Example Kickstart file for installing and starting the RNG daemon</a></li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="sect-kickstart-introduction"><a class="anchor" href="#sect-kickstart-introduction"></a>What are Kickstart Installations?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kickstart installations offer a means to automate the installation process, either partially or fully. Kickstart files contain answers to all questions normally asked by the installation program, such as what time zone you want the system to use, how the drives should be partitioned, or which packages should be installed. Providing a prepared Kickstart file when the installation begins therefore allows you to perform the installation automatically, without need for any intervention from the user. This is especially useful when deploying CentOS on a large number of systems at once.</p>
</div>
<div class="paragraph">
<p>Kickstart files can be kept on a single server system and read by individual computers during the installation. This installation method can support the use of a single Kickstart file to install CentOS on multiple machines, making it ideal for network and system administrators.</p>
</div>
<div class="paragraph">
<p>All Kickstart scripts and the log files of their execution are stored in the <code>/tmp</code> directory to assist with debugging installation failures.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In previous versions of CentOS, Kickstart allowed for upgrading the system as well. In CentOS&#160;7.x, this functionality has been removed.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect-kickstart-howto"><a class="anchor" href="#sect-kickstart-howto"></a>How Do You Perform a Kickstart Installation?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kickstart installations can be performed using a local DVD, a local hard drive, NFS, FTP, HTTP, or HTTPS.</p>
</div>
<div class="paragraph">
<p>To use Kickstart, you must:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Kickstart file.</p>
</li>
<li>
<p>Make the Kickstart file available on removable media, a hard drive or a network location.</p>
</li>
<li>
<p>Create boot media, which will be used to begin the installation.</p>
</li>
<li>
<p>Make the installation source available.</p>
</li>
<li>
<p>Start the Kickstart installation.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This chapter explains these steps in detail.</p>
</div>
<div class="sect2">
<h3 id="sect-kickstart-file-create"><a class="anchor" href="#sect-kickstart-file-create"></a>Creating a Kickstart File</h3>
<div class="paragraph">
<p>The Kickstart file itself is a plain text file, containing keywords listed in <a href="#sect-kickstart-syntax">Kickstart Syntax Reference</a>, which serve as directions for the installation. Any text editor able to save files as ASCII text, such as <strong class="application">Gedit</strong> or <strong class="application">vim</strong> on Linux systems or <strong class="application">Notepad</strong> on Windows systems, can be used to create and edit Kickstart files. The file name of your Kickstart configuration does not matter; however, it is recommended to use a simple name as you will need to specify this name later in other configuration files or dialogs.</p>
</div>
<div class="paragraph">
<p>The recommended approach to creating Kickstart files is to perform a manual installation on one system first. After the installation completes, all choices made during the installation are saved into a file named <code>anaconda-ks.cfg</code>, located in the <code>/root/</code> directory on the installed system. You can then copy this file, make any changes you need, and use the resulting configuration file in further installations.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you have a Red&#160;Hat Customer&#160;Portal account, you can use the <strong class="application">Kickstart Configuration Tool</strong> available at <a href="https://access.redhat.com/labs/kickstartconfig/" class="bare">https://access.redhat.com/labs/kickstartconfig/</a> in the Customer Portal Labs. This tool will walk you through basic configuration and allows you to download the resulting Kickstart file. However, the tool currently does not supported any advanced partitioning.</p>
</div>
<div class="paragraph">
<p><strong class="application">Kickstart Configurator</strong>, the graphical tool for creating Kickstart files, is still available. However, it is no longer being updated and it does not reflect changes in Kickstart syntax between CentOS&#160;6 and 7.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When creating a Kickstart file, keep in mind the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sections must be specified <em>in order</em>. Items within the sections do not have to be in a specific order unless otherwise specified. The section order is:</p>
<div class="ulist">
<ul>
<li>
<p>Command section - See <a href="#sect-kickstart-commands">Kickstart Commands and Options</a> for a list of Kickstart options. You must include the required options.</p>
<div class="paragraph">
<p>Add-ons for <strong class="application">Anaconda</strong> which expand the functionality of the installer can also be used in the command section by using the <code class="command">%addon <em>addon_name</em></code> command. See <a href="#sect-kickstart-addon">Kickstart Add-ons</a> for details.</p>
</div>
</li>
<li>
<p>The <code class="command">%packages</code> section - See <a href="#sect-kickstart-packages">Package Selection</a> for details.</p>
</li>
<li>
<p>The <code class="command">%pre</code> and <code class="command">%post</code> sections, and the <code class="command">%onerror</code> section - these sections can be in any order and are not required. See <a href="#sect-kickstart-preinstall">Pre-installation Script</a>, <a href="#sect-kickstart-postinstall">Post-installation Script</a> and <a href="#sect-kickstart-onerror">Kickstart Error Handling</a> for details.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Sections <code class="command">%addon</code>, <code class="command">%packages</code>, <code class="command">%onerror</code>, <code class="command">%pre</code> and <code class="command">%post</code> must end with <code class="command">%end</code>, otherwise the installation program will refuse the Kickstart file.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Items that are not required can be omitted.</p>
</li>
<li>
<p>Omitting any required item results in the installation program prompting the user for an answer to the related item, just as the user would be prompted during a typical installation. Once the answer is given, the installation continues unattended (unless it finds another missing item).</p>
</li>
<li>
<p>Lines starting with a pound (also known as number) sign (<code>#</code>) are treated as comments and are ignored.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="sect-kickstart-verify"><a class="anchor" href="#sect-kickstart-verify"></a>Verifying the Kickstart File</h4>
<div class="paragraph">
<p>When creating or customizing your Kickstart file, it is useful to verify that it is valid before attempting to use it in an installation. CentOS&#160;7.6.1810 includes the <strong class="application">ksvalidator</strong> command line utility which can be used to do this. This tool is a part of the <strong class="package">pykickstart</strong> package. To install this package, execute the following command as <code>root</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code>#</code> yum install pykickstart</pre>
</div>
</div>
<div class="paragraph">
<p>After installing the package, you can validate a Kickstart file using the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code>$</code> <code class="command">ksvalidator <em>/path/to/kickstart.ks</em></code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <em>/path/to/kickstart.ks</em> with the path to the Kickstart file you want to verify.</p>
</div>
<div class="paragraph">
<p>For more information about this tool, see the <code>ksvalidator(1)</code> man page.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Keep in mind that the validation tool has its limitations. The Kickstart file can be very complicated; <strong class="application">ksvalidator</strong> can make sure the syntax is correct and that the file does not include deprecated options, but it cannot guarantee the installation will be successful. It also does not attempt to validate the <code class="command">%pre</code>, <code class="command">%post</code> and <code class="command">%packages</code> sections of the Kickstart file.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="sect-kickstart-syntax-changes"><a class="anchor" href="#sect-kickstart-syntax-changes"></a>Changes in Kickstart Syntax</h4>
<div class="paragraph">
<p>While the general principles of Kickstart installations tend to stay the same, the commands and options can change between major releases of CentOS. You can use the <code class="command">ksverdiff</code> command to display the differences between two versions of the Kickstart syntax. This is useful when updating an existing Kickstart file to be used with a new release. To display a list of changes in syntax between CentOS 6 and 7, use the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code>$</code> <code class="command">ksverdiff -f RHEL6 -t RHEL7</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="option">-f</code> option specifies the release to start the comparison with, and the <code class="option">-t</code> option to specify the release to end with. For additional information, see the <code>ksverdiff(1)</code> man page.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sect-kickstart-making-available"><a class="anchor" href="#sect-kickstart-making-available"></a>Making the Kickstart File Available</h3>
<div class="paragraph">
<p>A Kickstart file must be placed in one of the following locations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>On <em>removable media</em>, such as a DVD or USB flash drive</p>
</li>
<li>
<p>On a <em>hard drive</em> connected to the installation system</p>
</li>
<li>
<p>On a <em>network share</em> reachable from the installation system</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Normally, a Kickstart file is copied to removable media or a hard drive, or made available on the network. Placing the file in a network location complements the usual approach to Kickstart installations, which is also network-based: the system is booted using a PXE server, the Kickstart file is downloaded from a network share, and software packages specified in the file are downloaded from remote repositories.</p>
</div>
<div class="paragraph">
<p>Making the Kickstart file available and reachable from the installation system is exactly the same as making the installation source available, only with the Kickstart file instead of the installation ISO image or tree. For full procedures, see <a href="../Preparing_Install_Sources/#sect-making-media-additional-sources" class="page">Preparing Installation Sources</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="sect-kickstart-installation-tree"><a class="anchor" href="#sect-kickstart-installation-tree"></a>Making the Installation Source Available</h3>
<div class="paragraph">
<p>The Kickstart installation must access an installation source in order to install the packages needed by your system. The source can be either the full CentOS installation DVD ISO image, or an <em>installation tree</em>. An installation tree is a copy of the binary CentOS DVD with the same directory structure.</p>
</div>
<div class="paragraph">
<p>If you are performing a DVD-based installation, insert the CentOS installation DVD into the computer before starting the Kickstart installation. See <a href="../Install_Source_DVD/#sect-making-media-sources-dvd" class="page">Installation Source on a DVD</a> for information about using a CentOS DVD as the installation source.</p>
</div>
<div class="paragraph">
<p>If you are performing a hard drive installation (using either a hard drive or an USB flash drive), make sure the ISO images of the binary CentOS DVD are on a hard drive in the computer. See <a href="../Install_Source_HDD/#sect-making-media-sources-hdd" class="page">Installation Source on a Hard Drive</a> for details about using a hard drive as the installation source.</p>
</div>
<div class="paragraph">
<p>If you are performing a network-based (NFS, FTP or HTTP) installation, you must make the installation tree or the binary DVD ISO image (depending on the protocol used) available over the network. See <a href="../Install_Source_Network/#sect-making-media-sources-network" class="page">Installation Source on a Network</a> for details.</p>
</div>
</div>
<div class="sect2">
<h3 id="sect-kickstart-installation-starting"><a class="anchor" href="#sect-kickstart-installation-starting"></a>Starting the Kickstart Installation</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To load your Kickstart file automatically without having to specify the <code class="option">inst.ks=</code> boot option, name the file <code>ks.cfg</code> and place it on a storage volume labeled <code>OEMDRV</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To start a Kickstart installation, use the boot option <code class="option">inst.ks=<em>location</em></code> when booting the installation system, replacing <em>location</em> with the location of your Kickstart file. The exact way to specify the boot option depends on your system&#8217;s architecture - see <a href="../adminoptions/#chap-anaconda-boot-options" class="page">Boot Options</a> for details.</p>
</div>
<div class="paragraph">
<p>64-bit AMD, Intel and ARM systems and IBM Power&#160;Systems servers have the ability to boot using a PXE server. When you configure the PXE server, you can add the boot option into the boot loader configuration file, which in turn allows you to start the installation automatically. Using this approach, it is possible to automate the installation completely, including the boot process. For information about setting up a PXE server, see <a href="../pxe-server/#chap-installation-server-setup" class="page">Preparing for a Network Installation</a>.</p>
</div>
<div class="paragraph">
<p>Procedures in this section assume that you already have a Kickstart file ready in a location accessible from the installation system, as well as boot media or a PXE server which can be used to boot the system and begin the installation. The procedures are intended as a general reference; some steps differ based on your system&#8217;s architecture, and not all options are available on all architectures.</p>
</div>
<div class="sect3">
<h4 id="sect-kickstart-installation-starting-manual"><a class="anchor" href="#sect-kickstart-installation-starting-manual"></a>Starting the Kickstart Installation Manually</h4>
<div class="paragraph">
<p>This section explains how to start a Kickstart installation manually, which means some user interaction (adding boot options at the <code>boot:</code> prompt) will be required.</p>
</div>
<div id="proc-kickstart-installation-starting-manual" class="olist arabic">
<div class="title">Starting the Kickstart Installation Using a Boot Option</div>
<ol class="arabic">
<li>
<p>Boot the system using either local media (a CD, DVD, or a USB flash drive). For architecture-specific instructions, see:</p>
<div class="ulist">
<ul>
<li>
<p><a href="../Boot_x86/#chap-booting-installer-x86" class="page">Booting the Installation on 64-bit AMD, Intel, and ARM systems</a> for 64-bit AMD, Intel, and ARM systems</p>
</li>
<li>
<p><a href="../Boot_ppc/#chap-booting-installer-ppc" class="page">Booting the Installation on IBM Power&#160;Systems</a> for IBM Power&#160;Systems servers</p>
</li>
</ul>
</div>
</li>
<li>
<p>At the boot prompt, specify the <code class="option">inst.ks=</code> boot option and the location of the Kickstart file. If the Kickstart file is in a network location, you must also configure the network using the <code class="option">ip=</code> option. In some cases, the <code class="option">inst.repo=</code> option is also necessary in order to access a software source from which necessary packages will be installed.</p>
<div class="paragraph">
<p>For details about boot options and valid syntax, see <a href="../adminoptions/#chap-anaconda-boot-options" class="page">Boot Options</a>.</p>
</div>
</li>
<li>
<p>Start the installation by confirming your added boot options.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The installation begins now, using the options specified in the Kickstart file. If the Kickstart file is valid and contains all required commands, the installation is completely automated from this point forward.</p>
</div>
</div>
<div class="sect3">
<h4 id="sect-kickstart-installation-starting-automatic"><a class="anchor" href="#sect-kickstart-installation-starting-automatic"></a>Starting the Kickstart Installation Automatically</h4>
<div class="paragraph">
<p>The following procedure explains how to completely automate the Kickstart installation, using a network boot (PXE) server and a properly configured boot loader. If you follow this procedure, you only need to turn on the system; no other interaction will be required from that moment until the installation finishes.</p>
</div>
<div id="proc-kickstart-installation-starting-network" class="olist arabic">
<div class="title">Starting the Kickstart Installation by Editing Boot Loader Configuration</div>
<ol class="arabic">
<li>
<p>Open the boot loader configuration file on your PXE server, and add the <code class="option">inst.ks=</code> boot option to the appropriate line. The name of the file and its syntax depends on your system&#8217;s architecture and hardware:</p>
<div class="ulist">
<ul>
<li>
<p>On AMD64 and Intel&#160;64 systems with <em>BIOS</em>, the file name can be either <code>default</code> or based on your system&#8217;s IP address. In this case, add the <code class="option">inst.ks=</code> option to the <code>append</code> line in the installation entry. A sample <code>append</code> line in the configuration file looks similar to the following:</p>
<div class="literalblock">
<div class="content">
<pre>append initrd=initrd.img inst.ks=http://10.32.5.1/mnt/archive/CentOS/7.6.1810/Server/x86_64/kickstarts/ks.cfg</pre>
</div>
</div>
</li>
<li>
<p>On systems using the <strong class="application">GRUB2</strong> boot loader (64-bit AMD, Intel, and ARM systems with UEFI firmware and IBM Power&#160;Systems servers), the file name will be <code>grub.cfg</code>. In this file, append the <code class="option">inst.ks=</code> option to the <code>kernel</code> line in the installation entry. A sample <code>kernel</code> line in the configuration file will look similar to the following:</p>
<div class="literalblock">
<div class="content">
<pre>kernel vmlinuz inst.ks=http://10.32.5.1/mnt/archive/CentOS/7.6.1810/Server/x86_64/kickstarts/ks.cfg</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Boot the installation from the network server. For architecture-specific instructions, see:</p>
<div class="ulist">
<ul>
<li>
<p><a href="../Boot_x86/#sect-booting-from-pxe-x86" class="page">Booting from the Network Using PXE (x86)</a> for 64-bit AMD, Intel, and ARM systems</p>
</li>
<li>
<p><a href="../Boot_ppc/#sect-booting-from-pxe-ppc" class="page">Booting from the Network Using PXE (ppc)</a> for IBM Power&#160;Systems servers</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The installation begins now, using the installation options specified in the Kickstart file. If the Kickstart file is valid and contains all required commands, the installation is completely automated.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect-kickstart-syntax"><a class="anchor" href="#sect-kickstart-syntax"></a>Kickstart Syntax Reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="sect-kickstart-commands"><a class="anchor" href="#sect-kickstart-commands"></a>Kickstart Commands and Options</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If an option is followed by an equals mark (<code>=</code>), a value must be specified after it. In the example commands, options in square brackets (<code>[ ]</code>) are optional arguments for the command.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code class="command">auth</code> or <code class="command">authconfig</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Sets up the authentication options for the system using the <code class="command">authconfig</code> command, which can also be run on the command line after the installation finishes. See the <code>authconfig(8)</code> manual page and the <code class="command">authconfig --help</code> command for more details. Passwords are shadowed by default.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When using OpenLDAP with the <code>SSL</code> protocol for security, make sure that the <code>SSLv2</code> and <code>SSLv3</code> protocols are disabled in the server configuration. This is due to the POODLE SSL vulnerability (CVE-2014-3566). See <a href="https://access.redhat.com/solutions/1234843" class="bare">https://access.redhat.com/solutions/1234843</a> for details.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--enablenis</code> - Turns on NIS support. By default, <code class="option">--enablenis</code> uses whatever domain it finds on the network. A domain should almost always be set by hand with the <code class="option">--nisdomain=</code> option.</p>
</li>
<li>
<p><code class="option">--nisdomain=</code> - NIS domain name to use for NIS services.</p>
</li>
<li>
<p><code class="option">--nisserver=</code> - Server to use for NIS services (broadcasts by default).</p>
</li>
<li>
<p><code class="option">--useshadow</code> or <code class="option">--enableshadow</code> - Use shadow passwords.</p>
</li>
<li>
<p><code class="option">--enableldap</code> - Turns on LDAP support in <code>/etc/nsswitch.conf</code>, allowing your system to retrieve information about users (for example, their UIDs, home directories, and shells) from an LDAP directory. To use this option, you must install the <strong class="package">nss-pam-ldapd</strong> package. You must also specify a server and a base <em>DN</em> (distinguished name) with <code class="option">--ldapserver=</code> and <code class="option">--ldapbasedn=</code>.</p>
</li>
<li>
<p><code class="option">--enableldapauth</code> - Use LDAP as an authentication method. This enables the <code>pam_ldap</code> module for authentication and changing passwords, using an LDAP directory. To use this option, you must have the <strong class="package">nss-pam-ldapd</strong> package installed. You must also specify a server and a base DN with <code class="option">--ldapserver=</code> and <code class="option">--ldapbasedn=</code>. If your environment does not use <em>TLS</em> (Transport Layer Security), use the <code class="option">--disableldaptls</code> switch to ensure that the resulting configuration file works.</p>
</li>
<li>
<p><code class="option">--ldapserver=</code> - If you specified either <code class="option">--enableldap</code> or <code class="option">--enableldapauth</code>, use this option to specify the name of the LDAP server to use. This option is set in the <code>/etc/ldap.conf</code> file.</p>
</li>
<li>
<p><code class="option">--ldapbasedn=</code> - If you specified either <code class="option">--enableldap</code> or <code class="option">--enableldapauth</code>, use this option to specify the DN in your LDAP directory tree under which user information is stored. This option is set in the <code>/etc/ldap.conf</code> file.</p>
</li>
<li>
<p><code class="option">--enableldaptls</code> - Use TLS (Transport Layer Security) lookups. This option allows LDAP to send encrypted user names and passwords to an LDAP server before authentication.</p>
</li>
<li>
<p><code class="option">--disableldaptls</code> - Do not use TLS (Transport Layer Security) lookups in an environment that uses LDAP for authentication.</p>
</li>
<li>
<p><code class="option">--enablekrb5</code> - Use Kerberos 5 for authenticating users. Kerberos itself does not know about home directories, UIDs, or shells. If you enable Kerberos, you must make users' accounts known to this workstation by enabling LDAP, NIS, or Hesiod or by using the <code class="command">useradd</code> command. If you use this option, you must have the <strong class="package">pam_krb5</strong> package installed.</p>
</li>
<li>
<p><code class="option">--krb5realm=</code> - The Kerberos 5 realm to which your workstation belongs.</p>
</li>
<li>
<p><code class="option">--krb5kdc=</code> - The KDC (or KDCs) that serve requests for the realm. If you have multiple KDCs in your realm, use a comma-separated list without spaces.</p>
</li>
<li>
<p><code class="option">--krb5adminserver=</code> - The KDC in your realm that is also running kadmind. This server handles password changing and other administrative requests. This server must be run on the master KDC if you have more than one KDC.</p>
</li>
<li>
<p><code class="option">--enablehesiod</code> - Enables Hesiod support for looking up user home directories, UIDs, and shells. More information on setting up and using Hesiod on your network is in <code>/usr/share/doc/glibc-2.x.x/README.hesiod</code>, which is included in the <strong class="package">glibc</strong> package. Hesiod is an extension of DNS that uses DNS records to store information about users, groups, and various other items.</p>
</li>
<li>
<p><code class="option">--hesiodlhs</code> and <code class="option">--hesiodrhs</code> - The <code>Hesiod</code> LHS (left-hand side) and RHS (right-hand side) values, set in <code>/etc/hesiod.conf</code>. The <code>Hesiod</code> library uses these values to search DNS for a name, similar to the way that <code>LDAP</code> uses a base DN.</p>
<div class="paragraph">
<p>To look up user information for the user name <code>jim</code>, the Hesiod library looks up <code>jim.passwd<em>LHS</em><em>RHS</em></code>, which should resolve to a TXT record that contains a string identical to an entry for that user in the <code>passwd</code> file: <code>jim:*:1001:1001:Jungle Jim:/home/jim:/bin/bash</code>. To look up groups, the Hesiod library looks up <code>jim.group<em>LHS</em><em>RHS</em></code> instead.</p>
</div>
<div class="paragraph">
<p>To look up users and groups by number, make <code>1001.uid</code> a CNAME for <code>jim.passwd</code>, and <code>1001.gid</code> a CNAME for <code>jim.group</code>. Note that the library does not place a period (<code>.</code>) in front of the LHS and RHS values when performing a search. Therefore, if the LHS and RHS values need to have a period placed in front of them, you must include the period in the values you set for <code class="option">--hesiodlhs</code> and <code class="option">--hesiodrhs</code>.</p>
</div>
</li>
<li>
<p><code class="option">--enablesmbauth</code> - Enables authentication of users against an SMB server (typically a Samba or Windows server). SMB authentication support does not know about home directories, UIDs, or shells. If you enable SMB, you must make users' accounts known to theworkstation by enabling LDAP, NIS, or Hesiod or by using the <code class="command">useradd</code> command.</p>
</li>
<li>
<p><code class="option">--smbservers=</code> - The name of the servers to use for SMB authentication. To specify more than one server, separate the names with commas (<code>,</code>).</p>
</li>
<li>
<p><code class="option">--smbworkgroup=</code> - The name of the workgroup for the SMB servers.</p>
</li>
<li>
<p><code class="option">--enablecache</code> - Enables the <code>nscd</code> service. The <code>nscd</code> service caches information about users, groups, and various other types of information. Caching is especially helpful if you choose to distribute information about users and groups over your network using <code>NIS</code>, <code>LDAP</code>, or <code>Hesiod</code>.</p>
</li>
<li>
<p><code class="option">--passalgo=</code> - Specify <code class="option">sha256</code> to set up the SHA-256 hashing algorithm or <code class="option">sha512</code> to set up the SHA-512 hashing algorithm.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">autopart</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Automatically creates partitions: a root (<code>/</code>) partition (1 GB or larger), a <code>swap</code> partition, and an appropriate <code>/boot</code> partition for the architecture. On large enough drives (50&#160;GB and larger), this also creates a <code>/home</code> partition.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code class="command">autopart</code> option cannot be used together with the <code class="command">part/partition</code>, <code class="command">raid</code>, <code class="command">logvol</code>, or <code class="command">volgroup</code> options in the same Kickstart file.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--type=</code> - Selects one of the predefined automatic partitioning schemes you want to use. Accepts the following values:</p>
<div class="ulist">
<ul>
<li>
<p><code>lvm</code>: The LVM partitioning scheme.</p>
</li>
<li>
<p><code>btrfs</code>: The Btrfs partitioning scheme.</p>
</li>
<li>
<p><code>plain</code>: Regular partitions with no LVM or Btrfs.</p>
</li>
<li>
<p><code>thinp</code>: The LVM Thin Provisioning partitioning scheme.</p>
<div class="paragraph">
<p>For a description of the available partition schemes, see <a href="../CustomSpoke-x86/#sect-file-system-types-x86" class="page">File System Types (x86)</a>.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code class="option">--fstype=</code> - Selects one of the available file system types. The available values are <code>ext2</code>, <code>ext3</code>, <code>ext4</code>, <code>xfs</code>, and <code>vfat</code>. The default file system is <code>xfs</code>. For information about these file systems, see <a href="../CustomSpoke-x86/#sect-file-system-types-x86" class="page">File System Types (x86)</a>.</p>
</li>
<li>
<p><code class="option">--nohome</code> - Disables automatic creation of the <code>/home</code> partition.</p>
</li>
<li>
<p><code class="option">--nolvm</code> - Do not use LVM or Btrfs for automatic partitioning. This option is equal to <code class="option">--type=plain</code>.</p>
</li>
<li>
<p><code class="option">--encrypted</code> - Encrypts all partitions. This is equivalent to checking the <code>Encrypt partitions</code> check box on the initial partitioning screen during a manual graphical installation.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When encrypting one or more partitions, <strong class="application">Anaconda</strong> attempts to gather 256 bits of entropy to ensure the partitions are encrypted securely. Gathering entropy can take some time - the process will stop after a maximum of 10 minutes, regardless of whether sufficient entropy has been gathered.</p>
</div>
<div class="paragraph">
<p>The process can be sped up by interacting with the installation system (typing on the keyboard or moving the mouse). If you are installing in a virtual machine, you can also attach a virtio-rng device (a virtual random number generator) to the guest as described in the <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Virtualization_Deployment_and_Administration_Guide/sect-Guest_virtual_machine_device_configuration-Random_number_generator_device.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Virtualization Deployment and Administration Guide</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--passphrase=</code> - Provides a default system-wide passphrase for all encrypted devices.</p>
</li>
<li>
<p><code class="option">--escrowcert=<em>URL_of_X.509_certificate</em></code> - Stores data encryption keys of all encrypted volumes as files in <code>/root</code>, encrypted using the X.509 certificate from the URL specified with <em>URL_of_X.509_certificate</em>. The keys are stored as a separate file for each encrypted volume. This option is only meaningful if <code class="option">--encrypted</code> is specified.</p>
</li>
<li>
<p><code class="option">--backuppassphrase</code> - Adds a randomly-generated passphrase to each encrypted volume. Store these passphrases in separate files in <code>/root</code>, encrypted using the X.509 certificate specified with <code class="option">--escrowcert</code>. This option is only meaningful if <code class="option">--escrowcert</code> is specified.</p>
</li>
<li>
<p><code class="option">--cipher=</code> - Specifies the type of encryption to use if the <strong class="application">Anaconda</strong> default <code>aes-xts-plain64</code> is not satisfactory. You must use this option together with the <code class="option">--encrypted</code> option; by itself it has no effect. Available types of encryption are listed in the <a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/index.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Security Guide</a>, but CentOS strongly recommends using either <code>aes-xts-plain64</code> or <code>aes-cbc-essiv:sha256</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is recommended to use the <code class="option">autopart --nohome</code> Kickstart option when installing on a single FBA DASD of the CMS type. This ensures that the installer does not create a separate <code>/home</code> partition. The installation then proceeds successfully.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">autostep</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Normally, Kickstart installations skip unnecessary screens. This option makes the installation program step through every screen, displaying each briefly. This option should not be used when deploying a system because it can disrupt package installation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--autoscreenshot</code> - Take a screenshot at every step during installation. These screenshots are stored in <code>/tmp/anaconda-screenshots/</code> during the installation, and after the installation finishes you can find them in <code>/root/anaconda-screenshots</code>.</p>
<div class="paragraph">
<p>Each screen is only captured right before the installer switches to the next one. This is important, because if you do not use all required Kickstart options and the installation therefore does not begin automatically, you can go to the screens which were not automatically configured, perform any configuration you want. Then, when you click <code>Done</code> to continue, the screen is captured including the configuration you just provided.</p>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">bootloader</code> (required)</dt>
<dd>
<div class="paragraph">
<p>Specifies how the boot loader should be installed.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>CentOS recommends setting up a boot loader password on every system. An unprotected boot loader can allow a potential attacker to modify the system&#8217;s boot options and gain unauthorized access to the system.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Device names in the <code>sd<em>X</em></code> (or <code>/dev/sd<em>X</em></code>) format are not guaranteed to be consistent across reboots, which can complicate usage of some Kickstart commands. When a command calls for a device node name, you can instead use any item from <code>/dev/disk</code>. For example, instead of:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">part / --fstype=xfs --onpart=sda1</code></pre>
</div>
</div>
<div class="paragraph">
<p>You could use an entry similar to one of the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">part / --fstype=xfs --onpart=/dev/disk/by-path/pci-0000:00:05.0-scsi-0:0:0:0-part1</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>part / --fstype=xfs --onpart=/dev/disk/by-id/ata-ST3160815AS_6RA0C882-part1</pre>
</div>
</div>
<div class="paragraph">
<p>This way the command will always target the same storage device. This is especially useful in large storage environments. See the chapter about persistent storage device naming in the <em class="citetitle"><a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Storage_Administration_Guide/persistent_naming.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Storage Administration Guide</a></em> for more in-depth information about different ways to consistently refer to storage devices.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In some cases, a special partition is required to install the boot loader on 64-bit AMD, Intel, and ARM systems. The type and size of this partition depends on whether the disk you are installing the boot loader to uses the <em>Master Boot Record</em> (MBR) or a <em>GUID Partition Table</em> (GPT) schema. For more information, see <a href="../StorageSpoke-x86/#sect-bootloader-x86" class="page">Boot Loader Installation (x86)</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--append=</code> - Specifies additional kernel parameters. To specify multiple parameters, separate them with spaces. For example:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">bootloader --location=mbr --append="hdd=ide-scsi ide=nodma"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="option">rhgb</code> and <code class="option">quiet</code> parameters are always used, even if you do not specify them here or do not use the <code class="option">--append=</code> command at all.</p>
</div>
<div class="paragraph">
<p>This option is useful for disabling mechanisms which were implemented to mitigate the Meltdown and Spectre speculative execution vulnerabilities found in most modern processors (CVE-2017-5754, CVE-2017-5753, and CVE-2017-5715). In some cases, these mechanisms may be unnecessary, and keeping them enabled causes decreased performance with no improvement in security. To disable these mechanisms, add the options to do so into your Kickstart file - for example, <code class="command">bootloader --append="nopti noibrs noibpb"</code> on AMD64/Intel 64 systems.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Ensure your system is not at risk of attack before disabling any of the vulnerability mitigation mechanisms. See the <a href="https://access.redhat.com/security/vulnerabilities/speculativeexecution">Red Hat vulnerability response article</a> for information about the Meltdown and Spectre vulnerabilities.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--boot-drive=</code> - Specifies which drive the boot loader should be written to, and therefore which drive the computer will boot from. If you use a multipath device as the boot drive, specify only one member of the device.</p>
</li>
<li>
<p><code class="option">--leavebootorder</code> - The installer will add CentOS&#160;7.6.1810 to the top of the list of installed systems in the boot loader, and preserve all existing entries as well as their order.</p>
</li>
<li>
<p><code class="option">--driveorder=</code> - Specifies which drive is first in the BIOS boot order. For example:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">bootloader --driveorder=sda,hda</code></pre>
</div>
</div>
</li>
<li>
<p><code class="option">--location=</code> - Specifies where the boot record is written. Valid values are the following:</p>
<div class="ulist">
<ul>
<li>
<p><code>mbr</code> - The default option. Depends on whether the drive uses the Master Boot Record (MBR) or GUID Partition Table (GPT) scheme:</p>
<div class="ulist">
<ul>
<li>
<p>On a GPT-formatted disk, this option installs stage 1.5 of the boot loader into the BIOS boot partition.</p>
</li>
<li>
<p>On an MBR-formatted disk, stage 1.5 is installed into the empty space between the MBR and the first partition.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>partition</code> - Install the boot loader on the first sector of the partition containing the kernel.</p>
</li>
<li>
<p><code>none</code> - Do not install the boot loader.</p>
<div class="paragraph">
<p>In most cases, this option does not need to be specified.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code class="option">--password=</code> - If using <strong class="application">GRUB2</strong>, sets the boot loader password to the one specified with this option. This should be used to restrict access to the <strong class="application">GRUB2</strong> shell, where arbitrary kernel options can be passed.</p>
<div class="paragraph">
<p>If a password is specified, <strong class="application">GRUB2</strong> also asks for a user name. The user name is always <code>root</code>.</p>
</div>
</li>
<li>
<p><code class="option">--iscrypted</code> - Normally, when you specify a boot loader password using the <code class="option">--password=</code> option, it is stored in the Kickstart file in plain text. If you want to encrypt the password, use this option and an encrypted password.</p>
<div class="paragraph">
<p>To generate an encrypted password, use the <code class="command">grub2-mkpasswd-pbkdf2</code> command, enter the password you want to use, and copy the command&#8217;s output (the hash starting with <code>grub.pbkdf2</code>) into the Kickstart file. An example <code class="command">bootloader</code> Kickstart entry with an encrypted password looks similar to the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">bootloader --iscrypted --password=grub.pbkdf2.sha512.10000.5520C6C9832F3AC3D149AC0B24BE69E2D4FB0DBEEDBD29CA1D30A044DE2645C4C7A291E585D4DC43F8A4D82479F8B95CA4BA4381F8550510B75E8E0BB2938990.C688B6F0EF935701FF9BD1A8EC7FE5BD2333799C98F28420C5CC8F1A2A233DE22C83705BB614EA17F3FDFDF4AC2161CEA3384E56EB38A2E39102F5334C47405E</code></pre>
</div>
</div>
</li>
<li>
<p><code class="option">--timeout=</code> - Specifies the amount of time the boot loader waits before booting the default option (in seconds).</p>
</li>
<li>
<p><code class="option">--default=</code> - Sets the default boot image in the boot loader configuration.</p>
</li>
<li>
<p><code class="option">--extlinux</code> - Use the <strong class="application">extlinux</strong> boot loader instead of <strong class="application">GRUB2</strong>. This option only works on systems supported by <strong class="application">extlinux</strong>.</p>
</li>
<li>
<p><code class="option">--disabled</code> &mdash; This option is a stronger version of <code class="option">--location=none</code>. While <code class="option">--location=none</code> simply disables boot loader installation, <code class="option">--disabled</code> disables boot loader installation and also disables installation of the package containing the boot loader, thus saving space.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">btrfs</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Create a Btrfs volume or subvolume. For a volume, the syntax is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">btrfs <em>mntpoint</em> --data=<em>level</em> --metadata=<em>level</em> --label=<em>label</em> <em>partitions</em></code></pre>
</div>
</div>
<div class="paragraph">
<p>One or more partitions can be specified in <em>partitions</em>. When specifying more than one partitions, the entries must be separated by a single space. See <a href="#exam-kickstart-create-btrfs">Creating Btrfs Volumes and Subvolumes</a> for a demonstration.</p>
</div>
<div class="paragraph">
<p>For a subvolume, the syntax is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">btrfs <em>mntpoint</em> --subvol --name=<em>path</em> <em>parent</em></code></pre>
</div>
</div>
<div class="paragraph">
<p><em>parent</em> should be the identifier of the subvolume&#8217;s parent volume and <em>mntpoint</em> is the location where the file system is mounted.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--data=</code> - RAID level to use for file system data (such as 0, 1, or 10). This parameter is optional, has no meaning for subvolumes, and requires more than one physical disk.</p>
</li>
<li>
<p><code class="option">--metadata=</code> - RAID level to use for file system/volume metadata (such as <code>0</code>, <code>1</code>, or <code>10</code>). Optional. This option has no meaning for subvolumes and requires more than one physical disk.</p>
</li>
<li>
<p><code class="option">--label=</code> - Specify a label for the Btrfs file system. If the given label is already in use by another file system, a new label is created. This option has no meaning for subvolumes.</p>
</li>
<li>
<p><code class="option">--noformat</code> or <code class="option">--useexisting</code> - Use an existing Btrfs volume (or subvolume) and do not reformat the file system.</p>
</li>
<li>
<p><code class="option">--mkfsoptions=</code> - Specifies additional parameters to be passed to the program that makes a filesystem on this partition. No processing is done on the list of arguments, so they must be supplied in a format that can be passed directly to the <strong class="application">mkfs</strong> program. This means multiple options should be comma-separated or surrounded by double quotes, depending on the filesystem.</p>
<div class="paragraph">
<p>The following example shows how to create a Btrfs volume from member partitions on three disks with subvolumes for <code>/</code> and <code>/home</code>. The main volume is not mounted or used directly in this example.</p>
</div>
<div id="exam-kickstart-create-btrfs" class="exampleblock">
<div class="title">Example 1. Creating Btrfs Volumes and Subvolumes</div>
<div class="content">
<div class="literalblock">
<div class="content">
<pre><code class="command">part btrfs.01 --size=6000 --ondisk=sda</code>
<code class="command">part btrfs.02 --size=6000 --ondisk=sdb</code>
<code class="command">part btrfs.03 --size=6000 --ondisk=sdc</code>

<code class="command">btrfs none --data=0 --metadata=1 --label=centos7 btrfs.01 btrfs.02 btrfs.03</code>
<code class="command">btrfs / --subvol --name=root LABEL=centos7</code>
<code class="command">btrfs /home --subvol --name=home centos7</code></pre>
</div>
</div>
</div>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">clearpart</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Removes partitions from the system, prior to creation of new partitions. By default, no partitions are removed.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Device names in the <code>sd<em>X</em></code> (or <code>/dev/sd<em>X</em></code>) format are not guaranteed to be consistent across reboots, which can complicate usage of some Kickstart commands. When a command calls for a device node name, you can instead use any item from <code>/dev/disk</code>. For example, instead of:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">part / --fstype=xfs --onpart=sda1</code></pre>
</div>
</div>
<div class="paragraph">
<p>You could use an entry similar to one of the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">part / --fstype=xfs --onpart=/dev/disk/by-path/pci-0000:00:05.0-scsi-0:0:0:0-part1</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>part / --fstype=xfs --onpart=/dev/disk/by-id/ata-ST3160815AS_6RA0C882-part1</pre>
</div>
</div>
<div class="paragraph">
<p>This way the command will always target the same storage device. This is especially useful in large storage environments. See the chapter about persistent storage device naming in the <em class="citetitle"><a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Storage_Administration_Guide/persistent_naming.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Storage Administration Guide</a></em> for more in-depth information about different ways to consistently refer to storage devices.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the <code class="command">clearpart</code> command is used, then the <code class="command">part --onpart</code> command cannot be used on a logical partition.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For a detailed example of partitioning including the <code class="command">clearpart</code> command, see <a href="#sect-kickstart-partitioning-example">Advanced Partitioning Example</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--all</code> - Erases all partitions from the system.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This option will erase all disks which can be reached by the installer, including any attached network storage. Use this option with caution.</p>
</div>
<div class="paragraph">
<p>You can prevent <code class="command">clearpart</code> from wiping storage you want to preserve by using the <code class="option">--drives=</code> option and specifying only the drives you want to clear, by attaching network storage later (for example, in the <code class="command">%post</code> section of the Kickstart file), or by blacklisting the kernel modules used to access network storage.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--drives=</code> - Specifies which drives to clear partitions from. For example, the following clears all the partitions on the first two drives on the primary IDE controller:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">clearpart --drives=hda,hdb --all</code></pre>
</div>
</div>
<div class="paragraph">
<p>To clear a multipath device, use the format <code>disk/by-id/scsi-<em>WWID</em></code>, where <em>WWID</em> is the <em>world-wide identifier</em> for the device. For example, to clear a disk with WWID <code>58095BEC5510947BE8C0360F604351918</code>, use:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">clearpart --drives=disk/by-id/scsi-58095BEC5510947BE8C0360F604351918</code></pre>
</div>
</div>
<div class="paragraph">
<p>This format is preferable for all multipath devices, but if errors arise, multipath devices that do not use <em>logical volume management</em> (LVM) can also be cleared using the format <code>disk/by-id/dm-uuid-mpath-<em>WWID</em></code>, where <em>WWID</em> is the <em>world-wide identifier</em> for the device. For example, to clear a disk with WWID <code>2416CD96995134CA5D787F00A5AA11017</code>, use:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">clearpart --drives=disk/by-id/dm-uuid-mpath-2416CD96995134CA5D787F00A5AA11017</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Never specify multipath devices by device names like <code>mpatha</code>. Device names such as this are not specific to a particular disk. The disk named <code>/dev/mpatha</code> during installation might not be the one that you expect it to be. Therefore, the <code class="command">clearpart</code> command could target the wrong disk.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--initlabel</code> - Initializes a disk (or disks) by creating a default disk label for all disks in their respective architecture that have been designated for formatting (for example, msdos for x86). Because <code class="option">--initlabel</code> can see all disks, it is important to ensure only those drives that are to be formatted are connected.</p>
<div class="literalblock">
<div class="content">
<pre>clearpart --initlabel --drives=names_of_disks</pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">clearpart --initlabel --drives=dasda,dasdb,dasdc</code></pre>
</div>
</div>
</li>
<li>
<p><code class="option">--list=</code> - Specifies which partitions to clear. This option overrides the <code class="option">--all</code> and <code class="option">--linux</code> options if used. Can be used across different drives. For example:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">clearpart --list=sda2,sda3,sdb1</code></pre>
</div>
</div>
</li>
<li>
<p><code class="option">--linux</code> - Erases all Linux partitions.</p>
</li>
<li>
<p><code class="option">--none</code> (default) - Do not remove any partitions.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Using the <code class="command">clearpart --all</code> command in a Kickstart file to remove all existing partitions during the installation can cause <strong class="application">Anaconda</strong> to pause and prompt you for a confirmation in certain cases. If you need to perform the installation automatically with no interaction, add the <code class="command">zerombr</code> command to your Kickstart file.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">cmdline</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Perform the installation in a completely non-interactive command line mode. Any prompt for interaction halts the installation.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For a fully automatic installation, you must either specify one of the available modes (<code class="command">graphical</code>, <code class="command">text</code>, or <code class="command">cmdline</code>) in the Kickstart file, or you must use the <code class="option">console=</code> boot option as described in <a href="../adminoptions/#list-boot-options-display" class="page">Console, Environment and Display Options</a>. If no mode is specified, the system will prompt you to choose one before continuing.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><code class="command">device</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>On most PCI systems, the installation program automatically detects Ethernet and SCSI cards. However, on older systems and some PCI systems, Kickstart requires a hint to find the proper devices. The <code class="command">device</code> command, which tells the installation program to install extra modules, uses the following format:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">device <em>moduleName</em> --opts=<em>options</em></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>moduleName</em> - Replace with the name of the kernel module which should be installed.</p>
</li>
<li>
<p><code class="option">--opts=</code> - Options to pass to the kernel module. For example:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">device --opts="aic152x=0x340 io=11"</code></pre>
</div>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">driverdisk</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Driver disks can be used during Kickstart installations to provide additional drivers not included by default. You must copy the driver disks&#8217;s contents to the root directory of a partition on the system&#8217;s hard drive. Then, you must use the <code class="command">driverdisk</code> command to specify that the installation program should look for a driver disk and its location.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">driverdisk [<em>partition</em>|--source=<em>url</em>|--biospart=<em>biospart</em>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, a network location can be specified for the driver disk:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">driverdisk --source=ftp://path/to/dd.img</code>
<code class="command">driverdisk --source=http://path/to/dd.img</code>
<code class="command">driverdisk --source=nfs:host:/path/to/img</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>partition</em> - Partition containing the driver disk. Note that the partition must be specified as a full path (for example, <code>/dev/sdb1</code>), <em>not</em> just the partition name (for example, <code>sdb1</code>).</p>
</li>
<li>
<p><code class="option">--source=</code> - URL for the driver disk. NFS locations can be given in the form of <code>nfs:<em>host</em>:/<em>path/to/img</em></code>.</p>
</li>
<li>
<p><code class="option">--biospart=</code> - BIOS partition containing the driver disk (for example, <code>82p2</code>).</p>
<div class="paragraph">
<p>Driver disks can also be loaded from a hard disk drive or a similar device instead of being loaded over the network or from <code>initrd</code>. Follow this procedure:</p>
</div>
<div id="loading-driver-disk-from-HDD" class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Load the driver disk on a hard disk drive, a USB or any similar device.</p>
</li>
<li>
<p>Set the label, for example, <em>DD</em>, to this device.</p>
</li>
<li>
<p>Add the following line to your Kickstart file:</p>
<div class="literalblock">
<div class="content">
<pre>driverdisk <em>LABEL</em>=<em>DD</em>:/e1000.rpm</pre>
</div>
</div>
<div class="paragraph">
<p>Replace <em>DD</em> with a specific label and replace <em>dd.rpm</em> with a specific name. Use anything supported by the <code class="command">inst.repo</code> command instead of <em>LABEL</em> to specify your hard disk drive.</p>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">eula</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Use this option to accept the <em>End User License Agreement</em> (EULA) without user interaction. Specifying this option prevents <strong class="application">Initial Setup</strong> from prompting you to accept the license agreement after you finish the installation and reboot the system for the first time. See <a href="../InitialSetupHub-common/#chap-initial-setup" class="page">Initial Setup</a> for more information.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--agreed</code> (required) - Accept the EULA. This option must always be used, otherwise the <code class="command">eula</code> command is meaningless.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">fcoe</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Specify which FCoE devices should be activated automatically in addition to those discovered by <em>Enhanced Disk Drive Services</em> (EDD).</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">fcoe --nic=<em>name</em> [<em>options</em>]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--nic=</code> (required) - The name of the device to be activated.</p>
</li>
<li>
<p><code class="option">--dcb=</code> - Establish <em>Data Center Bridging</em> (DCB) settings.</p>
</li>
<li>
<p><code class="option">--autovlan</code> - Discover VLANs automatically.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">firewall</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Specify the firewall configuration for the installed system.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">firewall --enabled|--disabled <em>device</em> [<em>options</em>]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--enabled</code> or <code class="option">--enable</code> - Reject incoming connections that are not in response to outbound requests, such as DNS replies or DHCP requests. If access to services running on this machine is needed, you can choose to allow specific services through the firewall.</p>
</li>
<li>
<p><code class="option">--disabled</code> or <code class="option">--disable</code> - Do not configure any iptables rules.</p>
</li>
<li>
<p><code class="option">--trust=</code> - Listing a device here, such as em1, allows all traffic coming to and from that device to go through the firewall. To list more than one device, use <code class="option">--trust em1 --trust em2</code>. Do NOT use a comma-separated format such as <code class="option">--trust em1, em2</code>.</p>
</li>
<li>
<p><em>incoming</em> - Replace with one or more of the following to allow the specified services through the firewall.</p>
<div class="ulist">
<ul>
<li>
<p><code class="option">--ssh</code></p>
</li>
<li>
<p><code class="option">--smtp</code></p>
</li>
<li>
<p><code class="option">--http</code></p>
</li>
<li>
<p><code class="option">--ftp</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code class="option">--port=</code> - You can specify that ports be allowed through the firewall using the port:protocol format. For example, to allow IMAP access through your firewall, specify <code>imap:tcp</code>. Numeric ports can also be specified explicitly; for example, to allow UDP packets on port 1234 through, specify <code>1234:udp</code>. To specify multiple ports, separate them by commas.</p>
</li>
<li>
<p><code class="option">--service=</code> - This option provides a higher-level way to allow services through the firewall. Some services (like <code>cups</code>, <code>avahi</code>, and so on.) require multiple ports to be open or other special configuration in order for the service to work. You can specify each individual port with the <code class="option">--port</code> option, or specify <code class="command">--service=</code> and open them all at once.</p>
<div class="paragraph">
<p>Valid options are anything recognized by the <strong class="application">firewall-offline-cmd</strong> program in the <strong class="package">firewalld</strong> package. If <code>firewalld</code> is running, <code class="command">firewall-cmd --get-services</code> provides a list of known service names.</p>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">firstboot</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Determine whether the <strong class="application">Initial Setup</strong> application starts the first time the system is booted. If enabled, the <strong class="package">initial-setup</strong> package must be installed. If not specified, this option is disabled by default.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--enable</code> or <code class="option">--enabled</code> - <strong class="application">Initial Setup</strong> is started the first time the system boots.</p>
</li>
<li>
<p><code class="option">--disable</code> or <code class="option">--disabled</code> - <strong class="application">Initial Setup</strong> is not started the first time the system boots.</p>
</li>
<li>
<p><code class="option">--reconfig</code> - Enable the <strong class="application">Initial Setup</strong> to start at boot time in reconfiguration mode. This mode enables the language, mouse, keyboard, root password, security level, time zone and networking configuration options in addition to the default ones.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">group</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Creates a new user group on the system. If a group with the given name or GID already exists, this command fails. In addition, the <code class="command">user</code> command can be used to create a new group for the newly created user.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">group --name=<em>name</em> [--gid=<em>gid</em>]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--name=</code> - Provides the name of the group.</p>
</li>
<li>
<p><code class="option">--gid=</code> - The group&#8217;s GID. If not provided, defaults to the next available non-system GID.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">graphical</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Perform the installation in graphical mode. This is the default.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For a fully automatic installation, you must either specify one of the available modes (<code class="command">graphical</code>, <code class="command">text</code>, or <code class="command">cmdline</code>) in the Kickstart file, or you must use the <code class="option">console=</code> boot option as described in <a href="../adminoptions/#list-boot-options-display" class="page">Console, Environment and Display Options</a>. If no mode is specified, the system will prompt you to choose one before continuing.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><code class="command">halt</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Halt the system after the installation has successfully completed. This is similar to a manual installation, where <strong class="application">Anaconda</strong> displays a message and waits for the user to press a key before rebooting. During a Kickstart installation, if no completion method is specified, this option is used as the default.</p>
</div>
<div class="paragraph">
<p>The <code class="command">halt</code> command is equivalent to the <code class="command">shutdown -h</code> command.</p>
</div>
<div class="paragraph">
<p>For other completion methods, see the <code class="command">poweroff</code>, <code class="command">reboot</code>, and <code class="command">shutdown</code> commands.</p>
</div>
</dd>
<dt class="hdlist1"><code class="command">ignoredisk</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Causes the installation program to ignore the specified disks. This is useful if you use automatic partitioning and want to be sure that some disks are ignored. For example, without <code class="command">ignoredisk</code>, attempting to deploy on a SAN-cluster the Kickstart would fail, as the installation program detects passive paths to the SAN that return no partition table.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">ignoredisk --drives=<em>drive1,drive2</em>,...</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <em>driveN</em> is one of <code>sda</code>, <code>sdb</code>,&#8230;&#8203;, <code>hda</code>,&#8230;&#8203; and so on.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Device names in the <code>sd<em>X</em></code> (or <code>/dev/sd<em>X</em></code>) format are not guaranteed to be consistent across reboots, which can complicate usage of some Kickstart commands. When a command calls for a device node name, you can instead use any item from <code>/dev/disk</code>. For example, instead of:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">part / --fstype=xfs --onpart=sda1</code></pre>
</div>
</div>
<div class="paragraph">
<p>You could use an entry similar to one of the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">part / --fstype=xfs --onpart=/dev/disk/by-path/pci-0000:00:05.0-scsi-0:0:0:0-part1</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>part / --fstype=xfs --onpart=/dev/disk/by-id/ata-ST3160815AS_6RA0C882-part1</pre>
</div>
</div>
<div class="paragraph">
<p>This way the command will always target the same storage device. This is especially useful in large storage environments. See the chapter about persistent storage device naming in the <em class="citetitle"><a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Storage_Administration_Guide/persistent_naming.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Storage Administration Guide</a></em> for more in-depth information about different ways to consistently refer to storage devices.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To ignore a multipath device that does not use <em>logical volume management</em> (LVM), use the format <code>disk/by-id/dm-uuid-mpath-<em>WWID</em></code>, where <em>WWID</em> is the <em>world-wide identifier</em> for the device. For example, to ignore a disk with WWID <code>2416CD96995134CA5D787F00A5AA11017</code>, use:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">ignoredisk --drives=disk/by-id/dm-uuid-mpath-2416CD96995134CA5D787F00A5AA11017</code></pre>
</div>
</div>
<div class="paragraph">
<p>Multipath devices that use LVM are not assembled until after <strong class="application">Anaconda</strong> has parsed the Kickstart file. Therefore, you cannot specify these devices in the format <code>dm-uuid-mpath</code>. Instead, to ignore a multipath device that uses LVM, use the format <code>disk/by-id/scsi-<em>WWID</em></code>, where <em>WWID</em> is the <em>world-wide identifier</em> for the device. For example, to ignore a disk with WWID <code>58095BEC5510947BE8C0360F604351918</code>, use:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">ignoredisk --drives=disk/by-id/scsi-58095BEC5510947BE8C0360F604351918</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Never specify multipath devices by device names like <code>mpatha</code>. Device names such as this are not specific to a particular disk. The disk named <code>/dev/mpatha</code> during installation might not be the one that you expect it to be. Therefore, the <code class="command">clearpart</code> command could target the wrong disk.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--only-use</code> - Specifies a list of disks for the installation program to use. All other disks are ignored. For example, to use disk <code>sda</code> during installation and ignore all other disks:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">ignoredisk --only-use=sda</code></pre>
</div>
</div>
<div class="paragraph">
<p>To include a multipath device that does not use LVM:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">ignoredisk --only-use=disk/by-id/dm-uuid-mpath-2416CD96995134CA5D787F00A5AA11017</code></pre>
</div>
</div>
<div class="paragraph">
<p>To include a multipath device that uses LVM:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">ignoredisk --only-use=disk/by-id/scsi-58095BEC5510947BE8C0360F604351918</code></pre>
</div>
</div>
</li>
<li>
<p><code class="option">--interactive</code> - Allows you to manually navigate the advanced storage screen.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">install</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>The default installation mode. You must specify the type of installation from <code>cdrom</code>, <code>harddrive</code>, <code>nfs</code>, <code>liveimg</code>, or <code>url</code> (for FTP, HTTP, or HTTPS installations). The <code class="command">install</code> command and the installation method command must be on separate lines. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">install</code>
<code class="command">liveimg --url=file:///images/install/squashfs.img --noverifyssl</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="command">cdrom</code> - Install from the first optical drive on the system.</p>
</li>
<li>
<p><code class="command">harddrive</code> - Install from a CentOS installation tree or full installation ISO image on a local drive. The drive must contain a file system the installation program can mount: <code>ext2</code>, <code>ext3</code>, <code>ext4</code>, <code>vfat</code>, or <code>xfs</code>.</p>
<div class="ulist">
<ul>
<li>
<p><code class="option">--biospart=</code> - BIOS partition to install from (such as <code>82</code>).</p>
</li>
<li>
<p><code class="option">--partition=</code> - Partition to install from (such as <code>sdb2</code>).</p>
</li>
<li>
<p><code class="option">--dir=</code> - Directory containing the <code><em>variant</em></code> directory of the installation tree, or the ISO image of the full installation DVD.</p>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">harddrive --partition=hdb2 --dir=/tmp/install-tree</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code class="command">liveimg</code> - Install from a disk image instead of packages. The image can be the <code>squashfs.img</code> file from a live ISO image, a compressed tar file (<code>.tar</code>, <code>.tbz</code>, <code>.tgz</code>, <code>.txz</code>, <code>.tar.bz2</code>, <code>.tar.gz</code>, or <code>.tar.xz</code>.), or any file system that the installation media can mount. Supported file systems are <code>ext2</code>, <code>ext3</code>, <code>ext4</code>, <code>vfat</code>, and <code>xfs</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When using the <code>liveimg</code> installation mode with a driver disk, drivers on the disk will not automatically be included in the installed system. If necessary, these drivers should be installed manually, or in the <code>%post</code> section of a kickstart script.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--url=</code> - The location to install from. Supported protocols are <code>HTTP</code>, <code>HTTPS</code>, <code>FTP</code>, and <code>file</code>.</p>
</li>
<li>
<p><code class="option">--proxy=</code> - Specify an <code>HTTP</code>, <code>HTTPS</code> or <code>FTP</code> proxy to use while performing the installation.</p>
</li>
<li>
<p><code class="option">--checksum=</code> - An optional argument with the <code>SHA256</code> checksum of the image file, used for verification.</p>
</li>
<li>
<p><code class="option">--noverifyssl</code> - Disable SSL verification when connecting to an <code>HTTPS</code> server.</p>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">liveimg --url=file:///images/install/squashfs.img --checksum=03825f567f17705100de3308a20354b4d81ac9d8bed4bb4692b2381045e56197 --noverifyssl</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code class="command">nfs</code> - Install from the NFS server specified.</p>
<div class="ulist">
<ul>
<li>
<p><code class="option">--server=</code> - Server from which to install (host name or IP).</p>
</li>
<li>
<p><code class="option">--dir=</code> - Directory containing the <code><em>variant</em></code> directory of the installation tree.</p>
</li>
<li>
<p><code class="option">--opts=</code> - Mount options to use for mounting the NFS export. (optional)</p>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">nfs --server=nfsserver.example.com --dir=/tmp/install-tree</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code class="command">url</code> - Install from an installation tree on a remote server using FTP, HTTP, or HTTPS.</p>
<div class="ulist">
<ul>
<li>
<p><code class="option">--url=</code> - The location to install from. Supported protocols are <code>HTTP</code>, <code>HTTPS</code>, <code>FTP</code>, and <code>file</code>.</p>
</li>
<li>
<p><code class="option">--mirrorlist=</code> - The mirror URL to install from.</p>
</li>
<li>
<p><code class="option">--proxy=</code> - Specify an <code>HTTP</code>, <code>HTTPS</code> or <code>FTP</code> proxy to use while performing the installation.</p>
</li>
<li>
<p><code class="option">--noverifyssl</code> - Disable SSL verification when connecting to an <code>HTTPS</code> server.</p>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">url --url <a href="http://" class="bare">http://</a><em>server</em>/<em>path</em></code></pre>
</div>
</div>
<div class="paragraph">
<p>or:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">url --url <a href="ftp://" class="bare">ftp://</a><em>username</em>:<em>password</em>@<em>server</em>/<em>path</em></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">iscsi</code> (optional)</dt>
<dd>
<div class="literalblock">
<div class="content">
<pre><code class="command">iscsi --ipaddr=<em>address</em> [<em>options</em>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Specifies additional iSCSI storage to be attached during installation. If you use the <code class="command">iscsi</code> command, you must also assign a name to the iSCSI node, using the <code class="command">iscsiname</code> command. The <code class="command">iscsiname</code> command must appear before the <code class="command">iscsi</code> command in the Kickstart file.</p>
</div>
<div class="paragraph">
<p>We recommend that wherever possible you configure iSCSI storage in the system BIOS or firmware (iBFT for Intel systems) rather than use the <code class="command">iscsi</code> command. <strong class="application">Anaconda</strong> automatically detects and uses disks configured in BIOS or firmware and no special configuration is necessary in the Kickstart file.</p>
</div>
<div class="paragraph">
<p>If you must use the <code class="command">iscsi</code> command, ensure that networking is activated at the beginning of the installation, and that the <code class="command">iscsi</code> command appears in the Kickstart file <em>before</em> you refer to iSCSI disks with commands such as <code class="command">clearpart</code> or <code class="command">ignoredisk</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--ipaddr=</code> (required) - the IP address of the target to connect to.</p>
</li>
<li>
<p><code class="option">--port=</code> (required) - the port number (typically, <code class="option">--port=3260</code>)</p>
</li>
<li>
<p><code class="option">--target=</code> - the target <em>IQN</em> (iSCSI Qualified Name).</p>
</li>
<li>
<p><code class="option">--iface=</code> - bind the connection to a specific network interface instead of using the default one determined by the network layer. Once used, it must be specified in all instances of the <code class="command">iscsi</code> command in the entire Kickstart file.</p>
</li>
<li>
<p><code class="option">--user=</code> - the user name required to authenticate with the target</p>
</li>
<li>
<p><code class="option">--password=</code> - the password that corresponds with the user name specified for the target</p>
</li>
<li>
<p><code class="option">--reverse-user=</code> - the user name required to authenticate with the initiator from a target that uses reverse CHAP authentication</p>
</li>
<li>
<p><code class="option">--reverse-password=</code> - the password that corresponds with the user name specified for the initiator</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">iscsiname</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Assigns a name to an iSCSI node specified by the iscsi parameter. If you use the <code>iscsi</code> parameter in your Kickstart file, you must specify <code class="command">iscsiname</code> <em>earlier</em> in the Kickstart file.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">iscsiname</code> <em>iqn</em></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code class="command">%addon com_redhat_kdump</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>This command configures the <strong class="application">kdump</strong> kernel crash dumping mechanism.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The syntax for this command is unusual because it is an add-on rather than a built-in Kickstart command. For more information about add-ons, see <a href="#sect-kickstart-addon">Kickstart Add-ons</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong class="application">Kdump</strong> is a kernel crash dumping mechanism that allows you to save the contents of the system&#8217;s memory for later analysis. It relies on <strong class="application">kexec</strong>, which can be used to boot a Linux kernel from the context of another kernel without rebooting the system, and preserve the contents of the first kernel&#8217;s memory that would otherwise be lost.</p>
</div>
<div class="paragraph">
<p>In case of a system crash, <strong class="application">kexec</strong> boots into a second kernel (a <em>capture kernel</em>). This capture kernel resides in a reserved part of the system memory that is inaccessible to the first kernel. <strong class="application">Kdump</strong> then captures the contents of the crashed kernel&#8217;s memory (a <em>crash dump</em>) and saves it to a specified location. The location cannot be configured using this Kickstart command; it must be configured after the installation by editing the <code>/etc/kdump.conf</code> configuration file.</p>
</div>
<div class="paragraph">
<p>For more information about <strong class="application">Kdump</strong>, see the <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Kernel_Crash_Dump_Guide/index.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Kernel Crash Dump Guide</a>.</p>
</div>
<div class="paragraph">
<p>Available options are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--enable</code> - Enable kdump on the installed system.</p>
</li>
<li>
<p><code class="option">--disable</code> - Disable kdump on the installed system.</p>
</li>
<li>
<p><code class="option">--reserve-mb=</code> - The amount of memory you want to reserve for kdump, in MiB. For example:</p>
<div class="literalblock">
<div class="content">
<pre>%addon com_redhat_kdump --enable --reserve-mb=128
%end</pre>
</div>
</div>
<div class="paragraph">
<p>You can also specify <code>auto</code> instead of a numeric value. In that case, the installer will determine the amount of memory automatically based on the criteria described in the <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Kernel_Crash_Dump_Guide/appe-supported-kdump-configurations-and-targets.html#sect-kdump-memory-requirements">Red&#160;Hat Enterprise&#160;Linux&#160;7 Kernel Crash Dump Guide</a>.</p>
</div>
<div class="paragraph">
<p>If you enable <strong class="application">kdump</strong> and do not specify a <code class="option">--reserve-mb=</code> option, the value <code>auto</code> will be used.</p>
</div>
</li>
<li>
<p><code class="option">--enablefadump</code> - Enable firmware-assisted dumping on systems which allow it (notably, IBM Power&#160;Systems servers).</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">keyboard</code> (required)</dt>
<dd>
<div class="paragraph">
<p>Sets one or more available keyboard layouts for the system.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--vckeymap=</code> - Specify a <code>VConsole</code> keymap which should be used. Valid names correspond to the list of files in the <code>/usr/lib/kbd/keymaps/</code> directory, without the <code>.map.gz</code> extension.</p>
</li>
<li>
<p><code class="option">--xlayouts=</code> - Specify a list of <strong class="application">X</strong> layouts that should be used as a comma-separated list without spaces. Accepts values in the same format as <code>setxkbmap(1)</code>, either in the <code><em>layout</em></code> format (such as <code>cz</code>), or in the <code><em>layout</em> (<em>variant</em>)</code> format (such as <code>cz (qwerty)</code>).</p>
<div class="paragraph">
<p>All available layouts can be viewed on the <code>xkeyboard-config(7)</code> man page under <code>Layouts</code>.</p>
</div>
</li>
<li>
<p><code class="option">--switch=</code> - Specify a list of layout-switching options (shortcuts for switching between multiple keyboard layouts). Multiple options must be separated by commas without spaces. Accepts values in the same format as <code>setxkbmap(1)</code>.</p>
<div class="paragraph">
<p>Available switching options can be viewed on the <code>xkeyboard-config(7)</code> man page under <code>Options</code>.</p>
</div>
<div class="paragraph">
<p>The following example sets up two keyboard layouts (<code>English (US)</code> and <code>Czech (qwerty)</code>) using the <code class="option">--xlayouts=</code> option, and allows to switch between them using <span class="keyseq"><kbd>Alt</kbd>+<kbd>Shift</kbd></span>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>keyboard --xlayouts=us,'cz (qwerty)' --switch=grp:alt_shift_toggle</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Either the <code class="option">--vckeymap=</code> or the <code class="option">--xlayouts=</code> option must be used.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">lang</code> (required)</dt>
<dd>
<div class="paragraph">
<p>Sets the language to use during installation and the default language to use on the installed system. For example, to set the language to English, the Kickstart file should contain the following line:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>lang en_US</pre>
</div>
</div>
<div class="paragraph">
<p>The file <code>/usr/share/system-config-language/locale-list</code> provides a list of the valid language codes in the first column of each line and is part of the <strong class="package">system-config-language</strong> package.</p>
</div>
<div class="paragraph">
<p>Certain languages (for example, Chinese, Japanese, Korean, and Indic languages) are not supported during text-mode installation. If you specify one of these languages with the <code class="command">lang</code> command, the installation process continues in English, but the installed system uses your selection as its default language.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--addsupport=</code> - Add support for additional languages. Takes the form of comma-separated list without spaces. For example:</p>
<div class="literalblock">
<div class="content">
<pre>lang en_US --addsupport=cs_CZ,de_DE,en_UK</pre>
</div>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">logging</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Controls the error logging of <strong class="application">Anaconda</strong> during installation. It has no effect on the installed system.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">logging [--host=<em>host</em>] [--port=<em>port</em>] [--level=debug|info|error|critical]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--host=</code> - Send logging information to the given remote host, which must be running a syslogd process configured to accept remote logging.</p>
</li>
<li>
<p><code class="option">--port=</code> - If the remote syslogd process uses a port other than the default, set it using this option.</p>
</li>
<li>
<p><code class="option">--level=</code> - Specify the minimum level of messages that appear on tty3. All messages are still sent to the log file regardless of this level, however. Possible values are <code>debug</code>, <code>info</code>, <code>warning</code>, <code>error</code>, or <code>critical</code>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">logvol</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Create a logical volume for Logical Volume Management (LVM). For more information regarding LVM, see the <a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Logical_Volume_Manager_Administration/index.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Logical Volume Manager Administration</a> guide. This command uses the following syntax:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">logvol <em>mntpoint</em> --vgname=<em>name</em> --name=<em>name</em> [<em>options</em>]</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not use the dash (<code>-</code>) character in logical volume and volume group names when installing CentOS using Kickstart. If this character is used, the installation finishes normally, but the <code>/dev/mapper/</code> directory will list these volumes and volume groups with every dash doubled. For example, a volume group named <code>volgrp-01</code> containing a logical volume named <code>logvol-01</code> will be listed as <code>/dev/mapper/volgrp&#8212;&#8203;01-logvol&#8212;&#8203;01</code>.</p>
</div>
<div class="paragraph">
<p>This limitation only applies to newly created logical volume and volume group names. If you are reusing existing ones using the <code class="option">--noformat</code> option, their names will not be changed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For a detailed example of <code class="command">logvol</code> in action, see <a href="#sect-kickstart-partitioning-example">Advanced Partitioning Example</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <em>mntpoint</em> is where the partition is mounted and must be of one of the following forms:</p>
<div class="ulist">
<ul>
<li>
<p><code>/<em>path</em></code></p>
<div class="paragraph">
<p>For example, <code>/</code> or <code>/home</code></p>
</div>
</li>
<li>
<p><code>swap</code></p>
<div class="paragraph">
<p>The partition is used as swap space.</p>
</div>
<div class="paragraph">
<p>To determine the size of the swap partition automatically, use the <code class="option">--recommended</code> option:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code>swap --recommended</code></pre>
</div>
</div>
<div class="paragraph">
<p>To determine the size of the swap partition automatically and also allow extra space for your system to hibernate, use the <code class="option">--hibernation</code> option:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code>swap --hibernation</code></pre>
</div>
</div>
<div class="paragraph">
<p>The size assigned will be equivalent to the swap space assigned by <code class="option">--recommended</code> plus the amount of RAM on your system.</p>
</div>
<div class="paragraph">
<p>For the swap sizes assigned by these commands, see <a href="../CustomSpoke-x86/#sect-recommended-partitioning-scheme-x86" class="page">Recommended Partitioning Scheme (x86)</a> for 64-bit AMD, Intel, and ARM systems, and <a href="../CustomSpoke-ppc64/#sect-recommended-partitioning-scheme-ppc" class="page">Recommended Partitioning Scheme (ppc)</a> for IBM Power&#160;Systems servers.</p>
</div>
<div class="paragraph">
<p>The options are as follows:</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code class="option">--noformat</code> - Use an existing logical volume and do not format it.</p>
</li>
<li>
<p><code class="option">--useexisting</code> - Use an existing logical volume and reformat it.</p>
</li>
<li>
<p><code class="option">--fstype=</code> - Sets the file system type for the logical volume. Valid values are <code>xfs</code>, <code>ext2</code>, <code>ext3</code>, <code>ext4</code>, <code>swap</code>, and <code>vfat</code>.</p>
</li>
<li>
<p><code class="option">--fsoptions=</code> - Specifies a free form string of options to be used when mounting the filesystem. This string will be copied into the <code>/etc/fstab</code> file of the installed system and should be enclosed in quotes.</p>
</li>
<li>
<p><code class="option">--mkfsoptions=</code> - Specifies additional parameters to be passed to the program that makes a filesystem on this partition. No processing is done on the list of arguments, so they must be supplied in a format that can be passed directly to the <strong class="application">mkfs</strong> program. This means multiple options should be comma-separated or surrounded by double quotes, depending on the filesystem.</p>
</li>
<li>
<p><code class="option">--label=</code> - Sets a label for the logical volume.</p>
</li>
<li>
<p><code class="option">--grow</code> - Tells the logical volume to grow to fill available space (if any), or up to the maximum size setting, if one is specified. A minimum size must be given, using either the <code class="option">--percent=</code> option or the <code class="option">--size=</code> option.</p>
</li>
<li>
<p><code class="option">--size=</code> - The size of the logical volume in MiB. This option cannot be used together with the <code class="option">--percent=</code> option.</p>
</li>
<li>
<p><code class="option">--percent=</code> - The size of the logical volume, as a percentage of the free space in the volume group after any statically-sized logical volumes are taken into account. This option cannot be used together with the <code class="option">--size=</code> option.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When creating a new logical volume, you must either specify its size statically using the <code class="option">--size=</code> option, or as a percentage of remaining free space using the <code class="option">--percent=</code> option. You cannot use both of these options on the same logical volume.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--maxsize=</code> - The maximum size in MiB when the logical volume is set to grow. Specify an integer value here such as <code>500</code> (do not include the unit).</p>
</li>
<li>
<p><code class="option">--recommended</code> - Use this option when creating a <code>swap</code> logical volume to determine the size of this volume automatically, based on your system&#8217;s hardware. For details about the recommended scheme, see <a href="../CustomSpoke-x86/#sect-recommended-partitioning-scheme-x86" class="page">Recommended Partitioning Scheme (x86)</a> for 64-bit AMD, Intel, and ARM systems, and <a href="../CustomSpoke-ppc64/#sect-recommended-partitioning-scheme-ppc" class="page">Recommended Partitioning Scheme (ppc)</a> for IBM Power&#160;Systems.</p>
</li>
<li>
<p><code class="option">--resize</code> - Resize a logical volume. If you use this option, you must also specify <code class="option">--useexisting</code> and <code class="option">--size</code>.</p>
</li>
<li>
<p><code class="option">--encrypted</code> - Specifies that this logical volume should be encrypted, using the passphrase provided in the <code class="option">--passphrase=</code> option. If you do not specify a passphrase, the installation program uses the default, system-wide passphrase set with the <code class="command">autopart --passphrase</code> command, or stops the installation and prompts you to provide a passphrase if no default is set.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When encrypting one or more partitions, <strong class="application">Anaconda</strong> attempts to gather 256 bits of entropy to ensure the partitions are encrypted securely. Gathering entropy can take some time - the process will stop after a maximum of 10 minutes, regardless of whether sufficient entropy has been gathered.</p>
</div>
<div class="paragraph">
<p>The process can be sped up by interacting with the installation system (typing on the keyboard or moving the mouse). If you are installing in a virtual machine, you can also attach a virtio-rng device (a virtual random number generator) to the guest as described in the <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Virtualization_Deployment_and_Administration_Guide/sect-Guest_virtual_machine_device_configuration-Random_number_generator_device.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Virtualization Deployment and Administration Guide</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--passphrase=</code> - Specifies the passphrase to use when encrypting this logical volume. You must use this option together with the <code class="option">--encrypted</code> option; it has no effect by itself.</p>
</li>
<li>
<p><code class="option">--cipher=</code> - Specifies which type of encryption will be used if the <strong class="application">Anaconda</strong> default aes-xts-plain64 is not satisfactory. You must use this option together with the <code class="option">--encrypted</code> option; by itself it has no effect. Available types of encryption are listed in the <a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/index.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Security Guide</a>, but CentOS strongly recommends using either aes-xts-plain64 or aes-cbc-essiv:sha256.</p>
</li>
<li>
<p><code class="option">--escrowcert=<em>URL_of_X.509_certificate</em></code> - Store data encryption keys of all encrypted volumes as files in <code>/root</code>, encrypted using the X.509 certificate from the URL specified with <em>URL_of_X.509_certificate</em>. The keys are stored as a separate file for each encrypted volume. This option is only meaningful if <code class="option">--encrypted</code> is specified.</p>
</li>
<li>
<p><code class="option">--backuppassphrase</code> - Add a randomly-generated passphrase to each encrypted volume. Store these passphrases in separate files in <code>/root</code>, encrypted using the X.509 certificate specified with <code class="option">--escrowcert</code>. This option is only meaningful if <code class="option">--escrowcert</code> is specified.</p>
</li>
<li>
<p><code class="option">--thinpool</code> - Creates a thin pool logical volume. (Use a mount point of <code>none</code>)</p>
</li>
<li>
<p><code class="option">--metadatasize=<em>size</em></code> - Specify the metadata area size (in MiB) for a new thin pool device.</p>
</li>
<li>
<p><code class="option">--chunksize=<em>size</em></code> - Specify the chunk size (in KiB) for a new thin pool device.</p>
</li>
<li>
<p><code class="option">--thin</code> - Create a thin logical volume. (Requires use of <code class="option">--poolname</code>)</p>
</li>
<li>
<p><code class="option">--poolname=<em>name</em></code> - Specify the name of the thin pool in which to create a thin logical volume. Requires the <code class="option">--thin</code> option.</p>
</li>
<li>
<p><code class="option">--profile=<em>name</em></code> - Specify the configuration profile name to use with thin logical volumes. If used, the name will also be included in the metadata for the given logical volume. By default, the available profiles are <code>default</code> and <code>thin-performance</code> and are defined in the <code>/etc/lvm/profile/</code> directory. See the <code>lvm(8)</code> man page for additional information.</p>
</li>
<li>
<p><code class="option">--cachepvs=</code> - A comma-separated list of physical volumes which should be used as a cache for this volume.</p>
</li>
<li>
<p><code class="option">--cachemode=</code> - Specify which mode should be used to cache this logical volume - either <code>writeback</code> or <code>writethrough</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For more information about cached logical volumes and their modes, see the <code>lvmcache(7)</code> man page.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--cachesize=</code> - Size of cache attached to the logical volume, specified in MiB. This option requires the <code class="option">--cachepvs=</code> option.</p>
<div class="paragraph">
<p>Create the partition first, create the logical volume group, and then create the logical volume. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">part pv.01 --size 3000</code>
<code class="command">volgroup myvg pv.01</code>
<code class="command">logvol / --vgname=myvg --size=2000 --name=rootvol</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create the partition first, create the logical volume group, and then create the logical volume to occupy 90% of the remaining space in the volume group. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">part pv.01 --size 1 --grow</code>
<code class="command">volgroup myvg pv.01</code>
<code class="command">logvol / --vgname=myvg --name=rootvol --percent=90</code></pre>
</div>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">mediacheck</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>If given, this command forces the installation program to perform a media check (<code class="option">rd.live.check</code>) before starting the installation. This command requires that installations be attended, so it is disabled by default.</p>
</div>
</dd>
<dt class="hdlist1"><code class="command">mount</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Assigns a mount point to an existing block device, and optionally reformats it to a given format.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mount [--reformat [REFORMAT]] [--mkfsoptions MKFS_OPTS] [--mountoptions MOUNT_OPTS] <em>device</em> <em>mntpoint</em></pre>
</div>
</div>
<div class="paragraph">
<p>Unlike most other storage configuration commands in Kickstart, <code class="command">mount</code> does not require you to describe the entire storage configuration in the Kickstart file. You only need to ensure that the described block device exists on the system. However, if you want to <em>create</em> the storage stack with all the devices mounted, you must use other commands such as <code class="command">part</code> to do so.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can not use <code class="command">mount</code> together with other storage-related commands such as <code class="command">part</code>, <code class="command">logvol</code>, or <code class="command">autopart</code> in the same Kickstart file.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Mandatory arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option"><em>device</em></code> - The block device to mount.</p>
</li>
<li>
<p><code class="option"><em>mntpoint</em></code> - Where to mount the <code class="option"><em>device</em></code>. It must be a valid mount point, such as <code>/</code> or <code>/usr</code>, or <code>none</code> if the device is unmountable (for example <code>swap</code>).</p>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
</li>
<li>
<p><code class="option">--reformat=</code> - Specifies a new format (such as <code>ext4</code>) to which the device should be reformatted.</p>
</li>
<li>
<p><code class="option">--mkfsoptions=</code> - Specifies additional argument to be passed to the command which creates the new file system specified in <code class="option">--reformat=</code>. The list of arguments provided here is not processed, so they must be specified in a format that can be passed directly to the <code class="command">mkfs</code> program. The list of options should be either comma-separated or surrounded by double quotes, depending on the file system. Check the <code>mkfs</code> man page for the file system you want to create (for example <code>mkfs.ext4(8)</code> or <code>mkfs.xfs(8)</code>) for specific details.</p>
</li>
<li>
<p><code class="option">--mountoptions=</code> - Specifies a free form string that contains options to be used when mounting the file system. The string will be copied to the <code>/etc/fstab</code> file on the installed system and should be enclosed in double quotes. See the <code>mount(8)</code> man page for a full list of mount options, and <code>fstab(5)</code> for basics.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">network</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Configures network information for the target system and activates network devices in the installation environment. The device specified in the first <code class="command">network</code> command is activated automatically. Activation of the device can be also explicitly required by the <code class="option">--activate</code> option.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>There are several types of network device naming standards used to identify network devices with persistent names such as <code>em1</code> or <code>wl3sp0</code>. For information about these standards, see the <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/ch-Consistent_Network_Device_Naming.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Networking Guide</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--activate</code> - activate this device in the installation environment.</p>
<div class="paragraph">
<p>If you use the <code class="option">--activate</code> option on a device that has already been activated (for example, an interface you configured with boot options so that the system could retrieve the Kickstart file) the device is reactivated to use the details specified in the Kickstart file.</p>
</div>
<div class="paragraph">
<p>Use the <code class="option">--nodefroute</code> option to prevent the device from using the default route.</p>
</div>
</li>
<li>
<p><code class="option">--bootproto=</code> - One of <code>dhcp</code>, <code>bootp</code>, <code>ibft</code>, or <code>static</code>. The default option is <code>dhcp</code>; the <code>dhcp</code> and <code>bootp</code> options are treated the same. To disable <code>ipv4</code> configuration of the device, use <code class="option">--noipv4</code> option.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This option configures ipv4 configuration of the device. For ipv6 configuration use --ipv6 and --ipv6gateway options.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The DHCP method uses a DHCP server system to obtain its networking configuration. The BOOTP method is similar, requiring a BOOTP server to supply the networking configuration. To direct a system to use DHCP:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">network --bootproto=dhcp</code></pre>
</div>
</div>
<div class="paragraph">
<p>To direct a machine to use BOOTP to obtain its networking configuration, use the following line in the Kickstart file:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">network --bootproto=bootp</code></pre>
</div>
</div>
<div class="paragraph">
<p>To direct a machine to use the configuration specified in iBFT, use:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">network --bootproto=ibft</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>static</code> method requires that you specify at least the IP address and netmask in the Kickstart file. This information is static and is used during and after the installation.</p>
</div>
<div class="paragraph">
<p>All static networking configuration information must be specified on <em>one</em> line; you cannot wrap lines using a backslash (<code>\</code>) as you can on a command line.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">network --bootproto=static --ip=10.0.2.15 --netmask=255.255.255.0 --gateway=10.0.2.254 --nameserver=10.0.2.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also configure multiple nameservers at the same time. To do so, use the <code class="option">--nameserver=</code> option once, and specify each of their IP addresses, separated by commas.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">network --bootproto=static --ip=10.0.2.15 --netmask=255.255.255.0 --gateway=10.0.2.254 --nameserver=192.168.2.1,192.168.3.1</code></pre>
</div>
</div>
</li>
<li>
<p><code class="option">--device=</code> - specifies the device to be configured (and eventually activated in <strong class="application">Anaconda</strong>) with the <code class="command">network</code> command.</p>
<div class="paragraph">
<p>If the <code class="option">--device=</code> option is missing on the <em>first</em> use of the <code class="command">network</code> command, the value of the <code class="option">ksdevice=</code> <strong class="application">Anaconda</strong> boot option is used, if available. Note that this is considered deprecated behavior; in most cases, you should always specify a <code class="option">--device=</code> for every <code class="command">network</code> command.</p>
</div>
<div class="paragraph">
<p>The behavior of any subsequent <code class="command">network</code> command in the same Kickstart file is unspecified if its <code class="option">--device=</code> option is missing. Make sure you specify this option for any <code class="command">network</code> command beyond the first.</p>
</div>
<div class="paragraph">
<p>You can specify a device to be activated in any of the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the device name of the interface, for example, <code>em1</code></p>
</li>
<li>
<p>the MAC address of the interface, for example, <code>01:23:45:67:89:ab</code></p>
</li>
<li>
<p>the keyword <code>link</code>, which specifies the first interface with its link in the <code>up</code> state</p>
</li>
<li>
<p>the keyword <code>bootif</code>, which uses the MAC address that <strong class="application">pxelinux</strong> set in the <code>BOOTIF</code> variable. Set <code>IPAPPEND 2</code> in your <code>pxelinux.cfg</code> file to have <strong class="application">pxelinux</strong> set the <code>BOOTIF</code> variable.</p>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">network --bootproto=dhcp --device=em1</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code class="option">--ip=</code> - IP address of the device.</p>
</li>
<li>
<p><code class="option">--ipv6=</code> - IPv6 address of the device, in the form of <em>address</em>[/<em>prefix</em> <em>length</em>] - for example, <code>3ffe:ffff:0:1::1/128</code> . If <em>prefix</em> is omitted, <code>64</code> is used. You can also use <code>auto</code> for automatic configuration, or <code>dhcp</code> for DHCPv6-only configuration (no router advertisements).</p>
</li>
<li>
<p><code class="option">--gateway=</code> - Default gateway as a single IPv4 address.</p>
</li>
<li>
<p><code class="option">--ipv6gateway=</code> - Default gateway as a single IPv6 address.</p>
</li>
<li>
<p><code class="option">--nodefroute</code> - Prevents the interface being set as the default route. Use this option when you activate additional devices with the <code class="option">--activate=</code> option, for example, a NIC on a separate subnet for an iSCSI target.</p>
</li>
<li>
<p><code class="option">--nameserver=</code> - DNS name server, as an IP address. To specify more than one name server, use this option once, and separate each IP address with a comma.</p>
</li>
<li>
<p><code class="option">--nodns</code> - Do not configure any DNS server.</p>
</li>
<li>
<p><code class="option">--netmask=</code> - Network mask for the installed system.</p>
</li>
<li>
<p><code class="option">--hostname=</code> - The host name for the installed system. The host name can either be a <em>fully-qualified domain name</em> (FQDN) in the format <code><em>host_name</em>.<em>domainname</em></code>, or a short host name with no domain. Many networks have a <em>Dynamic Host Configuration Protocol</em> (DHCP) service which automatically supplies connected systems with a domain name; to allow DHCP to assign the domain name, only specify a short host name.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If your network does <em>not</em> provide a DHCP service, always use the FQDN as the system&#8217;s host name.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--ethtool=</code> - Specifies additional low-level settings for the network device which will be passed to the <strong class="application">ethtool</strong> program.</p>
</li>
<li>
<p><code class="option">--essid=</code> - The network ID for wireless networks.</p>
</li>
<li>
<p><code class="option">--wepkey=</code> - The WEP encryption key for wireless networks.</p>
</li>
<li>
<p><code class="option">--wpakey=</code> - The WPA encryption key for wireless networks.</p>
</li>
<li>
<p><code class="option">--onboot=</code> - Whether or not to enable the device at boot time.</p>
</li>
<li>
<p><code class="option">--dhcpclass=</code> - The DHCP class.</p>
</li>
<li>
<p><code class="option">--mtu=</code> - The MTU of the device.</p>
</li>
<li>
<p><code class="option">--noipv4</code> - Disable IPv4 on this device.</p>
</li>
<li>
<p><code class="option">--noipv6</code> - Disable IPv6 on this device.</p>
</li>
<li>
<p><code class="option">--bondslaves=</code> - When this option is used, the network device specified in the <code class="option">--device=</code> option is created using slaves defined in the <code class="option">--bondslaves=</code> option. For example:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">network --device=mynetwork --bondslaves=em1,em2</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above command creates a bond device named <code>mynetwork</code> using the <code>em1</code> and <code>em2</code> interfaces as its slaves.</p>
</div>
</li>
<li>
<p><code class="command">--bondopts=</code> - a list of optional parameters for a bonded interface, which is specified using the <code class="command">--bondslaves=</code> and <code class="command">--device=</code> options. Options in this list must be separated by commas ("<code>,</code>") or semicolons ("<code>;</code>"). If an option itself contains a comma, use a semicolon to separate the options. For example:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">network --bondopts=mode=active-backup,balance-rr;primary=eth1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Available optional parameters are listed in the <em class="citetitle">Working with Kernel Modules</em> chapter of the <a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/index.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 System Administrator&#8217;s Guide</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code class="option">--bondopts=mode=</code> parameter only supports full mode names such as <code>balance-rr</code> or <code>broadcast</code>, not their numerical representations such as <code>0</code> or <code>3</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--vlanid=</code> - Specifies virtual LAN (VLAN) ID number (802.1q tag) for the device created using the device specified in <code class="option">--device=</code> as a parent. For example, <code class="command">network --device=em1 --vlanid=171</code> creates a virtual LAN device <code>em1.171</code>.</p>
</li>
<li>
<p><code class="option">--interfacename=</code> - Specify a custom interface name for a virtual LAN device. This option should be used when the default name generated by the <code class="option">--vlanid=</code> option is not desirable. This option must be used along with <code class="option">--vlanid=</code>. For example:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">network --device=em1 --vlanid=171 --interfacename=vlan171</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above command creates a virtual LAN interface named <code>vlan171</code> on the <code>em1</code> device with an ID of <code>171</code>.</p>
</div>
<div class="paragraph">
<p>The interface name can be arbitrary (for example, <code>my-vlan</code>), but in specific cases, the following conventions must be followed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the name contains a dot (<code>.</code>), it must take the form of <code><em>NAME</em>.<em>ID</em></code>. The <em>NAME</em> is arbitrary, but the <em>ID</em> must be the VLAN ID. For example: <code>em1.171</code> or <code>my-vlan.171</code>.</p>
</li>
<li>
<p>Names starting with <code>vlan</code> must take the form of <code>vlan<em>ID</em></code> - for example, <code>vlan171</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code class="option">--teamslaves=</code> - Team device specified by the <code class="option">--device=</code> option will be created using slaves specified in this option. Slaves are separated by commas. A slave can be followed by its configuration, which is a single-quoted JSON string with double quotes escaped by the <code>\</code> character. For example:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">network --teamslaves="p3p1'{\"prio\": -10, \"sticky\": true}',p3p2'{\"prio\": 100}'"</code></pre>
</div>
</div>
<div class="paragraph">
<p>See also the <code class="option">--teamconfig=</code> option.</p>
</div>
</li>
<li>
<p><code class="option">--teamconfig=</code> - Double-quoted team device configuration which is a single-quoted JSON string with double quotes escaped by the <code>\</code> character. The device name is specified by <code class="option">--device=</code> option and its slaves and their configuration by <code class="option">--teamslaves=</code> option. For example:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">network --device team0 --activate --bootproto static --ip=10.34.102.222 --netmask=255.255.255.0 --gateway=10.34.102.254 --nameserver=10.34.39.2 --teamslaves="p3p1'{\"prio\": -10, \"sticky\": true}',p3p2'{\"prio\": 100}'" --teamconfig="{\"runner\": {\"name\": \"activebackup\"}}"</code></pre>
</div>
</div>
</li>
<li>
<p><code class="option">--bridgeslaves=</code> - When this option is used, the network bridge with device name specified using the <code class="option">--device=</code> option will be created and devices defined in the <code class="option">--bridgeslaves=</code> option will be added to the bridge. For example:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">network --device=bridge0 --bridgeslaves=em1</code></pre>
</div>
</div>
</li>
<li>
<p><code class="option">--bridgeopts=</code> - An optional comma-separated list of parameters for the bridged interface. Available values are <code>stp</code>, <code>priority</code>, <code>forward-delay</code>, <code>hello-time</code>, <code>max-age</code>, and <code>ageing-time</code>. For information about these parameters, see the <em class="citetitle">bridge setting</em> table in the <code>nm-settings(5)</code> man page or at <a href="https://developer.gnome.org/NetworkManager/0.9/ref-settings.html" class="bare">https://developer.gnome.org/NetworkManager/0.9/ref-settings.html</a>.</p>
<div class="paragraph">
<p>Also see the <a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/index.html">
Red&#160;Hat Enterprise&#160;Linux&#160;7 Networking Guide</a> for general information about network bridging.</p>
</div>
</li>
<li>
<p><code class="option">--bindto=mac</code> - Bind the device configuration (<code>ifcfg</code>) file on the installed system to the device MAC address (<code>HWADDR</code>) instead of the default binding to the interface name (<code>DEVICE</code>). Note that this option is independent of the <code class="option">--device=</code> option - <code class="option">--bindto=mac</code> will be applied even if the same <code class="command">network</code> command also specifies a device name, <code>link</code>, or <code>bootif</code>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">nvdimm</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Performs an action on Non-Volatile Dual In-line Memory Module (NVDIMM) devices. This command uses the following format:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">nvdimm <em>action</em> <em>[options]</em></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>By default, all NVDIMM devices are ignored by the installer. You must use the <code class="command">nvdimm</code> command to enable installation on these devices.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following actions are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>reconfigure</code> - Reconfigure a specific NVDIMM device into a given mode. Additionally, the specified device is implicitly marked as to be used, so a subsequent <code class="command">nvdimm use</code> command for the same device is redundant. This action uses the following format:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">nvdimm reconfigure [--namespace=<em>NAMESPACE</em>] [--mode=<em>MODE</em>] [--sectorsize=<em>SECTORSIZE</em>]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--namespace=</code> - The device specification by namespace. For example:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">nvdimm reconfigure --namespace=namespace0.0 --mode=sector --sectorsize=512</code></pre>
</div>
</div>
</li>
<li>
<p><code class="option">--mode=</code> - The mode specification. Currently, only the value <code>sector</code> is available.</p>
</li>
<li>
<p><code class="option">--sectorsize=</code> - Size of a sector for sector mode. For example:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">nvdimm reconfigure --namespace=namespace0.0 --mode=sector --sectorsize=512</code></pre>
</div>
</div>
<div class="paragraph">
<p>The supported sector sizes are 512 and 4096 bytes.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>use</code> - Specify a NVDIMM device as a target for installation. The device must be already configured to the sector mode by the <code class="command">nvdimm reconfigure</code> command. This action uses the following format:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">nvdimm use [--namespace=<em>NAMESPACE</em>|--blockdevs=<em>DEVICES</em>]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--namespace=</code> - Specifies the device by namespace. For example:</p>
<div class="literalblock">
<div class="content">
<pre>nvdimm use --namespace=namespace0.0</pre>
</div>
</div>
</li>
<li>
<p><code class="option">--blockdevs=</code> - Specifies a comma-separated list of block devices corresponding to the NVDIMM devices to be used. The asterisk <code>*</code> wildcard is supported. For example:</p>
<div class="literalblock">
<div class="content">
<pre>nvdimm use --blockdevs=pmem0s,pmem1s
nvdimm use --blockdevs=pmem*</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">%addon org_fedora_oscap</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>The OpenSCAP installer add-on is used to apply SCAP (Security Content Automation Protocol) content - security policies - on the installed system. When enabled, the packages necessary to provide this functionality will automatically be installed. However, by default, no policies are enforced, meaning that no checks are performed during or after installation unless specifically configured.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Applying a security policy is not necessary on all systems. This screen should only be used when a specific policy is mandated by your organization rules or government regulations.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Unlike most other commands, this add-on does not accept regular options, but uses key-value pairs in the body of the <code class="command">%addon</code> definition instead. These pairs are whitespace-agnostic. Values can be optionally enclosed in single quotes (<code>'</code>) or double quotes (<code>"</code>).</p>
</div>
<div class="paragraph">
<p>The following keys are recognized by the add-on:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>content-type</code> - Type of the security content. Possible values are <code>datastream</code>, <code>archive</code>, <code>rpm</code>, and <code>scap-security-guide</code>.</p>
<div class="paragraph">
<p>If the <code>content-type</code> is <code>scap-security-guide</code>, the add-on will use content provided by the <strong class="package">scap-security-guide</strong> package, which is present on the boot media. This means that all other keys except <code>profile</code> will have no effect.</p>
</div>
</li>
<li>
<p><code>content-url</code> - Location of the security content. The content must be accessible using HTTP, HTTPS, or FTP; local storage is currently not supported. A network connection must be available to reach content definitions in a remote location.</p>
</li>
<li>
<p><code>datastream-id</code> - ID of the data stream referenced in the <code>content-url</code> value. Used only if <code>content-type</code> is <code>datastream</code>.</p>
</li>
<li>
<p><code>xccdf-id</code> - ID of the benchmark you want to use.</p>
</li>
<li>
<p><code>xccdf-path</code> - Path to the XCCDF file which should be used; given as a relative path in the archive.</p>
</li>
<li>
<p><code>profile</code> - ID of the profile to be applied. Use <code>default</code> to apply the default profile.</p>
</li>
<li>
<p><code>fingerprint</code> - A MD5, SHA1 or SHA2 checksum of the content referenced by <code>content-url</code>.</p>
</li>
<li>
<p><code>tailoring-path</code> - Path to a tailoring file which should be used, given as a relative path in the archive.</p>
<div class="paragraph">
<p>The following is an example <code class="command">%addon org_fedora_oscap</code> section which uses content from the <strong class="package">scap-security-guide</strong> on the installation media:</p>
</div>
<div id="exam-org-fedora-oscap-ssg" class="exampleblock">
<div class="title">Example 2. Sample OpenSCAP Add-on Definition Using SCAP Security Guide</div>
<div class="content">
<div class="literalblock">
<div class="content">
<pre>%addon org_fedora_oscap
content-type = scap-security-guide
profile = pci-dss
%end</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following is a more complex example which loads a custom profile from a web server:</p>
</div>
<div id="exam-org-fedora-oscap-datastream" class="exampleblock">
<div class="title">Example 3. Sample OpenSCAP Add-on Definition Using a Datastream</div>
<div class="content">
<div class="literalblock">
<div class="content">
<pre>%addon org_fedora_oscap
content-type = datastream
content-url = http://www.example.com/scap/testing_ds.xml
datastream-id = scap_example.com_datastream_testing
xccdf-id = scap_example.com_cref_xccdf.xml
profile =  xccdf_example.com_profile_my_profile
fingerprint = 240f2f18222faa98856c3b4fc50c4195
%end</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Additional information about the OpenSCAP installer add-on is available at <a href="https://www.open-scap.org/tools/oscap-anaconda-addon/" class="bare">https://www.open-scap.org/tools/oscap-anaconda-addon/</a>. For more information about the profiles available in the SCAP Security Guide and what they do, see the <a href="http://www.open-scap.org/security-policies/choosing-policy/">OpenSCAP Portal</a>.</p>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">part</code> or <code class="command">partition</code> (required)</dt>
<dd>
<div class="paragraph">
<p>Creates a partition on the system.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>All partitions created are formatted as part of the installation process unless <code class="option">--noformat</code> and <code class="option">--onpart</code> are used.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Device names in the <code>sd<em>X</em></code> (or <code>/dev/sd<em>X</em></code>) format are not guaranteed to be consistent across reboots, which can complicate usage of some Kickstart commands. When a command calls for a device node name, you can instead use any item from <code>/dev/disk</code>. For example, instead of:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">part / --fstype=xfs --onpart=sda1</code></pre>
</div>
</div>
<div class="paragraph">
<p>You could use an entry similar to one of the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">part / --fstype=xfs --onpart=/dev/disk/by-path/pci-0000:00:05.0-scsi-0:0:0:0-part1</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>part / --fstype=xfs --onpart=/dev/disk/by-id/ata-ST3160815AS_6RA0C882-part1</pre>
</div>
</div>
<div class="paragraph">
<p>This way the command will always target the same storage device. This is especially useful in large storage environments. See the chapter about persistent storage device naming in the <em class="citetitle"><a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Storage_Administration_Guide/persistent_naming.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Storage Administration Guide</a></em> for more in-depth information about different ways to consistently refer to storage devices.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For a detailed example of <code class="command">part</code> in action, see <a href="#sect-kickstart-partitioning-example">Advanced Partitioning Example</a>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">part|partition <em>mntpoint</em> --name=<em>name</em> --device=<em>device</em> --rule=<em>rule</em> [<em>options</em>]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>mntpoint</em> - Where the partition is mounted. The value must be of one of the following forms:</p>
<div class="ulist">
<ul>
<li>
<p><code>/<em>path</em></code></p>
<div class="paragraph">
<p>For example, <code>/</code>, <code>/usr</code>, <code>/home</code></p>
</div>
</li>
<li>
<p><code>swap</code></p>
<div class="paragraph">
<p>The partition is used as swap space.</p>
</div>
<div class="paragraph">
<p>To determine the size of the swap partition automatically, use the <code class="option">--recommended</code> option:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code>swap --recommended</code></pre>
</div>
</div>
<div class="paragraph">
<p>The size assigned will be effective but not precisely calibrated for your system.</p>
</div>
<div class="paragraph">
<p>To determine the size of the swap partition automatically but also allow extra space for your system to hibernate, use the <code class="option">--hibernation</code> option:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code>swap --hibernation</code></pre>
</div>
</div>
<div class="paragraph">
<p>The size assigned will be equivalent to the swap space assigned by <code class="option">--recommended</code> plus the amount of RAM on your system.</p>
</div>
<div class="paragraph">
<p>For the swap sizes assigned by these commands, see <a href="../CustomSpoke-x86/#sect-recommended-partitioning-scheme-x86" class="page">Recommended Partitioning Scheme (x86)</a> for 64-bit AMD, Intel, and ARM systems, and <a href="../CustomSpoke-ppc64/#sect-recommended-partitioning-scheme-ppc" class="page">Recommended Partitioning Scheme (ppc)</a> for IBM Power&#160;Systems servers.</p>
</div>
</li>
<li>
<p><code>raid.<em>id</em></code></p>
<div class="paragraph">
<p>The partition is used for software RAID (see <code class="command">raid</code>).</p>
</div>
</li>
<li>
<p><code>pv.<em>id</em></code></p>
<div class="paragraph">
<p>The partition is used for LVM (see <code class="command">logvol</code>).</p>
</div>
</li>
<li>
<p><code>biosboot</code></p>
<div class="paragraph">
<p>The partition will be used for a BIOS Boot partition. A 1 MiB BIOS boot partition is necessary on BIOS-based AMD64 and Intel&#160;64 systems using a <em>GUID Partition Table</em> (GPT); the boot loader will be installed into it. It is not necessary on UEFI systems. See also the <code class="command">bootloader</code> command.</p>
</div>
</li>
<li>
<p><code>/boot/efi</code></p>
<div class="paragraph">
<p>An EFI System Partition. A 50 MiB EFI partition is necessary on UEFI-based AMD, Intel, and ARM; the recommended size is 200 MiB. It is not necessary on BIOS systems. See also the <code class="command">bootloader</code> command.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code class="option">--size=</code> - The minimum partition size in MiB. Specify an integer value here such as <code>500</code> (do not include the unit).</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the <code class="option">--size</code> value is too small, the installation fails. Set the <code class="option">--size</code> value as the minimum amount of space you require. For size recommendations, see <a href="../CustomSpoke-x86/#sect-recommended-partitioning-scheme-x86" class="page">Recommended Partitioning Scheme (x86)</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--grow</code> - Tells the logical volume to grow to fill available space (if any), or up to the maximum size setting, if one is specified.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you use <code class="option">--grow=</code> without setting <code class="option">--maxsize=</code> on a swap partition, <strong class="application">Anaconda</strong> limits the maximum size of the swap partition. For systems that have less than 2&#160;GB of physical memory, the imposed limit is twice the amount of physical memory. For systems with more than 2&#160;GB, the imposed limit is the size of physical memory plus 2GB.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--maxsize=</code> - The maximum partition size in MiB when the partition is set to grow. Specify an integer value here such as <code>500</code> (do not include the unit).</p>
</li>
<li>
<p><code class="option">--noformat</code> - Specifies that the partition should not be formatted, for use with the <code class="option">--onpart</code> command.</p>
</li>
<li>
<p><code class="option">--onpart=</code> or <code class="option">--usepart=</code> - Specifies the device on which to place the partition. For example:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">partition /home --onpart=hda1</code></pre>
</div>
</div>
<div class="paragraph">
<p>puts <code>/home</code> on <code>/dev/hda1</code>.</p>
</div>
<div class="paragraph">
<p>These options can also add a partition to a logical volume. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">partition pv.1 --onpart=hda2</code></pre>
</div>
</div>
<div class="paragraph">
<p>The device must already exist on the system; the <code class="option">--onpart</code> option will not create it.</p>
</div>
<div class="paragraph">
<p>It is also possible to specify an entire drive, rather than a partition, in which case <strong class="application">Anaconda</strong> will format and use the drive without creating a partition table. Note, however, that installation of GRUB2 is not supported on a device formatted in this way, and must be placed on a drive with a partition table.</p>
</div>
</li>
<li>
<p><code class="option">--ondisk=</code> or <code class="option">--ondrive=</code> - Forces the partition to be created on a particular disk. For example, <code class="option">--ondisk=sdb</code> puts the partition on the second SCSI disk on the system.</p>
<div class="paragraph">
<p>To specify a multipath device that does not use <em>logical volume management</em> (LVM), use the format <code>disk/by-id/dm-uuid-mpath-<em>WWID</em></code>, where <em>WWID</em> is the <em>world-wide identifier</em> for the device. For example, to specify a disk with WWID <code>2416CD96995134CA5D787F00A5AA11017</code>, use:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">part / --fstype=xfs --grow --asprimary --size=8192 --ondisk=disk/by-id/dm-uuid-mpath-2416CD96995134CA5D787F00A5AA11017</code></pre>
</div>
</div>
<div class="paragraph">
<p>Multipath devices that use LVM are not assembled until after <strong class="application">Anaconda</strong> has parsed the Kickstart file. Therefore, you cannot specify these devices in the format <code>dm-uuid-mpath</code>. Instead, to specify a multipath device that uses LVM, use the format <code>disk/by-id/scsi-<em>WWID</em></code>, where <em>WWID</em> is the <em>world-wide identifier</em> for the device. For example, to specify a disk with WWID <code>58095BEC5510947BE8C0360F604351918</code>, use:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">part / --fstype=xfs --grow --asprimary --size=8192 --ondisk=disk/by-id/scsi-58095BEC5510947BE8C0360F604351918</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Never specify multipath devices by device names like <code>mpatha</code>. Device names such as this are not specific to a particular disk. The disk named <code>/dev/mpatha</code> during installation might not be the one that you expect it to be. Therefore, the <code class="command">clearpart</code> command could target the wrong disk.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--asprimary</code> - Forces the partition to be allocated as a <em>primary</em> partition. If the partition cannot be allocated as primary (usually due to too many primary partitions being already allocated), the partitioning process fails. This option only makes sense when the disk uses a Master Boot Record (MBR); for GUID Partition Table (GPT)-labeled disks this option has no meaning. For information about primary (and extended) partitions, see <a href="../Partitions-x86/#sect-disk-partitions-basics" class="page">Partitions: Turning One Drive Into Many</a>.</p>
</li>
<li>
<p><code class="option">--fsprofile=</code> - Specifies a <em>usage type</em> to be passed to the program that makes a filesystem on this partition. A usage type defines a variety of tuning parameters to be used when making a filesystem. For this option to work, the filesystem must support the concept of usage types and there must be a configuration file that lists valid types. For <code>ext2</code>, <code>ext3</code>, <code>ext4</code>, this configuration file is <code>/etc/mke2fs.conf</code>.</p>
</li>
<li>
<p><code class="option">--mkfsoptions=</code> - Specifies additional parameters to be passed to the program that makes a filesystem on this partition. This is similar to <code class="option">--fsprofile</code> but works for all filesystems, not just the ones that support the profile concept. No processing is done on the list of arguments, so they must be supplied in a format that can be passed directly to the <strong class="application">mkfs</strong> program. This means multiple options should be comma-separated or surrounded by double quotes, depending on the filesystem.</p>
</li>
<li>
<p><code class="option">--fstype=</code> - Sets the file system type for the partition. Valid values are <code>xfs</code>, <code>ext2</code>, <code>ext3</code>, <code>ext4</code>, <code>swap</code>, <code>vfat</code>, <code>efi</code> and <code>biosboot</code>.</p>
</li>
<li>
<p><code class="option">--fsoptions</code> - Specifies a free form string of options to be used when mounting the filesystem. This string will be copied into the <code>/etc/fstab</code> file of the installed system and should be enclosed in quotes.</p>
</li>
<li>
<p><code class="option">--label=</code> - assign a label to an individual partition.</p>
</li>
<li>
<p><code class="option">--recommended</code> - Determine the size of the partition automatically. For details about the recommended scheme, see <a href="../CustomSpoke-x86/#sect-recommended-partitioning-scheme-x86" class="page">Recommended Partitioning Scheme (x86)</a> for 64-bit AMD, Intel, and ARM, and <a href="../CustomSpoke-ppc64/#sect-recommended-partitioning-scheme-ppc" class="page">Recommended Partitioning Scheme (ppc)</a> for IBM Power&#160;Systems.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This option can only be used for partitions which result in a file system such as the <code>/boot</code> partition and <code>swap</code> space. It cannot be used to create LVM physical volumes or RAID members.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--onbiosdisk</code> - Forces the partition to be created on a particular disk as discovered by the BIOS.</p>
</li>
<li>
<p><code class="option">--encrypted</code> - Specifies that this partition should be encrypted, using the passphrase provided in the <code class="option">--passphrase</code> option. If you do not specify a passphrase, <strong class="application">Anaconda</strong> uses the default, system-wide passphrase set with the <code class="command">autopart --passphrase</code> command, or stops the installation and prompts you to provide a passphrase if no default is set.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When encrypting one or more partitions, <strong class="application">Anaconda</strong> attempts to gather 256 bits of entropy to ensure the partitions are encrypted securely. Gathering entropy can take some time - the process will stop after a maximum of 10 minutes, regardless of whether sufficient entropy has been gathered.</p>
</div>
<div class="paragraph">
<p>The process can be sped up by interacting with the installation system (typing on the keyboard or moving the mouse). If you are installing in a virtual machine, you can also attach a virtio-rng device (a virtual random number generator) to the guest as described in the <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Virtualization_Deployment_and_Administration_Guide/sect-Guest_virtual_machine_device_configuration-Random_number_generator_device.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Virtualization Deployment and Administration Guide</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--passphrase=</code> - Specifies the passphrase to use when encrypting this partition. You must use this option together with the <code class="option">--encrypted</code> option; by itself it has no effect.</p>
</li>
<li>
<p><code class="option">--cipher=</code> - Specifies which type of encryption will be used if the <strong class="application">Anaconda</strong> default <code>aes-xts-plain64</code> is not satisfactory. You must use this option together with the <code class="option">--encrypted</code> option; by itself it has no effect. Available types of encryption are listed in the <a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/index.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Security Guide</a>, but CentOS strongly recommends using either <code>aes-xts-plain64</code> or <code>aes-cbc-essiv:sha256</code>.</p>
</li>
<li>
<p><code class="option">--escrowcert=<em>URL_of_X.509_certificate</em></code> - Store data encryption keys of all encrypted partitions as files in <code>/root</code>, encrypted using the X.509 certificate from the URL specified with <em>URL_of_X.509_certificate</em>. The keys are stored as a separate file for each encrypted partition. This option is only meaningful if <code class="option">--encrypted</code> is specified.</p>
</li>
<li>
<p><code class="option">--backuppassphrase</code> - Add a randomly-generated passphrase to each encrypted partition. Store these passphrases in separate files in <code>/root</code>, encrypted using the X.509 certificate specified with <code class="option">--escrowcert</code>. This option is only meaningful if <code class="option">--escrowcert</code> is specified.</p>
</li>
<li>
<p><code class="option">--resize=</code> - Resize an existing partition. When using this option, specify the target size (in MiB) using the <code class="option">--size=</code> option and the target partition using the <code class="option">--onpart=</code> option.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If partitioning fails for any reason, diagnostic messages appear on virtual console 3.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">pwpolicy</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>This command can be used to enforce a custom password policy, which specifies requirements for passwords created during installation, based on factors such as password length and strength.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">pwpolicy <em>name</em> [--minlen=<em>length</em>] [--minquality=<em>quality</em>] [--strict|--nostrict] [--emptyok|--noempty] [--changesok|--nochanges]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <em>name</em> with either <code>root</code>, <code>user</code> or <code>luks</code> to enforce the policy for the <code>root</code> password, user passwords, or LUKS passphrase, respectively.</p>
</div>
<div class="paragraph">
<p>The <code>libpwquality</code> library is used to check minimum password requirements (length and quality). You can use the <code class="command">pwscore</code> and <code class="command">pwmake</code> commands provided by the <strong class="package">libpwquality</strong> package to check the quality score of a password, or to create a random password with a given score. See the <code>pwscore(1)</code> and <code>pwmake(1)</code> man page for details about these commands.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This command can only be used inside the <code class="command">%anaconda</code> section.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--minlen=</code> - Sets the minimum allowed password length, in characters. The default is <code>6</code>.</p>
</li>
<li>
<p><code class="option">--minquality=</code> - Sets the minimum allowed password quality as defined by the <code>libpwquality</code> library. The default value is <code>1</code>.</p>
</li>
<li>
<p><code class="option">--strict</code> - Enables strict password enforcement. Passwords which do not meet the requirements specified in <code class="option">--minquality=</code> and <code class="option">--minlen=</code> will not be accepted. This option is disabled by default.</p>
</li>
<li>
<p><code class="option">--notstrict</code> - Passwords which do <em>not</em> meet the minimum quality requirements specified by the <code class="option">--minquality=</code> and <code class="option">-minlen=</code> options will be allowed, after <code>Done</code> is clicked twice.</p>
</li>
<li>
<p><code class="option">--emptyok</code> - Allows the use of empty passwords. Enabled by default for user passwords.</p>
</li>
<li>
<p><code class="option">--notempty</code> - Disallows the use of empty passwords. Enabled by default for the root password and the LUKS passphrase.</p>
</li>
<li>
<p><code class="option">--changesok</code> - Allows changing the password in the user interface, even if the Kickstart file already specifies a password. Disabled by default.</p>
</li>
<li>
<p><code class="option">--nochanges</code> - Disallows changing passwords which are already set in the Kickstart file. Enabled by default.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">poweroff</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Shut down and power off the system after the installation has successfully completed. Normally during a manual installation, <strong class="application">Anaconda</strong> displays a message and waits for the user to press a key before rebooting. During a Kickstart installation, if no completion method is specified, the <code class="command">halt</code> option is used as default.</p>
</div>
<div class="paragraph">
<p>The <code class="command">poweroff</code> option is equivalent to the <code class="command">shutdown -p</code> command.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code class="command">poweroff</code> command is highly dependent on the system hardware in use. Specifically, certain hardware components such as the BIOS, APM (advanced power management), and ACPI (advanced configuration and power interface) must be able to interact with the system kernel. Consult your hardware documentation for more information on you system&#8217;s APM/ACPI abilities.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For other completion methods, see the <code class="command">halt</code>, <code class="command">reboot</code>, and <code class="command">shutdown</code> Kickstart commands.</p>
</div>
</dd>
<dt class="hdlist1"><code class="command">raid</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Assembles a software RAID device. This command is of the form:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>raid mntpoint --level=level --device=device-name partitions*</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>mntpoint</em> - Location where the RAID file system is mounted. If it is <code>/</code>, the RAID level must be 1 unless a boot partition (<code>/boot</code>) is present. If a boot partition is present, the <code>/boot</code> partition must be level 1 and the root (<code>/</code>) partition can be any of the available types. The <em>partitions*</em> (which denotes that multiple partitions can be listed) lists the RAID identifiers to add to the RAID array.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>On IBM Power&#160;Systems, if a RAID device has been prepared and has not been reformatted during the installation, ensure that the RAID metadata version is <code>0.90</code> if you intend to put the <code>/boot</code> and <code>PReP</code> partitions on the RAID device.</p>
</div>
<div class="paragraph">
<p>The default CentOS&#160;7.6.1810 <strong class="application">mdadm</strong> metadata version is not supported for the boot device.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For a detailed example of <code class="command">raid</code> in action, see <a href="#sect-kickstart-partitioning-example">Advanced Partitioning Example</a>.</p>
</div>
</li>
<li>
<p><code class="option">--level=</code> - RAID level to use (0, 1, 4, 5, 6, or 10).</p>
</li>
<li>
<p><code class="option">--device=</code> - Name of the RAID device to use - for example, <code class="option">--device=root</code>.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not use <code>mdraid</code> names in the form of <code>md0</code> - these names are not guaranteed to be persistent. Instead, use meaningful names such as <code>root</code> or <code>swap</code>. Using meaningful names creates a symbolic link from <code>/dev/md/<em>name</em></code> to whichever <code>/dev/md<em>X</em></code> node is assigned to the array.</p>
</div>
<div class="paragraph">
<p>If you have an old (v0.90 metadata) array that you cannot assign a name to, you can specify the array by a filesystem label or UUID (for example, <code class="option">--device=centos7-root --label=centos7-root</code>).</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--chunksize=</code> - Sets the chunk size of a RAID storage in KiB. In certain situations, using a different chunk size than the default (<code class="option">512 Kib</code>) can improve the performance of the RAID.</p>
</li>
<li>
<p><code class="option">--spares=</code> - Specifies the number of spare drives allocated for the RAID array. Spare drives are used to rebuild the array in case of drive failure.</p>
</li>
<li>
<p><code class="option">--fsprofile=</code> - Specifies a <em>usage type</em> to be passed to the program that makes a filesystem on this partition. A usage type defines a variety of tuning parameters to be used when making a filesystem. For this option to work, the filesystem must support the concept of usage types and there must be a configuration file that lists valid types. For ext2, ext3, and ext4, this configuration file is <code>/etc/mke2fs.conf</code>.</p>
</li>
<li>
<p><code class="option">--fstype=</code> - Sets the file system type for the RAID array. Valid values are <code>xfs</code>, <code>ext2</code>, <code>ext3</code>, <code>ext4</code>, <code>swap</code>, and <code>vfat</code>.</p>
</li>
<li>
<p><code class="option">--fsoptions=</code> - Specifies a free form string of options to be used when mounting the filesystem. This string will be copied into the <code>/etc/fstab</code> file of the installed system and should be enclosed in quotes.</p>
</li>
<li>
<p><code class="option">--mkfsoptions=</code> - Specifies additional parameters to be passed to the program that makes a filesystem on this partition. No processing is done on the list of arguments, so they must be supplied in a format that can be passed directly to the <strong class="application">mkfs</strong> program. This means multiple options should be comma-separated or surrounded by double quotes, depending on the filesystem.</p>
</li>
<li>
<p><code class="option">--label=</code> - Specify the label to give to the filesystem to be made. If the given label is already in use by another filesystem, a new label will be created.</p>
</li>
<li>
<p><code class="option">--noformat</code> - Use an existing RAID device and do not format the RAID array.</p>
</li>
<li>
<p><code class="option">--useexisting</code> - Use an existing RAID device and reformat it.</p>
</li>
<li>
<p><code class="option">--encrypted</code> - Specifies that this RAID device should be encrypted, using the passphrase provided in the <code class="option">--passphrase</code> option. If you do not specify a passphrase, <strong class="application">Anaconda</strong> uses the default, system-wide passphrase set with the <code class="command">autopart --passphrase</code> command, or stops the installation and prompts you to provide a passphrase if no default is set.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When encrypting one or more partitions, <strong class="application">Anaconda</strong> attempts to gather 256 bits of entropy to ensure the partitions are encrypted securely. Gathering entropy can take some time - the process will stop after a maximum of 10 minutes, regardless of whether sufficient entropy has been gathered.</p>
</div>
<div class="paragraph">
<p>The process can be sped up by interacting with the installation system (typing on the keyboard or moving the mouse). If you are installing in a virtual machine, you can also attach a virtio-rng device (a virtual random number generator) to the guest as described in the <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Virtualization_Deployment_and_Administration_Guide/sect-Guest_virtual_machine_device_configuration-Random_number_generator_device.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Virtualization Deployment and Administration Guide</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--cipher=</code> - Specifies which type of encryption will be used if the <strong class="application">Anaconda</strong> default aes-xts-plain64 is not satisfactory. You must use this option together with the <code class="option">--encrypted</code> option; by itself it has no effect. Available types of encryption are listed in the <a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/index.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 Security Guide</a>, but CentOS strongly recommends using either aes-xts-plain64 or aes-cbc-essiv:sha256.</p>
</li>
<li>
<p><code class="option">--passphrase=</code> - Specifies the passphrase to use when encrypting this RAID device. You must use this option together with the <code class="option">--encrypted</code> option; by itself it has no effect.</p>
</li>
<li>
<p><code class="option">--escrowcert=<em>URL_of_X.509_certificate</em></code> - Store the data encryption key for this device in a file in <code>/root</code>, encrypted using the X.509 certificate from the URL specified with <em>URL_of_X.509_certificate</em>. This option is only meaningful if <code class="option">--encrypted</code> is specified.</p>
</li>
<li>
<p><code class="option">--backuppassphrase</code> - Add a randomly-generated passphrase to this device. Store the passphrase in a file in <code>/root</code>, encrypted using the X.509 certificate specified with <code class="option">--escrowcert</code>. This option is only meaningful if <code class="option">--escrowcert</code> is specified.</p>
<div class="paragraph">
<p>The following example shows how to create a RAID level 1 partition for <code>/</code>, and a RAID level 5 for <code>/home</code>, assuming there are three SCSI disks on the system. It also creates three swap partitions, one on each drive.</p>
</div>
<div class="exampleblock">
<div class="title">Example 4. Using the raid Kickstart command</div>
<div class="content">
<div class="literalblock">
<div class="content">
<pre><code class="command">part raid.01 --size=6000 --ondisk=sda</code>
<code class="command">part raid.02 --size=6000 --ondisk=sdb</code>
<code class="command">part raid.03 --size=6000 --ondisk=sdc</code>

<code class="command">part swap --size=512 --ondisk=sda</code>
<code class="command">part swap --size=512 --ondisk=sdb</code>
<code class="command">part swap --size=512 --ondisk=sdc</code>

<code class="command">part raid.11 --size=1 --grow --ondisk=sda</code>
<code class="command">part raid.12 --size=1 --grow --ondisk=sdb</code>
<code class="command">part raid.13 --size=1 --grow --ondisk=sdc</code>

<code class="command">raid / --level=1 --device=centos7-root --label=centos7-root raid.01 raid.02 raid.03</code>
<code class="command">raid /home --level=5 --device=centos7-home --label=centos7-home raid.11 raid.12 raid.13</code></pre>
</div>
</div>
</div>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">realm</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Join an Active Directory or IPA domain. For more information about this command, see the <code>join</code> section of the <code>realm(8)</code> man page.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">realm join [<em>options</em>] <em>domain</em></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--computer-ou=OU=</code> - Provide the distinguished name of an organizational unit in order to create the computer account. The exact format of the distinguished name depends on the client software and membership software. The root DSE portion of the distinguished name can usually be left out.</p>
</li>
<li>
<p><code class="option">--no-password</code> - Join automatically without a password.</p>
</li>
<li>
<p><code class="option">--one-time-password=</code> - Join using a one-time password. This is not possible with all types of realm.</p>
</li>
<li>
<p><code class="option">--client-software=</code> - Only join realms which can run this client software. Valid values include <code>sssd</code> and <code>winbind</code>. Not all realms support all values. By default, the client software is chosen automatically.</p>
</li>
<li>
<p><code class="option">--server-software=</code> - Only join realms which can run this server software. Possible values include <code>active-directory</code> or <code>freeipa</code>.</p>
</li>
<li>
<p><code class="option">--membership-software=</code> - Use this software when joining the realm. Valid values include <code>samba</code> and <code>adcli</code>. Not all realms support all values. By default, the membership software is chosen automatically.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">reboot</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Reboot after the installation is successfully completed (no arguments). Normally, Kickstart displays a message and waits for the user to press a key before rebooting.</p>
</div>
<div class="paragraph">
<p>The <code class="command">reboot</code> option is equivalent to the <code class="command">shutdown -r</code> command.</p>
</div>
<div class="paragraph">
<p>For other completion methods, see the <code class="command">halt</code>, <code class="command">poweroff</code>, and <code class="command">shutdown</code> Kickstart options.</p>
</div>
<div class="paragraph">
<p>The <code class="command">halt</code> option is the default completion method if no other methods are explicitly specified in the Kickstart file.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Use of the <code class="command">reboot</code> option <em>might</em> result in an endless installation loop, depending on the installation media and method.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="command">--eject</code> - Attempt to eject the bootable media (DVD, USB, or other media) before rebooting.</p>
</li>
<li>
<p><code class="command">--kexec</code> - Uses the <strong class="application">kexec</strong> system call instead of performing a full reboot, which immediately loads the installed system into memory, bypassing the hardware initialization normally performed by the BIOS or firmware.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Due to the complexities involved with booting systems using <strong class="application">kexec</strong>, it cannot be explicitly tested and guaranteed to function in every situation.</p>
</div>
<div class="paragraph">
<p>When <strong class="application">kexec</strong> is used, device registers (which would normally be cleared during a full system reboot) might stay filled with data, which could potentially create issues for some device drivers.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">repo</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Configures additional <strong class="application">yum</strong> repositories that can be used as sources for package installation. You can add multiple <code class="command">repo</code> lines.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">repo --name=<em>repoid</em> [--baseurl=<em>&lt;url&gt;</em>|--mirrorlist=<em>url</em>] [<em>options</em>]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--name=</code> - The repository id. This option is required. If a repository has a name which conflicts with another previously added repository, it is ignored. Because the installation program uses a list of preset repositories, this means that you cannot add repositories with the same names as the preset ones.</p>
</li>
<li>
<p><code class="option">--baseurl=</code> - The URL to the repository. The variables that can be used in yum repo config files are not supported here. This option cannot be used together with the <code class="option">--mirrorlist</code> option in the same repository definition.</p>
</li>
<li>
<p><code class="option">--mirrorlist=</code> - The URL pointing at a list of mirrors for the repository. The variables that can be used in yum repository configuration files are not supported here. This option cannot be used together with the <code class="option">--baseurl</code> option in the same repository definition.</p>
</li>
<li>
<p><code class="option">--install</code> - Save the provided repository configuration on the installed system in the <code>/etc/yum.repos.d/</code> directory. Without using this option, a repository configured in a Kickstart file will only be available during the installation process, not on the installed system.</p>
</li>
<li>
<p><code class="option">--cost=</code> - An integer value to assign a cost to this repository. If multiple repositories provide the same packages, this number is used to prioritize which repository will be used before another. Repositories with a lower cost take priority over repositories with higher cost.</p>
</li>
<li>
<p><code class="option">--excludepkgs=</code> - A comma-separated list of package names that must <em>not</em> be pulled from this repository. This is useful if multiple repositories provide the same package and you want to make sure it comes from a particular repository. Both full package names (such as <code>publican</code>) and globs (such as <code>gnome-*</code>) are accepted.</p>
</li>
<li>
<p><code class="option">--includepkgs=</code> - A comma-separated list of package names and globs that must be pulled from this repository. This is useful if multiple repositories provide the same package and you want to make sure it comes from this repository.</p>
</li>
<li>
<p><code class="option">--proxy=[<em>protocol</em>://][<em>username</em>[:<em>password</em>]@]<em>host</em>[:<em>port</em>]</code> - Specify an HTTP/HTTPS/FTP proxy to use just for this repository. This setting does not affect any other repositories, nor how the <code>install.img</code> is fetched on HTTP installations.</p>
</li>
<li>
<p><code class="option">--ignoregroups=true</code> - This option is used when composing installation trees and has no effect on the installation process itself. It tells the compose tools to not look at the package group information when mirroring trees so as to avoid mirroring large amounts of unnecessary data.</p>
</li>
<li>
<p><code class="option">--noverifyssl</code> - Disable SSL verification when connecting to an <code>HTTPS</code> server.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Repositories used for installation must be stable. The installation can fail if a repository is modified before the installation concludes.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">rescue</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Automatically enters the installation program&#8217;s rescue mode. This gives you a chance to repair the system in case of any problems.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">rescue [--nomount|--romount]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--nomount</code> or <code class="option">--romount</code> - Controls how the installed system is mounted in the rescue environment. By default, the installation program finds your system and mount it in read-write mode, telling you where it has performed this mount. You can optionally select to not mount anything (the <code class="option">--nomount</code> option) or mount in read-only mode (the <code class="option">--romount</code> option). Only one of these two options can be used.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">reqpart</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Automatically creates partitions required by your hardware platform. These include a <code>/boot/efi</code> partition for systems with UEFI firmware, a <code>biosboot</code> partition for systems with BIOS firmware and GPT, and a <code>PRePBoot</code> partition for IBM Power Systems.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">reqpart [--add-boot]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--add-boot</code> - Creates a separate <code>/boot</code> partition in addition to the platform-specific partition created by the base command.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This command cannot be used toegether with <code class="command">autopart</code>, because <code class="command">autopart</code> does everything the <code class="command">reqpart</code> command does and, in addition, creates other partitions or logical volumes such as <code>/</code> and <code>swap</code>. In contrast with <code class="command">autopart</code>, this command only creates platform-specific partitions and leaves the rest of the drive empty, allowing you to create a custom layout.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">rootpw</code> (required)</dt>
<dd>
<div class="paragraph">
<p>Sets the system&#8217;s root password to the <em>password</em> argument.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">rootpw [--iscrypted|--plaintext] [--lock] <em>password</em></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--iscrypted</code> - If this option is present, the password argument is assumed to already be encrypted. This option is mutually exclusive with <code class="option">--plaintext</code>. To create an encrypted password, you can use <strong class="application">python</strong>:</p>
<div class="literalblock">
<div class="content">
<pre><code>$</code> <code class="command">python -c 'import crypt,getpass;pw=getpass.getpass();print(crypt.crypt(pw) if (pw==getpass.getpass("Confirm: ")) else exit())'</code></pre>
</div>
</div>
<div class="paragraph">
<p>This generates a sha512 crypt-compatible hash of your password using a random salt.</p>
</div>
</li>
<li>
<p><code class="option">--plaintext</code> - If this option is present, the password argument is assumed to be in plain text. This option is mutually exclusive with <code class="option">--iscrypted</code>.</p>
</li>
<li>
<p><code class="option">--lock</code> - If this option is present, the root account is locked by default. This means that the root user will not be able to log in from the console. This option will also disable the <code>Root Password</code> screens in both the graphical and text-based manual installation.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">selinux</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Sets the state of SELinux on the installed system. The default SELinux policy is <code>enforcing</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">selinux [--disabled|--enforcing|--permissive]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--enforcing</code> - Enables SELinux with the default targeted policy being <code>enforcing</code>.</p>
</li>
<li>
<p><code class="option">--permissive</code> - Outputs warnings based on the SELinux policy, but does not actually enforce the policy.</p>
</li>
<li>
<p><code class="option">--disabled</code> - Disables SELinux completely on the system.</p>
<div class="paragraph">
<p>For more information regarding SELinux, see the <a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/SELinux_Users_and_Administrators_Guide/index.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 SELinux User&#8217;s and Administrator&#8217;s Guide</a>.</p>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">services</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Modifies the default set of services that will run under the default <strong class="application">systemd</strong> target. The list of disabled services is processed before the list of enabled services. Therefore, if a service appears on both lists, it will be enabled.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">services [--disabled=<em>list</em>] [--enabled=<em>list</em>]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--disabled=</code> - Disable the services given in the comma separated list.</p>
</li>
<li>
<p><code class="option">--enabled=</code> - Enable the services given in the comma separated list.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not include spaces in the list of services. If you do, Kickstart will enable or disable only the services up to the first space. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">services --disabled=auditd, cups,smartd, nfslock</code></pre>
</div>
</div>
<div class="paragraph">
<p>disables only the <code>auditd</code> service. To disable all four services, this entry should include no spaces:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">services --disabled=auditd,cups,smartd,nfslock</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">shutdown</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Shut down the system after the installation has successfully completed. During a Kickstart installation, if no completion method is specified, the <code class="command">halt</code> command is used.</p>
</div>
<div class="paragraph">
<p>The <code class="command">shutdown</code> Kickstart option is equivalent to the <code class="command">shutdown</code> command.</p>
</div>
<div class="paragraph">
<p>For other completion methods, see the <code class="command">halt</code>, <code class="command">poweroff</code>, and <code class="command">reboot</code> Kickstart options.</p>
</div>
</dd>
<dt class="hdlist1"><code class="command">skipx</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>If present, <strong class="application">X</strong> is not configured on the installed system.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you install a display manager among your package selection options, this package creates an <strong class="application">X</strong> configuration, and the installed system defaults to <code>graphical.target</code>. The effect of the <code class="command">skipx</code> option is overridden.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><code class="command">snapshot</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Using the <code class="command">snapshot</code> command, you can create LVM thin volume snapshots during the installation process. This enables you to back up a logical volume before or after the installation.</p>
</div>
<div class="paragraph">
<p>To create multiple snapshots, add the <code class="command">snaphost</code> Kickstart command multiple times.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>snapshots <em>vg_name/lv_name</em> --name=<em>snapshot_name</em> --when=<em>pre-install|post-install</em></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option"><em>vg_name</em>/<em>lv_name</em></code> - Sets the name of the volume group and logical volume to create the snapshot from.</p>
</li>
<li>
<p><code class="option">--name=<em>snapshot_name</em></code> - Sets the name of the snapshot. This name must be unique within the volume group.</p>
</li>
<li>
<p><code class="option">--when=<em>pre-install|post-install</em></code> - Sets if the snapshot is created before the installation begins or after the installation is completed.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">sshpw</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>During the installation, you can interact with the installation program and monitor its progress over an <code>SSH</code> connection. Use the <code class="command">sshpw</code> command to create temporary accounts through which to log on. Each instance of the command creates a separate account that exists only in the installation environment. These accounts are not transferred to the installed system.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">sshpw --username=<em>name</em> <em>password</em> [--iscrypted|--plaintext] [--lock]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--username</code> - Provides the name of the user. This option is required.</p>
</li>
<li>
<p><code class="option">--iscrypted</code> - If this option is present, the password argument is assumed to already be encrypted. This option is mutually exclusive with <code class="option">--plaintext</code>. To create an encrypted password, you can use <strong class="application">python</strong>:</p>
<div class="literalblock">
<div class="content">
<pre><code>$</code> <code class="command">python -c 'import crypt,getpass;pw=getpass.getpass();print(crypt.crypt(pw) if (pw==getpass.getpass("Confirm: ")) else exit())'</code></pre>
</div>
</div>
<div class="paragraph">
<p>This generates a sha512 crypt-compatible hash of your password using a random salt.</p>
</div>
</li>
<li>
<p><code class="option">--plaintext</code> - If this option is present, the password argument is assumed to be in plain text. This option is mutually exclusive with <code class="option">--iscrypted</code></p>
</li>
<li>
<p><code class="option">--lock</code> - If this option is present, this account is locked by default. This means that the user will not be able to log in from the console.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>By default, the <code>ssh</code> server is not started during the installation. To make <code>ssh</code> available during the installation, boot the system with the kernel boot option <code class="option">inst.sshd</code>. See <a href="../adminoptions/#list-boot-options-display" class="page">Console, Environment and Display Options</a> for details.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you want to disable root <code>ssh</code> access, while allowing another user <code>ssh</code> access, use the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sshpw --username=example_username example_password --plaintext
sshpw --username=root example_password --lock</pre>
</div>
</div>
<div class="paragraph">
<p>To simply disable root <code>ssh</code> access, use the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">sshpw --username=root --lock</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">text</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Perform the Kickstart installation in text mode. Kickstart installations are performed in graphical mode by default.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For a fully automatic installation, you must either specify one of the available modes (<code class="command">graphical</code>, <code class="command">text</code>, or <code class="command">cmdline</code>) in the Kickstart file, or you must use the <code class="option">console=</code> boot option as described in <a href="../adminoptions/#list-boot-options-display" class="page">Console, Environment and Display Options</a>. If no mode is specified, the system will prompt you to choose one before continuing.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
<div id="varlist-kickstart-timezone" class="dlist">
<dl>
<dt class="hdlist1"><code class="command">timezone</code> (required)</dt>
<dd>
<div class="paragraph">
<p>Sets the system time zone to <em>timezone</em>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">timezone <em>timezone</em> [<em>options</em>]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--utc</code> - If present, the system assumes the hardware clock is set to UTC (Greenwich Mean) time.</p>
</li>
<li>
<p><code class="option">--nontp</code> - Disable the NTP service automatic starting.</p>
</li>
<li>
<p><code class="option">--ntpservers=</code> - Specify a list of NTP servers to be used as a comma-separated list without spaces.</p>
<div class="paragraph">
<p>Starting with CentOS&#160;7.5.1804, time zone names are validated using the <code>pytz.all_timezones</code> list, provided by the <strong class="package">pytz</strong> package. In previous releases, the names were validated against <code>pytz.common_timezones</code>, which is a subset of the currently used list. Note that the graphical and text mode interfaces still use the more restricted <code>pytz.common_timezones</code> list; you must use a Kickstart file to use additional time zone definitions.</p>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">unsupported_hardware</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Tells the installation program to suppress the <code>Unsupported Hardware Detected</code> alert. If this command is not included and unsupported hardware is detected, the installation stalls at this alert.</p>
</div>
</dd>
</dl>
</div>
<div id="varlist-kickstart-user" class="dlist">
<dl>
<dt class="hdlist1"><code class="command">user</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Creates a new user on the system.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">user --name=<em>username</em> [<em>options</em>]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--name=</code> - Provides the name of the user. This option is required.</p>
</li>
<li>
<p><code class="option">--gecos=</code> - Provides the GECOS information for the user. This is a string of various system-specific fields separated by a comma. It is frequently used to specify the user&#8217;s full name, office number, and so on. See the <code>passwd(5)</code> man page for more details.</p>
</li>
<li>
<p><code class="option">--groups=</code> - In addition to the default group, a comma separated list of group names the user should belong to. The groups must exist before the user account is created. See the <code class="command">group</code> command.</p>
</li>
<li>
<p><code class="option">--homedir=</code> - The home directory for the user. If not provided, this defaults to <code>/home/<em>username</em></code>.</p>
</li>
<li>
<p><code class="option">--lock</code> - If this option is present, this account is locked by default. This means that the user will not be able to log in from the console. This option will also disable the <code>Create User</code> screens in both the graphical and text-based manual installation.</p>
</li>
<li>
<p><code class="option">--password=</code> - The new user&#8217;s password. If not provided, the account will be locked by default.</p>
</li>
<li>
<p><code class="option">--iscrypted</code> - If this option is present, the password argument is assumed to already be encrypted. This option is mutually exclusive with <code class="option">--plaintext</code>. To create an encrypted password, you can use <strong class="application">python</strong>:</p>
<div class="literalblock">
<div class="content">
<pre><code>$</code> <code class="command">python -c 'import crypt,getpass;pw=getpass.getpass();print(crypt.crypt(pw) if (pw==getpass.getpass("Confirm: ")) else exit())'</code></pre>
</div>
</div>
<div class="paragraph">
<p>This generates a sha512 crypt-compatible hash of your password using a random salt.</p>
</div>
</li>
<li>
<p><code class="option">--plaintext</code> - If this option is present, the password argument is assumed to be in plain text. This option is mutually exclusive with <code class="option">--iscrypted</code></p>
</li>
<li>
<p><code class="option">--shell=</code> - The user&#8217;s login shell. If not provided, the system default is used.</p>
</li>
<li>
<p><code class="option">--uid=</code> - The user&#8217;s <em>UID</em> (User ID). If not provided, this defaults to the next available non-system UID.</p>
</li>
<li>
<p><code class="option">--gid=</code> - The <em>GID</em> (Group ID) to be used for the user&#8217;s group. If not provided, this defaults to the next available non-system group ID.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Consider using the <code class="option">--uid</code> and <code class="option">--gid</code> options to set IDs of regular users and their default groups at range starting at <code>5000</code> instead of <code>1000</code>. That is because the range reserved for system users and groups, <code>0</code>-<code>999</code>, might increase in the future and thus overlap with IDs of regular users.</p>
</div>
<div class="paragraph">
<p>For changing the minimum UID and GID limits after the installation, which ensures that your chosen UID and GID ranges are applied automatically on user creation, see <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/ch-managing_users_and_groups#s1-users-groups-introduction">the Users and Groups chapter of the System Administrator&#8217;s Guide</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Files and directories are created with various permissions, dictated by the application used to create the file or directory. For example, the <code class="command">mkdir</code> command creates directories with all permissions enabled. However, applications are prevented from granting certain permissions to newly created files, as specified by the <code>user file-creation mask</code> setting.</p>
</div>
<div class="paragraph">
<p>The <code>user file-creation mask</code> can be controlled with the <code class="command">umask</code> command. The default setting of the <code>user file-creation mask</code> for new users is defined by the <code>UMASK</code> variable in the <code>/etc/login.defs</code> configuration file on the installed system. If unset, it defaults to <code>022</code>. This means that by default when an application creates a file, it is prevented from granting write permission to users other than the owner of the file. However, this can be overridden by other settings or scripts. More information can be found in the <a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/index.html">Red&#160;Hat Enterprise&#160;Linux&#160;7 System Administrator&#8217;s Guide</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">vnc</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Allows the graphical installation to be viewed remotely through VNC. This method is usually preferred over text mode, as there are some size and language limitations in text installations. With no additional options, this command starts a VNC server on the installation system with no password and displays the details required to connect to it.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>vnc [--host=host_name] [--port=port] [--password=password]</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--host=</code> - Connect to the VNC viewer process listening on the given host name.</p>
</li>
<li>
<p><code class="option">--port=</code> - Provide a port that the remote VNC viewer process is listening on. If not provided, <strong class="application">Anaconda</strong> uses the VNC default port of 5900.</p>
</li>
<li>
<p><code class="option">--password=</code> - Set a password which must be provided to connect to the VNC session. This is optional, but recommended.</p>
<div class="paragraph">
<p>For more information about VNC installations, including instructions on how to connect to the installation system, see <a href="../vnc-installations/#chap-vnc-installations" class="page">Using VNC</a>.</p>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">volgroup</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Creates a Logical Volume Management (LVM) group.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">volgroup <em>name</em> <em>partition</em> [<em>options</em>]</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not use the dash (<code>-</code>) character in logical volume and volume group names when installing CentOS using Kickstart. If this character is used, the installation finishes normally, but the <code>/dev/mapper/</code> directory will list these volumes and volume groups with every dash doubled. For example, a volume group named <code>volgrp-01</code> containing a logical volume named <code>logvol-01</code> will be listed as <code>/dev/mapper/volgrp&#8212;&#8203;01-logvol&#8212;&#8203;01</code>.</p>
</div>
<div class="paragraph">
<p>This limitation only applies to newly created logical volume and volume group names. If you are reusing existing ones using the <code class="option">--noformat</code> option, their names will not be changed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For a detailed partitioning example including <code class="command">volgroup</code>, see <a href="#sect-kickstart-partitioning-example">Advanced Partitioning Example</a>.</p>
</div>
<div class="paragraph">
<p>The options are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--noformat</code> - Use an existing volume group and do not format it.</p>
</li>
<li>
<p><code class="option">--useexisting</code> - Use an existing volume group and reformat it. If you use this option, do not specify a <em>partition</em>. For example:</p>
<div class="literalblock">
<div class="content">
<pre><code class="command">volgroup centos00 --useexisting --noformat</code></pre>
</div>
</div>
</li>
<li>
<p><code class="option">--pesize=</code> - Set the size of the volume group&#8217;s physical extents in KiB. The default value is 4096 (4 MiB), and the minimum value is 1024 (1 MiB).</p>
</li>
<li>
<p><code class="option">--reserved-space=</code> - Specify an amount of space to leave unused in a volume group in MiB. Applicable only to newly created volume groups.</p>
</li>
<li>
<p><code class="option">--reserved-percent=</code> - Specify a percentage of total volume group space to leave unused. Applicable only to newly created volume groups.</p>
<div class="paragraph">
<p>Create the partition first, then create the logical volume group, and then create the logical volume. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">part pv.01 --size 10000</code>
<code class="command">volgroup volgrp pv.01</code>
<code class="command">logvol / --vgname=volgrp --size=2000 --name=root</code></pre>
</div>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">xconfig</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Configures the <strong class="application">X Window System</strong>. If you install the <strong class="application">X Window System</strong> with a Kickstart file that does not include the <code class="command">xconfig</code> command, you must provide the <strong class="application">X</strong> configuration manually during installation.</p>
</div>
<div class="paragraph">
<p>Do not use this command in a Kickstart file that does not install the <strong class="application">X Window System</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--defaultdesktop=</code> - Specify either <code>GNOME</code> or <code>KDE</code> to set the default desktop (assumes that the chosen environment, either the <strong class="application">GNOME Desktop Environment</strong> or the <strong class="application">KDE Desktop Environment</strong>, has been installed in the <code class="command">%packages</code> section).</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is currently not possible to specify <strong class="application">KDE</strong> as your default desktop environment using this option. This is a known issue.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code class="option">--startxonboot</code> - Use a graphical login on the installed system.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div id="sect-kickstart-commands-zerombr" class="dlist">
<dl>
<dt class="hdlist1"><code class="command">zerombr</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>If <code class="command">zerombr</code> is specified, any invalid partition tables found on disks are initialized. This destroys all of the contents of disks with invalid partition tables. This command is required when performing an unattended installation on a system with previously initialized disks.</p>
</div>
</dd>
<dt class="hdlist1"><code class="command">zfcp</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Define a Fibre channel device. This option only applies on IBM System&#160;z. All of the options described below must be specified.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">zfcp --devnum=<em>devnum</em> --wwpn=<em>wwpn</em> --fcplun=<em>lun</em></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="option">--devnum</code> - The device number (zFCP adapter device bus ID).</p>
</li>
<li>
<p><code class="option">--wwpn</code> - The device&#8217;s World Wide Port Name (WWPN). Takes the form of a 16-digit number, preceded by <code>0x</code>.</p>
</li>
<li>
<p><code class="option">--fcplun</code> - The device&#8217;s Logical Unit Number (LUN). Takes the form of a 16-digit number, preceded by <code>0x</code>.</p>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">zfcp --devnum=0.0.4000 --wwpn=0x5005076300C213e9 --fcplun=0x5022000000000000</code></pre>
</div>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code class="command">%include</code> (optional)</dt>
<dd>
<div class="paragraph">
<p>Use the <code class="command">%include <em>/path/to/file</em></code> command to include the contents of another file in the Kickstart file as though the contents were at the location of the <code class="command">%include</code> command in the Kickstart file.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sect-kickstart-packages"><a class="anchor" href="#sect-kickstart-packages"></a>Package Selection</h3>
<div class="paragraph">
<p>Use the <code class="command">%packages</code> command to begin a Kickstart section which describes the software packages to be installed.</p>
</div>
<div class="paragraph">
<p>You can specify packages by <em>environment</em>, <em>group</em>, or by their package names. Several environments and groups that contain related packages are defined. See the <code>repodata/*-comps-<em>variant</em>.<em>architecture</em>.xml</code> file on the CentOS&#160;7.6.1810 Installation DVD for a list of environments and groups.</p>
</div>
<div class="paragraph">
<p>The <code>*-comps-<em>variant</em>.<em>architecture</em>.xml</code> file contains a structure describing available environments (marked by the <code>&lt;environment&gt;</code> tag) and groups (the <code>&lt;group&gt;</code> tag). Each entry has an ID, user visibility value, name, description, and package list. If the group is selected for installation, the packages marked <code>mandatory</code> in the package list are always installed, the packages marked <code>default</code> are installed if they are not specifically excluded elsewhere, and the packages marked <code>optional</code> must be specifically included elsewhere even when the group is selected.</p>
</div>
<div class="paragraph">
<p>You can specify a package group or environment using either its ID (the <code>&lt;id&gt;</code> tag) or name (the <code>&lt;name&gt;</code> tag).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you are not sure what packages should be installed, select the <code>Minimal Install</code> environment. <code>Minimal install</code> provides only the packages which are essential for running CentOS&#160;7.6.1810. This will substantially reduce the chance of the system being affected by a vulnerability. If necessary, additional packages can be added later after the installation. For more details on <code>Minimal install</code>, see the <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/sec-Installing_the_Minimum_Amount_of_Packages_Required.html">Installing the Minimum Amount of Packages Required</a> section of the Red&#160;Hat Enterprise&#160;Linux&#160;7 Security Guide.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To install a 32-bit package on a 64-bit system, append the package name with the 32-bit architecture for which the package was built; for example, <strong class="package">glibc.i686</strong>. The <code class="option">--multilib</code> option also must be specified in the Kickstart file; see the available options below.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong class="application">Initial Setup</strong> does not run after a system is installed from a Kickstart file unless a desktop environment and the <strong class="application">X Window System</strong> were included in the installation and graphical login was enabled. This means that by default, no users except for <code>root</code> are created. You can either create a user with the <code class="option">user</code> option in the Kickstart file before installing additional systems from it (see <a href="#sect-kickstart-commands">Kickstart Commands and Options</a> for details) or log into the installed system with a virtual console as <code>root</code> and add users with the <code class="command">useradd</code> command.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code class="command">%packages</code> section must end with the <code class="command">%end</code> command.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Specifying an Environment</dt>
<dd>
<div class="paragraph">
<p>In addition to groups, you specify an entire environment to be installed:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>%packages
@^Infrastructure Server
%end</pre>
</div>
</div>
<div class="paragraph">
<p>This command installs all packages which are part of the <code>Infrastracture Server</code> environment. All available environments are described in the <code>repodata/*-comps-<em>variant</em>.<em>architecture</em>.xml</code> file on the CentOS&#160;7.6.1810 Installation DVD. Only a single environment can be specified in the Kickstart file.</p>
</div>
</dd>
<dt class="hdlist1">Specifying Groups</dt>
<dd>
<div class="paragraph">
<p>Specify groups, one entry to a line, starting with an <code>@</code> symbol, and then the full group name or group id as given in the <code>*-comps-<em>variant</em>.<em>architecture</em>.xml</code> file. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">%packages</code>
@X Window System
@Desktop
@Sound and Video
<code class="command">%end</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Core</code> group is always selected - it is not necessary to specify it in the <code class="command">%packages</code> section.</p>
</div>
<div class="paragraph">
<p>The <code>*-comps-<em>variant</em>.<em>architecture</em>.xml</code> file also defines groups called <code>Conflicts (<em>variant</em>)</code> for each variant of CentOS. This group contains all packages which are known to cause file conflicts, and is intended to be excluded.</p>
</div>
</dd>
<dt class="hdlist1">Specifying Individual Packages</dt>
<dd>
<div class="paragraph">
<p>Specify individual packages by name, one entry to a line. You can use the asterisk character (<code>*</code>) as a <em>wildcard</em> in package names. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>%packages
sqlite
curl
aspell
docbook*
%end</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>docbook*</code> entry includes the packages <strong class="package">docbook-dtds</strong>, <strong class="package">docbook-simple</strong>, <strong class="package">docbook-slides</strong> and others that match the pattern represented with the wildcard.</p>
</div>
</dd>
<dt class="hdlist1">Excluding Environments, Groups, or Packages</dt>
<dd>
<div class="paragraph">
<p>Use a leading dash (<code>-</code>) to specify packages or groups to exclude from the installation. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>%packages
-@Graphical Internet
-autofs
-ipa*fonts
%end</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Installing all available packages using only <code>*</code> in a Kickstart file is not supported, even if you exclude the <code>@Conflicts (<em>variant</em>)</code> group.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can change the default behavior of the <code class="command">%packages</code> section by using several options. Some options work for the entire package selection, others are used with only specific groups.</p>
</div>
<div class="paragraph">
<div class="title">Common Package Selection Options</div>
<p>The following options are available for the <code class="command">%packages</code>. To use an option, append it to the start of the package selection section. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">%packages --multilib --ignoremissing</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code class="option">--default</code></dt>
<dd>
<div class="paragraph">
<p>Install the default set of packages. This corresponds to the package set which would be installed if no other selections were made in the <code>Package Selection</code> screen during an interactive installation.</p>
</div>
</dd>
<dt class="hdlist1"><code class="option">--excludedocs</code></dt>
<dd>
<div class="paragraph">
<p>Do not install any documentation contained within packages. In most cases, this excludes any files normally installed in the <code>/usr/share/doc</code> directory, but the specific files to be excluded depend on individual packages.</p>
</div>
</dd>
<dt class="hdlist1"><code class="option">--ignoremissing</code></dt>
<dd>
<div class="paragraph">
<p>Ignore any packages, groups and environments missing in the installation source, instead of halting the installation to ask if the installation should be aborted or continued.</p>
</div>
</dd>
<dt class="hdlist1"><code class="option">--instLangs=</code></dt>
<dd>
<div class="paragraph">
<p>Specify a list of languages to install. Note that this is different from package group level selections. This option does not describe which package groups should be installed; instead, it sets RPM macros controlling which translation files from individual packages should be installed.</p>
</div>
</dd>
<dt class="hdlist1"><code class="option">--multilib</code></dt>
<dd>
<div class="paragraph">
<p>Configure the installed system for multilib packages (that is, to allow installing 32-bit packages on a 64-bit system) and install packages specified in this section as such.</p>
</div>
<div class="paragraph">
<p>Normally, on an AMD64 and Intel 64 system, only packages for this architecture (marked as <code>x86_64</code>) and packages for all architectures (marked as <code>noarch</code>) would be installed. When you use this option, packages for 32-bit AMD and Intel systems (marked as <code>i686</code>) are automatically installed as well, if available.</p>
</div>
<div class="paragraph">
<p>This only applies to packages explicitly specified in the <code class="command">%packages</code> section. Packages which are only being installed as dependencies without being specified in the Kickstart file are only installed in architecture versions in which they are needed, even if they are available for more architectures.</p>
</div>
</dd>
<dt class="hdlist1"><code class="option">--nocore</code></dt>
<dd>
<div class="paragraph">
<p>Disables installation of the <code>@Core</code> package group which is otherwise always installed by default. Disabling the <code>@Core</code> package group should be only used for creating lightweight containers; installing a desktop or server system with <code class="option">--nocore</code> will result in an unusable system.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Using <code>-@Core</code> to exclude packages in the <code>@Core</code> package group does not work. The only way to exclude the <code>@Core</code> package group is with the <code class="option">--nocore</code> option.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><code class="option">--retries=</code></dt>
<dd>
<div class="paragraph">
<p>Sets the number of times <strong class="application">Yum</strong> will attempt to download packages (retries). The default value is <code>10</code>. This option only applies during the installation, and will not affect <strong class="application">Yum</strong> configuration on the installed system.</p>
</div>
</dd>
<dt class="hdlist1"><code class="option">--timeout=</code></dt>
<dd>
<div class="paragraph">
<p>Sets the <strong class="application">Yum</strong> timeout in seconds. The default value is <code>30</code>. This option only applies during the installation, and will not affect <strong class="application">Yum</strong> configuration on the installed system.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<div class="title">Options for Specific Package Groups</div>
<p>The options in this list only apply to a single package group. Instead of using them at the <code class="command">%packages</code> command in the Kickstart file, append them to the group name. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">%packages</code>
@Graphical Internet --optional
<code class="command">%end</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code class="option">--nodefaults</code></dt>
<dd>
<div class="paragraph">
<p>Only install the group&#8217;s mandatory packages, not the default selections.</p>
</div>
</dd>
<dt class="hdlist1"><code class="option">--optional</code></dt>
<dd>
<div class="paragraph">
<p>Install packages marked as optional in the group definition in the <code>*-comps-<em>variant</em>.<em>architecture</em>.xml</code> file, in addition to installing the default selections.</p>
</div>
<div class="paragraph">
<p>Note that some package groups, such as <code>Scientific Support</code>, do not have any mandatory or default packages specified - only optional packages. In this case the <code class="option">--optional</code> option must always be used, otherwise no packages from this group will be installed.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sect-kickstart-preinstall"><a class="anchor" href="#sect-kickstart-preinstall"></a>Pre-installation Script</h3>
<div class="paragraph">
<p>The <code class="command">%pre</code> script is run on the system immediately after the Kickstart file has been parsed, but before installation begins. This section must be placed towards the end of the Kickstart file, after the Kickstart commands described in <a href="#sect-kickstart-commands">Kickstart Commands and Options</a>, and must start with <code class="command">%pre</code> and end with <code class="command">%end</code>. If your Kickstart file also includes a <code class="command">%post</code> section, the order in which the <code class="command">%pre</code> and <code class="command">%post</code> sections are included does not matter.</p>
</div>
<div class="paragraph">
<p>The <code class="command">%pre</code> script can be used for activation and configuration of networking and storage devices. It is also possible to run scripts, using interpreters available in the installation environment. Adding a <code class="command">%pre</code> script can be useful if you have networking and storage that needs special configuration before proceeding with the installation, or have a script that, for example, sets up additional logging parameters or environment variables. Debugging problems with <code class="command">%pre</code> scripts can be difficult, so it is recommended only to use a <code class="command">%pre</code> script when necessary.</p>
</div>
<div class="paragraph">
<p>Commands related to networking, storage, and file systems are available to use in the <code class="command">%pre</code> script, in addition to most of the utilities in the installation environment&#8217;s <code>/sbin</code> and <code>/bin</code> directories.</p>
</div>
<div class="paragraph">
<p>You can access the network in the <code class="command">%pre</code> section. However, the <em>name service</em> has not been configured at this point, so only IP addresses work, not URLs.</p>
</div>
<div class="paragraph">
<p>The pre-installation script section of Kickstart <em>cannot</em> manage multiple install trees or source media. This information must be included for each created Kickstart file, as the pre-installation script occurs during the second stage of the installation process.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Unlike the post-installation script, the pre-installation script is not run in the <code>chroot</code> environment.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following options can be used to change the behavior of pre-installation scripts. To use an option, append it to the <code class="command">%pre</code> line at the beginning of the script. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">%pre --interpreter=/usr/bin/python</code>
--- Python script omitted --
<code class="command">%end</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code class="option">--interpreter=</code></dt>
<dd>
<div class="paragraph">
<p>Allows you to specify a different scripting language, such as Python. Any scripting language available on the system can be used; in most cases, these are <code>/usr/bin/sh</code>, <code>/usr/bin/bash</code>, and <code>/usr/bin/python</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code class="option">--erroronfail</code></dt>
<dd>
<div class="paragraph">
<p>Display an error and halt the installation if the script fails. The error message will direct you to where the cause of the failure is logged.</p>
</div>
</dd>
<dt class="hdlist1"><code class="option">--log=</code></dt>
<dd>
<div class="paragraph">
<p>Logs the script&#8217;s output into the specified log file. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">%pre --log=/mnt/sysimage/root/ks-pre.log</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The following is an example <code class="command">%pre</code> section:</p>
</div>
<div id="exam-kickstart-pre-script" class="exampleblock">
<div class="title">Example 5. Sample %pre Script</div>
<div class="content">
<div class="literalblock">
<div class="content">
<pre>%pre
#!/bin/sh
hds=""
mymedia=""
for file in /proc/ide/h* do
mymedia=`cat $file/media`
if [ $mymedia == "disk" ] ; then
hds="$hds `basename $file`"
fi
done
set $hds
numhd=`echo $#`
drive1=`echo $hds | cut -d' ' -f1`
drive2=`echo $hds | cut -d' ' -f2`

#Write out partition scheme based on whether there are 1 or 2 hard drives
if [ $numhd == "2" ] ; then
#2 drives
echo "#partitioning scheme generated in %pre for 2 drives" &gt; /tmp/part-include
echo "clearpart --all" &gt;&gt; /tmp/part-include
echo "part /boot --fstype xfs --size 75 --ondisk hda" &gt;&gt; /tmp/part-include
echo "part / --fstype xfs --size 1 --grow --ondisk hda" &gt;&gt; /tmp/part-include
echo "part swap --recommended --ondisk $drive1" &gt;&gt; /tmp/part-include
echo "part /home --fstype xfs --size 1 --grow --ondisk hdb" &gt;&gt; /tmp/part-include
else
#1 drive
echo "#partitioning scheme generated in %pre for 1 drive" &gt; /tmp/part-include
echo "clearpart --all" &gt;&gt; /tmp/part-include
echo "part /boot --fstype xfs --size 75" &gt;&gt; /tmp/part-include
echo "part swap --recommended" &gt;&gt; /tmp/part-include
echo "part / --fstype xfs --size 2048" &gt;&gt; /tmp/part-include
echo "part /home --fstype xfs --size 2048 --grow" &gt;&gt; /tmp/part-include
fi
%end</pre>
</div>
</div>
<div class="paragraph">
<p>This script determines the number of hard drives in the system and writes a text file with a different partitioning scheme depending on whether it has one or two drives. Instead of having a set of partitioning commands in the Kickstart file, include the following line:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">%include /tmp/part-include</code></pre>
</div>
</div>
<div class="paragraph">
<p>The partitioning commands selected in the script will be used.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sect-kickstart-anaconda-configuration"><a class="anchor" href="#sect-kickstart-anaconda-configuration"></a>Anaconda configuration</h3>
<div class="paragraph">
<p>Additional installation options can be configured in the <code class="command">%anaconda</code> section of your Kickstart file. This section controls the behavior of the user interface of the installation system.</p>
</div>
<div class="paragraph">
<p>This section must be placed towards the end of the Kickstart file, after the Kickstart commands described in <a href="#sect-kickstart-commands">Kickstart Commands and Options</a>, and must start with <code class="command">%anaconda</code> and end with <code class="command">%end</code>.</p>
</div>
<div class="paragraph">
<p>Currently, the only command that can be used in the <code class="command">%anaconda</code> section is <code class="command">pwpolicy</code>. See <a href="#sect-kickstart-commands">Kickstart Commands and Options</a> for more details.</p>
</div>
<div class="paragraph">
<p>The following is an example <code class="command">%anaconda</code> section:</p>
</div>
<div id="exam-kickstart-anaconda-script" class="exampleblock">
<div class="title">Example 6. Sample %anaconda Script</div>
<div class="content">
<div class="literalblock">
<div class="content">
<pre><code class="command">%anaconda</code>
pwpolicy root --minlen=10 --strict
<code class="command">%end</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example <code class="command">%anaconda</code> section sets a password policy which requires that the root password be at least 10 characters long, and strictly forbids passwords which do not match this requirement.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sect-kickstart-postinstall"><a class="anchor" href="#sect-kickstart-postinstall"></a>Post-installation Script</h3>
<div class="paragraph">
<p>You have the option of adding commands to run on the system once the installation is complete, but before the system is rebooted for the first time. This section must be placed towards the end of the Kickstart file, after the Kickstart commands described in <a href="#sect-kickstart-commands">Kickstart Commands and Options</a>, and must start with <code class="command">%post</code> and end with <code class="command">%end</code>. If your Kickstart file also includes a <code class="command">%pre</code> section, the order of the <code class="command">%pre</code> and <code class="command">%post</code> sections does not matter.</p>
</div>
<div class="paragraph">
<p>This section is useful for functions such as installing additional software or configuring an additional name server. The post-install script is run in a chroot environment, therefore, performing tasks such as copying scripts or RPM packages from the installation media do not work by default. You can change this behavior using the <code class="option">--nochroot</code> option as described below.</p>
</div>
<div class="paragraph">
<p>Because post-install script runs in a chroot environment, most <code class="command">systemctl</code> commands will refuse to perform any action. For more information, see the <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/sect-Managing_Services_with_systemd-Services.html#sect-behavior_of_systemctl_in_a_chroot_environment">"Behavior of systemctl in a chroot Environment" section</a> of System Administrator&#8217;s Guide for Red&#160;Hat Enterprise&#160;Linux&#160;7.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you configured the network with static IP information, including a name server, you can access the network and resolve IP addresses in the <code class="command">%post</code> section. If you configured the network for <code>DHCP</code>, the <code>/etc/resolv.conf</code> file has not been completed when the installation executes the <code class="command">%post</code> section. You can access the network, but you cannot resolve IP addresses. Thus, if you are using <code>DHCP</code>, you must specify IP addresses in the <code class="command">%post</code> section.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following options can be used to change the behavior of post-installation scripts. To use an option, append it to the <code class="command">%post</code> line at the beginning of the script. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">%post --interpreter=/usr/bin/python</code>
--- Python script omitted --
<code class="command">%end</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code class="option">--interpreter=</code></dt>
<dd>
<div class="paragraph">
<p>Allows you to specify a different scripting language, such as Python. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">%post --interpreter=/usr/bin/python</code></pre>
</div>
</div>
<div class="paragraph">
<p>Any scripting language available on the system can be used; in most cases, these are <code>/usr/bin/sh</code>, <code>/usr/bin/bash</code>, and <code>/usr/bin/python</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code class="option">--nochroot</code></dt>
<dd>
<div class="paragraph">
<p>Allows you to specify commands that you would like to run outside of the chroot environment.</p>
</div>
<div class="paragraph">
<p>The following example copies the file <code>/etc/resolv.conf</code> to the file system that was just installed.</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">%post --nochroot</code>
cp /etc/resolv.conf /mnt/sysimage/etc/resolv.conf
<code class="command">%end</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code class="option">--erroronfail</code></dt>
<dd>
<div class="paragraph">
<p>Display an error and halt the installation if the script fails. The error message will direct you to where the cause of the failure is logged.</p>
</div>
</dd>
<dt class="hdlist1"><code class="option">--log=</code></dt>
<dd>
<div class="paragraph">
<p>Logs the script&#8217;s output into the specified log file. Note that the path of the log file must take into account whether or not you use the <code class="option">--nochroot</code> option. For example, without <code class="option">--nochroot</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">%post --log=/root/ks-post.log</code></pre>
</div>
</div>
<div class="paragraph">
<p>with <code class="option">--nochroot</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">%post --nochroot --log=/mnt/sysimage/root/ks-post.log</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The following is an example <code class="command">%post</code> section:</p>
</div>
<div id="exam-kickstart-post-script" class="exampleblock">
<div class="title">Example 7. Sample %post Script</div>
<div class="content">
<div class="literalblock">
<div class="content">
<pre># Start of the %post section with logging into /root/ks-post.log
%post --log=/root/ks-post.log

# Mount an NFS share
mkdir /mnt/temp
mount -o nolock 10.10.0.2:/usr/new-machines /mnt/temp
openvt -s -w -- /mnt/temp/runme
umount /mnt/temp

# End of the %post section
%end</pre>
</div>
</div>
<div class="paragraph">
<p>The above example mounts an NFS share and executes a script named <code>runme</code> located at <code>/usr/new-machines/</code> on the share. Note that NFS file locking is <em>not</em> supported while in Kickstart mode, therefore the <code class="option">-o nolock</code> option is required.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sect-kickstart-onerror"><a class="anchor" href="#sect-kickstart-onerror"></a>Kickstart Error Handling</h3>
<div class="paragraph">
<p>Kickstart installations can contain custom scripts which are run when the installer encounters a fatal error - for example, an error in a package that has been requested for installation, failure to start VNC when specified, or an error when scanning storage devices. Installation cannot continue after such an error has occured. The installer will run all <code class="command">%onerror</code> scripts in the order they are provided in the Kickstart file. In addition, <code class="command">%onerror</code> scripts will be run in the event of a traceback.</p>
</div>
<div class="paragraph">
<p>Each <code class="command">%onerror</code> script is required to end with <code class="command">%end</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code class="option">--erroronfail</code></dt>
<dd>
<div class="paragraph">
<p>Display an error and halt the installation if the script fails. The error message will direct you to where the cause of the failure is logged.</p>
</div>
</dd>
<dt class="hdlist1"><code class="option">--interpreter=</code></dt>
<dd>
<div class="paragraph">
<p>Allows you to specify a different scripting language, such as Python. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre><code class="command">%post --interpreter=/usr/bin/python</code></pre>
</div>
</div>
<div class="paragraph">
<p>Any scripting language available on the system can be used; in most cases, these are <code>/usr/bin/sh</code>, <code>/usr/bin/bash</code>, and <code>/usr/bin/python</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code class="option">--log=</code></dt>
<dd>
<div class="paragraph">
<p>Logs the script&#8217;s output into the specified log file.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sect-kickstart-addon"><a class="anchor" href="#sect-kickstart-addon"></a>Kickstart Add-ons</h3>
<div class="paragraph">
<p>Kickstart installations support add-ons. These add-ons can expand the basic Kickstart (and Anaconda) functionality in many ways.</p>
</div>
<div class="paragraph">
<p>To use an add-on in your Kickstart file, use the <code class="command">%addon <em>addon_name</em> <em>options</em></code> command, and finish the command with an <code class="command">%end</code> statement, similar to pre-installation and post-installation scripts described in previous sections. For example, if you want to use the <strong class="application">Kdump</strong> add-on, which is distributed with <strong class="application">Anaconda</strong> by default, use the following commands:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>%addon com_redhat_kdump --enable --reserve-mb=auto
%end</pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="command">%addon</code> command does not include any options of its own - all options are dependent on the actual add-on. For more information about add-ons, see the <em class="citetitle"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/anaconda_customization_guide/">Red&#160;Hat Enterprise&#160;Linux&#160;7 Anaconda Customization Guide</a></em>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect-kickstart-examples"><a class="anchor" href="#sect-kickstart-examples"></a>Sample Kickstart Configurations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="sect-kickstart-partitioning-example"><a class="anchor" href="#sect-kickstart-partitioning-example"></a>Advanced Partitioning Example</h3>
<div class="paragraph">
<p>The following is an integrated example showing the <code class="command">clearpart</code>, <code class="command">zerombr</code>, <code class="command">part</code>, <code class="command">raid</code>, <code class="command">volgroup</code>, and <code class="command">logvol</code> Kickstart options in action:</p>
</div>
<div class="exampleblock">
<div class="title">Example 8. Advanced Partitioning Example</div>
<div class="content">
<div class="literalblock">
<div class="content">
<pre>clearpart  --drives=hda,hdc
zerombr
# Raid 1 IDE config
part raid.11 --size 1000  --asprimary --ondrive=hda
part raid.12 --size 1000  --asprimary --ondrive=hda
part raid.13 --size 2000  --asprimary --ondrive=hda
part raid.14 --size 8000              --ondrive=hda
part raid.15 --size 16384 --grow      --ondrive=hda
part raid.21 --size 1000  --asprimary --ondrive=hdc
part raid.22 --size 1000  --asprimary --ondrive=hdc
part raid.23 --size 2000  --asprimary --ondrive=hdc
part raid.24 --size 8000              --ondrive=hdc
part raid.25 --size 16384 --grow      --ondrive=hdc

# You can add --spares=x
raid /     --fstype xfs  --device root  --level=RAID1 raid.11 raid.21
raid /safe --fstype xfs  --device safe  --level=RAID1 raid.12 raid.22
raid swap  --fstype swap --device swap  --level=RAID1 raid.13 raid.23
raid /usr  --fstype xfs  --device usr 	 --level=RAID1 raid.14 raid.24
raid pv.01 --fstype xfs  --device pv.01 --level=RAID1 raid.15 raid.25

# LVM configuration so that we can resize /var and /usr/local later
volgroup sysvg pv.01
logvol /var           --vgname=sysvg --size=8000     --name=var
logvol /var/freespace --vgname=sysvg --size=8000     --name=freespacetouse
logvol /usr/local     --vgname=sysvg --size=1 --grow --name=usrlocal</pre>
</div>
</div>
<div class="paragraph">
<p>This advanced example implements LVM over RAID, as well as the ability to resize various directories for future growth.</p>
</div>
<div class="paragraph">
<p>First, the <code class="command">clearpart</code> command is used on drives <code>hda</code> and <code>hdc</code> to wipe them. The <code class="command">zerombr</code> command initializes unused partition tables.</p>
</div>
<div class="paragraph">
<p>Then, the two drives are partitioned to prepare them for RAID configuration. Each drive is divided into five partitions, and each drive is partitioned into an identical layout.</p>
</div>
<div class="paragraph">
<p>The next part uses these pairs of physical partitions to create a software RAID device with RAID1 level (mirroring). The first four RAID devices are used for <code>/</code> (root), <code>/safe</code>, <code>swap</code> and <code>/usr</code>. The fifth, largest pair of partitions is named <code>pv.01</code> and will be used in the following part as a physical volume for LVM.</p>
</div>
<div class="paragraph">
<p>Finally, the last set of commands first creates a volume group named <code>sysvg</code> on the <code>pv.01</code> physical volume. Then, three logical volumes (<code>/var</code>, <code>/var/freespace</code> and <code>/usr/local</code>) are created and added to the <code>sysvg</code> volume group. The <code>/var</code> and <code>/var/freespace</code> volumes have a set size of 8 GB, and the <code>/usr/local</code> volume uses the <code class="option">--grow</code> option to fill all remaining available space.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sect-kickstart-input-example"><a class="anchor" href="#sect-kickstart-input-example"></a>User Input Example</h3>
<div class="paragraph">
<p>The following is an example showing how to prompt the user for input, and then read that input and save it as a variable, using bash:</p>
</div>
<div class="exampleblock">
<div class="title">Example 9. User Input Example</div>
<div class="content">
<div class="literalblock">
<div class="content">
<pre><code class="command">exec &lt; /dev/tty6 &gt; /dev/tty6 2&gt; /dev/tty6</code>
<code class="command">chvt 6</code>
<code class="command">IFS=$'\n'</code>
<code class="command">echo -n "Enter input: "</code>
<code class="command">read USERINPUT</code>
<code class="command">echo</code>
<code class="command">echo -n "You entered:" "$USERINPUT"</code>
<code class="command">echo</code>
<code class="command">chvt 1</code>
<code class="command">exec &lt; /dev/tty1 &gt; /dev/tty1 2&gt; /dev/tty1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Due to the way Kickstart operates, the script must switch to a new virtual terminal before reading input from the user. This is accomplished by the <code class="command">exec &lt; /dev/tty6 &gt; /dev/tty6 2&gt; /dev/tty6</code> and <code class="command">chvt 6</code> commands. The <code class="command">read USERINPUT</code> reads input from the user until enter is pressed, and stores it in the variable <code>USERINPUT</code>. The <code class="command">echo -n "You entered:" "$USERINPUT"</code> command displays the text <code>You entered:</code> followed by the user&#8217;s input. Finally, the <code class="command">chvt 1</code> and <code class="command">exec &lt; /dev/tty1 &gt; /dev/tty1 2&gt; /dev/tty1</code> commands switch back to the original terminal and allow Kickstart to continue installation.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sect-kickstart-service-example"><a class="anchor" href="#sect-kickstart-service-example"></a>Example Kickstart file for installing and starting the RNG daemon</h3>
<div class="paragraph">
<p>The following is an example Kickstart file which demonstrates how to install and enable a service, in this case the Random Number Generator (RNG) daemon, which supplies entropy to the system kernel:</p>
</div>
<div class="exampleblock">
<div class="title">Example 10. Example Kickstart file for installing and starting the RNG daemon</div>
<div class="content">
<div class="literalblock">
<div class="content">
<pre><code class="command">services --enabled=rngd</code>

<code class="command">%packages</code>
<code class="command">rng-tools</code>
<code class="command">%end</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="command">services --enabled=rngd</code> command instructs the installed system to start the RNG daemon each time the system starts. The <strong class="package">rng-tools</strong> package, which contains the RNG daemon, is then designated for installation.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <p>All CentOS Documentation content available under <a href="http://creativecommons.org/licenses/by-sa/3.0/legalcode">CC-BY-SA 3.0.</a>
  <p>This page was built using a modified version of the Antora default UI. The source code for this UI is licensed under the terms of the <a href="https://www.mozilla.org/en-US/MPL/2.0/">MPL-2.0</a> license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
