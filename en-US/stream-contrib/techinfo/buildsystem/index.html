<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>The Build System :: CentOS Docs Site</title>
    <link rel="canonical" href="https://docs.centos.org/stream-contrib/techinfo/buildsystem/">
    <meta name="generator" content="Antora 3.0.1">
    <link rel="stylesheet" href="../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.centos.org"><img src="https://docs.centos.org/_images/logo_small.png"></a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.centos.org/download/">Download CentOS</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="stream-contrib" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../">Contributor&#x27;s Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../">Index</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../quickstart/">Quick start guide for new contributors</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Contributing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contributing/roles/">Roles and responsibilities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contributing/sigs/">Special interest groups (SIGs)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contributing/reporting-bugs/">Reporting bugs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contributing/feature-requests/">Feature requests</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contributing/source-git/">Source-git</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Technical information</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../submitting-patches/">Submitting patches</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/">Testing</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="./">Build system</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ci-cd/">CI/CD</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../releng/">Release engineering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../packaging-guidelines/">Packaging guidelines</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../glossary/">Glossary of terms</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Contributor&#x27;s Guide</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">CentOS 8 Documentation</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../8-docs/">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">CentOS Documentation</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../docs/">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Contributor's Guide</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../../">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Installation Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../centos/">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../docs/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../">Contributor's Guide</a></li>
    <li>Technical information</li>
    <li><a href="./">Build system</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/CentOS/docs-contributors-guide/edit/master/modules/ROOT/pages/techinfo/buildsystem.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1 class="page">The Build System</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_source_code">Source Code</a>
<ul class="sectlevel2">
<li><a href="#_gitlab">GitLab</a></li>
<li><a href="#_centos_git">CentOS Git</a></li>
<li><a href="#_distgit">DistGit</a></li>
</ul>
</li>
<li><a href="#_build_platform">Build Platform</a>
<ul class="sectlevel2">
<li><a href="#_koji">Koji</a></li>
<li><a href="#_module_build_service">Module Build Service</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The CentOS Project uses and makes available several services that compose its build system. These tools are used by both the core project to produce the CentOS Linux and CentOS Stream distributions, and by the various <a href="https://www.centos.org/about/governance/sigs/">Special Interest Group (SIG)</a> projects.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_source_code"><a class="anchor" href="#_source_code"></a>Source Code</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All artifacts (RPMs, container images, ISO images) build using source code stored in a Git version control system. Repositories have different branches reflecting the build environment those sources will be used in. The CentOS Project has two primary locations for this content.</p>
</div>
<div class="sect2">
<h3 id="_gitlab"><a class="anchor" href="#_gitlab"></a>GitLab</h3>
<div class="paragraph">
<p><a href="https://gitlab.com/redhat/centos-stream">GitLab.com</a> is the platform for developing CentOS Stream 9 and later. Projects are publicly accessible and a GitLab account can be used to contribute.</p>
</div>
<div class="paragraph">
<p>All GitLab activity is forwarded to <a href="https://apps.fedoraproject.org/datagrepper">Fedora Messaging</a>. The GitLab specific messages ca be seen at the following link: <a href="https://apps.fedoraproject.org/datagrepper/raw?rows_per_page=1&amp;delta=127800&amp;category=gitlab">CentOS GitLab Messages</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_centos_git"><a class="anchor" href="#_centos_git"></a>CentOS Git</h3>
<div class="paragraph">
<p><a href="https://git.centos.org">CentOS Git</a> hosts content derived from Red Hat Enterprise Linux&#174; source RPMs and content used by SIGs. The platform is a project-hosted instance of <a href="https://pagure.io/pagure">Pagure</a>, a Git forge developed and used by <a href="https://getfedora.org">Fedora</a>&#174;. Projects are publicly accessible, and a <a href="https://accounts.fedoraproject.org">Fedora Account System (FAS)</a> identity required for contributor access.</p>
</div>
</div>
<div class="sect2">
<h3 id="_distgit"><a class="anchor" href="#_distgit"></a>DistGit</h3>
<div class="paragraph">
<p>Though Git is a critical part of the Project&#8217;s build system, it is not the best solution for dealing with non-text objects such as upstream code tarballs and binary files. <a href="https://github.com/release-engineering/dist-git">DistGit</a> is an integration with Git that provides tooling to be able to accommodate the tracking of these assets alongside the RPM repositories. It creates a lookaside cache that stores the objects and modifies a designated file in the RPM repository that references them with a SHA hash. On CentOS Git this is the <code>.&lt;package&gt;.metadata</code> file, and on GitLab the <code>sources</code> file. During the build process objects referenced in the DistGit file will be pulled from the lookaside cache into the appropriate directories.</p>
</div>
<div class="paragraph">
<p>For example, the Git package repository:</p>
</div>
<div class="listingblock">
<div class="title">CentOS Git: <a href="https://git.centos.org/rpms/git/blob/c8s/f/.git.metadata">.git.metadata</a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">996c0be58e901deb4ef9d0145e7bf98cdf6a0fb3 SOURCES/git-2.27.0.tar.xz
097b8da13939ac9f51f97a5659184c1d96fb0973 SOURCES/gpgkey-junio.asc</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">GitLab: <a href="https://gitlab.com/redhat/centos-stream/rpms/git/-/blob/c9s/sources">sources</a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">SHA512 (git-2.31.1.tar.xz) = 9aa334a3e8519700ff5d112153ec42677722980094caa9d22aa91afdb65166bd9a98fa445c0d327c428ebfa73bf4832e9b3836109a1d9319feafe3191cfd170e
SHA512 (git-2.31.1.tar.sign) = 0a721876f9869d1dc9a43e7f83f8e63a3d8fa932ff2d2e69bb98f3e314e2e9a896c2171cb6a020d6c6e929fdf1af736dbeb3f25f93fb4d359a9aaa5b859069c3</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_build_platform"><a class="anchor" href="#_build_platform"></a>Build Platform</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_koji"><a class="anchor" href="#_koji"></a>Koji</h3>
<div class="paragraph">
<p>The service that builds the various distribution deliverables (RPMs, container archives, disk images, LiveMedia installers, etc) is <a href="https://pagure.io/koji">Koji</a>. Within the CentOS Project infrastructure, there are three Koji instances:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Service Instance</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://kojihub.stream.centos.org">CentOS Stream Build Service</a> (KojiHub)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Builds CentOS Stream 9, pulling sources from Gitlab.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://koji.mbox.centos.org">CentOS Build Service</a> (MBOX Koji)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Builds CentOS Linux and CentOS Stream 8, pulling sources from CentOS Git.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://cbs.centos.org">Community Build Service</a> (CBS)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used by community projects, such as SIGs, to produce deliverables. Sources are pulled from CentOS Git.</p>
<p class="tableblock">Currently does not support Modularity packaging.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Migration in Progress</div>
<div class="paragraph">
<p>The CentOS Stream 8 build pipeline is migrating to the Koji instance used by CentOS Stream 9.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A primer on using Koji can be found in the Fedora documentation (the <code>fedpkg</code> parts can be ignored): <a href="https://docs.fedoraproject.org/en-US/package-maintainers/Using_the_Koji_Build_System">Using the Koji build system</a>. Please see the <a href="https://docs.pagure.org/koji">Koji documentation</a> for more detailed instructions and information about Koji&#8217;s capabilities.</p>
</div>
</div>
<div class="sect2">
<h3 id="_module_build_service"><a class="anchor" href="#_module_build_service"></a>Module Build Service</h3>
<div class="paragraph">
<p><a href="https://pagure.io/fm-orchestrator">MBS</a> integrates with Koji and handles the building of <a href="https://docs.fedoraproject.org/en-US/modularity">Modularity</a> related projects.</p>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <p>All CentOS Documentation content available under <a href="http://creativecommons.org/licenses/by-sa/3.0/legalcode">CC-BY-SA 3.0.</a>
  <p>This page was built using a modified version of the Antora default UI. The source code for this UI is licensed under the terms of the <a href="https://www.mozilla.org/en-US/MPL/2.0/">MPL-2.0</a> license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
